if(typeof RCP==="undefined"){var RCP=function(){}}RCP.prototype.GeoTools=function(e){var o=this;var t={map:null,markers:[],icon:"",browser_loc:null};var a=e;var r;var n;var s;var i;this.setMap=function(e){a.map=e};this.getMap=function(){return a.map};this.getMapRadius=function(){if(a.map){return d()}return false};this.getCurrentLocation=function(){if(a.map){return c()}return false};this.getBrowserLocation=function(e){if(typeof e==="undefined"){i=null}else{i=e}s=navigator.geolocation.getCurrentPosition(l,f,{maximumAge:0,timeout:1e4,enableHighAccuracy:true})};this.addressToLatLng=function(e,o,t){r.geocode({address:e},function(e,a){if(a==google.maps.GeocoderStatus.OK){o(e[0].geometry.location,t)}else{o(false,t)}})};this.getCityBoundaries=function(e,o,t,a,n){r.geocode({address:e+", "+o+", "+t},function(e,o){if(o==google.maps.GeocoderStatus.OK){a(e[0].geometry,n)}else{a(false,n)}})};this.latLngToZip=function(e,o,t){r.geocode({location:e},function(e,a){if(a===google.maps.GeocoderStatus.OK){var r=e[0].formatted_address.match(/([a-zA-Z][0-9][a-zA-Z][ -]?[0-9][a-zA-Z][0-9])|([0-9]{2}[ ]?[0-9]{3})/);if(r){o(r[0],t)}else{o(null,t)}}else{o(false,t)}})};this.latLngToAddress=function(e,o,t){r.geocode({location:e},function(a,r){if(r===google.maps.GeocoderStatus.OK){var n={};var s=a[0].formatted_address.match(/([a-zA-Z][0-9][a-zA-Z][ -]?[0-9][a-zA-Z][0-9])|([0-9]{2}[ ]?[0-9]{3})/);if(s){n.zip=s[0]}var s=a[0].formatted_address.match(/[ ]([a-zA-Z]+)$/);if(s){n.country=s[1]}var s=a[0].formatted_address.match(/[ ]([A-Z]{2})[ ](?:[a-zA-Z][0-9][a-zA-Z][ -]?[0-9][a-zA-Z][0-9])|(?:[0-9]{2}[ ]?[0-9]{3})/);if(s){n.state=s[1]}var s=a[0].formatted_address.match(/(?:[, ]+)?(['a-zA-Z]+[\- ]?[a-zA-Z]+)[,](?:[ ][A-Z]{2}[ ])/);if(s){n.city=s[1]}var s=a[0].formatted_address.match(/^([0-9]+)[ ]([a-zA-Z' ]+)[, ]/);if(s){n.number=s[1];n.street=s[2]}n.formatted=a[0].formatted_address;n.lat=e.lat;n.lng=e.lng;o(n,t)}else{o(false,t)}})};this.zipToAddress=function(e,o,t){r.geocode({address:e},function(e,a){if(a===google.maps.GeocoderStatus.OK){var r={};var n=e[0].formatted_address.match(/([a-zA-Z][0-9][a-zA-Z][ -]?[0-9][a-zA-Z][0-9])|([0-9]{2}[ ]?[0-9]{3})/);if(n){r.zip=n[0]}var n=e[0].formatted_address.match(/[ ]([a-zA-Z]+)$/);if(n){r.country=n[1]}var n=e[0].formatted_address.match(/[ ]([A-Z]{2})[ ](?:[a-zA-Z][0-9][a-zA-Z][ -]?[0-9][a-zA-Z][0-9])|(?:[0-9]{2}[ ]?[0-9]{3})/);if(n){r.state=n[1]}var n=e[0].formatted_address.match(/(?:[, ]+)?(['a-zA-Z]+[\- ]?[a-zA-Z]+)[,](?:[ ][A-Z]{2}[ ])/);if(n){r.city=n[1]}var n=e[0].formatted_address.match(/^([0-9]+)[ ]([a-zA-Z' ]+)[, ]/);if(n){r.number=n[1];r.street=n[2]}r.formatted=e[0].formatted_address;r.lat=e[0].geometry.location.lat();r.lng=e[0].geometry.location.lng();o(r,t)}else{o(false,t)}})};this.zipToLatLng=function(e,o,t){r.geocode({address:e},function(e,a){if(a===google.maps.GeocoderStatus.OK){var r={};r.lat=e[0].geometry.location.lat();r.lng=e[0].geometry.location.lng();o(r,t)}else{o(false,t)}})};this.getRoute=function(e,o,t,a,r){if(typeof t==="undefined"){var t=RCP.GeoTools.TRAVEL_MODE_CAR}var n=new google.maps.DirectionsService;var s={origin:e,destination:o,travelMode:t};n.route(s,function(e,o){if(o===google.maps.DirectionsStatus.OK){a(e,r)}else{a(false,r)}})};this.calcRouteMinutes=function(e){var o=0;for(var t=0;t<e.legs.length;t++){o+=e.legs[t].duration.value}o=Math.round(o/60);return o};this.drawRoute=function(e){if(!n){n=new google.maps.DirectionsRenderer}n.setMap(a.map);n.setDirections(e)};this.clearMap=function(){if(a.map&&n){n.setMap(null)}};function l(e){var o=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);var t={gmap:o,raw:{lat:e.coords.latitude,lng:e.coords.longitude}};if(i){i(t);i=null}else{$(document).trigger(RCP.GeoTools.BROWSER_LOC_SUCCESS,t)}}function f(e){$(document).trigger(RCP.GeoTools.BROWSER_LOC_ERROR,e)}function d(){if(a.map){var e=a.map.getBounds();var o=e.getCenter();var t=e.getNorthEast();var r=3963;var n=o.lat()/57.2958;var s=o.lng()/57.2958;var i=t.lat()/57.2958;var l=t.lng()/57.2958;var f=r*Math.acos(Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos(l-s));return f}return false}function c(){var e=a.map.getCenter();var o=new google.maps.LatLng(e.lat(),e.lng());return o}function u(){for(var e in t){if(!a.hasOwnProperty(e)){a[e]=t[e]}}}function g(){if(typeof google==="undefined"||typeof google.maps==="undefined"){$(document).trigger(RCP.GeoTools.ERROR_GMAP);return}r=new google.maps.Geocoder;if(!a){a={}}u();if(a.map&&a.markers.length>0){}}g()};RCP.GeoTools=function(e){"use strict";return new RCP.prototype.GeoTools(e)};RCP.GeoTools.ERROR="error";RCP.GeoTools.ERROR_GMAP="errorGmap";RCP.GeoTools.TRAVEL_MODE_CAR="DRIVING";RCP.GeoTools.TRAVEL_MODE_TRANSIT="TRANSIT";RCP.GeoTools.TRAVEL_MODE_WALK="WALKING";RCP.GeoTools.TRAVEL_MODE_BIKE="BICYCLING";RCP.GeoTools.BROWSER_LOC_SUCCESS="BROWSER_LOC_SUCCESS";RCP.GeoTools.BROWSER_LOC_ERROR="BROWSER_LOC_ERROR";