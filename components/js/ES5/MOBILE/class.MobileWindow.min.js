if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileWindow=function(i){"use strict";function o(){var i=r();$(E.container).append(i),W.el=h=$(E.container).find(".ogx_mobile_window:last");var o=h.find(".ogx_view:first"),n=$(window).height()-o.position().top;o.height(n)}function n(i,o){var n;return o.indexOf("%")!==-1?(n=o.split("%"),n=parseInt(n[0]),n=Math.round(n*$(window)[i]()/100)):(n=o.split("px"),n=parseInt(n[0])),n}function e(i){return i.hasOwnProperty("originalEvent")?i.originalEvent.changedTouches[0]:i}function t(i){i?h.on(_,function(i){i=e(i),G=i.pageX,X=i.pageY,u=0,x=0,p||(p=h.position().left,O=h.position().top),l(!0),$("body").on(b,function(i){i.preventDefault(),i.stopImmediatePropagation(),i=e(i),u=i.pageX-G,x=i.pageY-X}),$("body").on(f,function(i){if(l(!1),$("body").off(b),$("body").off(f),i=e(i),W.anim===OGX.MobileWindow.ANIM_RIGHT||W.anim===OGX.MobileWindow.ANIM_LEFT){if(Math.abs(O-x)<Math.abs(p-u))if(W.anim===OGX.MobileWindow.ANIM_RIGHT){if(Math.abs(u)>E.dragMinX)return void E.core.hideWindow(E.name)}else if(W.anim===OGX.MobileWindow.ANIM_LEFT&&p>u)return void E.core.hideWindow(E.name);h.addClass("ogx_mobile_window_anim_in"),h.on("transitionend",function(){h.off("transitionend"),h.removeClass("ogx_mobile_window_anim_in")}),h.css({transform:"translate3D("+p+"px, 0px, 0px)"})}else if(W.anim===OGX.MobileWindow.ANIM_TOP){if(Math.abs(O-x)>Math.abs(p-u)&&Math.abs(O-x)>E.dragMinY&&X<i.pageY)return void E.core.hideWindow(E.name);h.addClass("ogx_mobile_window_anim_in"),h.on("transitionend",function(){h.off("transitionend"),h.removeClass("ogx_mobile_window_anim_in")}),h.css({transform:"translate3D(0px, 0px, 0px)"})}p=!1})}):h.off(_)}function l(i){i?m=setInterval(a,10):clearInterval(m)}function a(){W.anim===OGX.MobileWindow.ANIM_RIGHT||W.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(O-x)<Math.abs(p-u)&&Math.abs(O-x)<E.dragMaxY&&W.anim&&(W.anim===OGX.MobileWindow.ANIM_RIGHT?p+u+W.el.outerWidth()>$(window).width()&&h.css({transform:"translate3D("+(p+u)+"px, 0px, 0px)"}):W.anim===OGX.MobileWindow.ANIM_LEFT&&p>u&&h.css({transform:"translate3D("+u+"px, 0px, 0px)"})):W.anim===OGX.MobileWindow.ANIM_TOP&&Math.abs(O-x)>Math.abs(p-u)&&x>0&&h.css({transform:"translate3D(0px, "+x+"px, 0px)"})}function s(i){i?h.on("click",".ogx_mobile_window_main_icon",function(i){E.core.hideWindow(E.name)}):h.off("click",".ogx_mobile_window_main_icon")}function d(i){i?h.on("click",".ogx_mobile_window_icon",function(i){h.trigger(OGX.MobileWindow.HIT_ICON,{index:$(this).index()})}):h.off("click",".ogx_mobile_window_icon")}function r(){var i,o=n("width",E.width),e=n("height",E.height),t=E.winhtml;i=new RegExp("\\$w","g"),t=t.replace(i,o),i=new RegExp("\\$h","g"),t=t.replace(i,e),i=new RegExp("\\$style","g"),t=t.replace(i,E.style),i=new RegExp("\\$title","g"),t=t.replace(i,E.title),i=new RegExp("\\$css","g"),t=t.replace(i,E.css);for(var l="",a=0;a<E.icons.length;a++)l+='<span class="ogx_mobile_window_icon"><img src="'+E.icons[a]+'"></span>';return i=new RegExp("\\$icons","g"),t=t.replace(i,l)}function c(){for(var i in I)E.hasOwnProperty(i)||(E[i]=I[i]);switch(E.mode){case OGX.MobileWindow.MODE_MOBILE:_="touchstart",f="touchend",b="touchmove";break;case OGX.MobileWindow.MODE_DESKTOP:_="mousedown",f="mouseup",b="mousemove"}}function w(){if(c(),o(),M=W.el.find(".ogx_view:first"),E.scroll){if("undefined"==typeof OGX.MobileScrollContainer)return void console.log("%c CRITICAL ERROR - OGX.MobileScrollContainer not found! ","background:#222; color: #FF0000");var i=W.el.find(".ogx_view:first");g=new OGX.MobileScrollContainer({container:i[0],initDelay:100}),i.on(OGX.MobileScrollContainer.READY,function(){i.off(OGX.MobileScrollContainer.READY);var o=g.getOuter(),n=$(window).height();E.style!==OGX.MobileWindow.STYLE_NONE&&(n-=W.el.find(".ogx_mobile_window_head:first").height()),$(o).css("height",n+"px"),M=$(g.getInner())})}E.icons.length>0&&d(!0),E.drag&&t(!0),s(!0)}var _,f,b,g,M,m,h,p,O,u,x,G,X,W=this,E=i,I={style:OGX.MobileWindow.STYLE_BACK,mode:OGX.MobileWindow.MODE_MOBILE,icons:[],css:"",scroll:!1,drag:!0,dragMinX:100,dragMaxY:30,dragMinY:100,width:"100%",height:"100%",title:"",winhtml:'<div class="ogx_mobile_window ogx_hw $css" style="width:$wpx; height:$hpx;"><div class="ogx_mobile_window_head ogx_mobile_window_head_$style"><span class="ogx_mobile_window_main_$style ogx_mobile_window_main_icon"></span><span class="ogx_mobile_window_title">$title</span><span class="ogx_mobile_window_icons">$icons</span></div><div class="ogx_view"></div></div>',html:""};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.z_index=!1,this.updateSize=function(i,o){},this.updateScroll=function(){return!!E.scroll&&(g.update(),!0)},this.getContainer=function(){return M},this.setContent=function(i){if(E.scroll)if(g.getState()===OGX.MobileScrollContainer.READY){var o=g.getInner();$(o).html(i),g.update()}else g.el.on(OGX.MobileScrollContainer.READY,function(){g.el.off(OGX.MobileScrollContainer.READY),W.setContent(i)})},this.swapIcon=function(i,o){E.icons[i]=o,W.el.find(".ogx_mobile_window_icons").find(".ogx_mobile_window_icon:eq("+String(i)+")").find("img:first").attr("src",o)},this.destroy=function(){E.scroll&&g.destroy(),E.icons.length&&d(!1)},w()},OGX.MobileWindow=function(i){"use strict";return new OGX.prototype.MobileWindow(i)},OGX.MobileWindow.ANIM_LEFT="mobileWindowAnimLeft",OGX.MobileWindow.ANIM_RIGHT="mobileWindowAnimRight",OGX.MobileWindow.ANIM_TOP="mobileWindowAnimTop",OGX.MobileWindow.STYLE_BACK="icon_back",OGX.MobileWindow.STYLE_CLOSE="icon_close",OGX.MobileWindow.STYLE_NONE="none",OGX.MobileWindow.CLOSE="mobileWindowClose",OGX.MobileWindow.CLOSED="mobileWindowClosed",OGX.MobileWindow.HIT_ICON="mobileWindowHitIcon",OGX.MobileWindow.MODE_DESKTOP="modeDesktop",OGX.MobileWindow.MODE_MOBILE="modeMobile";