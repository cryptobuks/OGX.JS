if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileWindow=function(o){"use strict";function i(){var o=d();$(I.container).append(o),E.el=p=$(I.container).find(".ogx_mobile_window:last");var i=p.find(".ogx_view:first"),n=$(window).height()-i.position().top;i.height(n)}function n(o,i){var n;return i.indexOf("%")!==-1?(n=i.split("%"),n=parseInt(n[0]),n=Math.round(n*$(window)[o]()/100)):(n=i.split("px"),n=parseInt(n[0])),n}function e(o){return o.hasOwnProperty("originalEvent")?o.originalEvent.changedTouches[0]:o}function t(o){o?(p.on(_,function(o){o.stopImmediatePropagation(),o=e(o),G=o.pageX,X=o.pageY,O=0,x=0,m||(m=p.position().left,u=p.position().top),a(!0),$("body").on(g,function(o){o=e(o),O=o.pageX-G,x=o.pageY-X}),$("body").on(f,function(o){a(!1),$("body").off(g),$("body").off(f),o=e(o),E.anim===OGX.MobileWindow.ANIM_RIGHT||E.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(u-x)<Math.abs(m-O)&&(Math.abs(m-O)>I.dragMinX?E.anim===OGX.MobileWindow.ANIM_RIGHT?m<O&&I.core.hideWindow(I.name):E.anim===OGX.MobileWindow.ANIM_LEFT&&m>O&&I.core.hideWindow(I.name):(p.addClass("ogx_mobile_window_anim_in"),p.on("transitionend",function(){p.off("transitionend"),p.removeClass("ogx_mobile_window_anim_in")}),p.css({transform:"translate3D("+m+"px, 0px, 0px)"}))):E.anim===OGX.MobileWindow.ANIM_TOP&&Math.abs(u-x)>Math.abs(m-O)&&(Math.abs(u-x)>I.dragMinY&&X<o.pageY?I.core.hideWindow(I.name):(p.addClass("ogx_mobile_window_anim_in"),p.on("transitionend",function(){p.off("transitionend"),p.removeClass("ogx_mobile_window_anim_in")}),p.css({transform:"translate3D(0px, 0px, 0px)"}))),m=!1})}),p.on("touchstart touchmove",function(o){o.preventDefault(),o.stopImmediatePropagation()})):(p.off(_),p.off("touchstart touchmove"))}function a(o){o?b=setInterval(l,10):clearInterval(b)}function l(){E.anim===OGX.MobileWindow.ANIM_RIGHT||E.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(u-x)<Math.abs(m-O)&&Math.abs(u-x)<I.dragMaxY&&E.anim&&(E.anim===OGX.MobileWindow.ANIM_RIGHT?m<O&&p.css({transform:"translate3D("+O+"px, 0px, 0px)"}):E.anim===OGX.MobileWindow.ANIM_LEFT&&m>O&&p.css({transform:"translate3D("+O+"px, 0px, 0px)"})):E.anim===OGX.MobileWindow.ANIM_TOP&&Math.abs(u-x)>Math.abs(m-O)&&x>0&&p.css({transform:"translate3D(0px, "+x+"px, 0px)"})}function s(o){o?p.on("click",".ogx_mobile_window_main_icon",function(o){I.core.hideWindow(I.name)}):p.off("click",".ogx_mobile_window_main_icon")}function r(o){o?p.on("click",".ogx_mobile_window_icon",function(o){p.trigger(OGX.MobileWindow.HIT_ICON,{index:$(this).index()})}):p.off("click",".ogx_mobile_window_icon")}function d(){var o,i=n("width",I.width),e=n("height",I.height),t=I.winhtml;o=new RegExp("\\$w","g"),t=t.replace(o,i),o=new RegExp("\\$h","g"),t=t.replace(o,e),o=new RegExp("\\$style","g"),t=t.replace(o,I.style),o=new RegExp("\\$title","g"),t=t.replace(o,I.title),o=new RegExp("\\$css","g"),t=t.replace(o,I.css);for(var a="",l=0;l<I.icons.length;l++)a+='<span class="ogx_mobile_window_icon"><img src="'+I.icons[l]+'"></span>';return o=new RegExp("\\$icons","g"),t=t.replace(o,a)}function c(){for(var o in v)I.hasOwnProperty(o)||(I[o]=v[o]);switch(I.mode){case OGX.MobileWindow.MODE_MOBILE:_="touchstart",f="touchend",g="touchmove";break;case OGX.MobileWindow.MODE_DESKTOP:_="mousedown",f="mouseup",g="mousemove"}}function w(){if(c(),i(),M=E.el.find(".ogx_view:first"),I.scroll){if("undefined"==typeof OGX.MobileScrollContainer)return void console.log("%c CRITICAL ERROR - OGX.MobileScrollContainer not found! ","background:#222; color: #FF0000");var o=E.el.find(".ogx_view:first");h=new OGX.MobileScrollContainer({container:o[0],initDelay:100}),o.on(OGX.MobileScrollContainer.READY,function(){o.off(OGX.MobileScrollContainer.READY);var i=h.getOuter(),n=$(window).height();I.style!==OGX.MobileWindow.STYLE_NONE&&(n-=E.el.find(".ogx_mobile_window_head:first").height()),$(i).css("height",n+"px"),M=$(h.getInner())})}I.icons.length>0&&r(!0),I.drag&&t(!0),s(!0)}var _,f,g,h,M,b,p,m,u,O,x,G,X,E=this,I=o,v={style:OGX.MobileWindow.STYLE_BACK,mode:OGX.MobileWindow.MODE_MOBILE,icons:[],css:"",scroll:!1,drag:!0,dragMinX:100,dragMaxY:30,dragMinY:100,width:"100%",height:"100%",title:"",winhtml:'<div class="ogx_mobile_window ogx_hw $css" style="width:$wpx; height:$hpx;"><div class="ogx_mobile_window_head ogx_mobile_window_head_$style"><span class="ogx_mobile_window_main_$style ogx_mobile_window_main_icon"></span><span class="ogx_mobile_window_title">$title</span><span class="ogx_mobile_window_icons">$icons</span></div><div class="ogx_view"></div></div>',html:""};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.z_index=!1,this.updateSize=function(o,i){},this.updateScroll=function(){return!!I.scroll&&(h.update(),!0)},this.getContainer=function(){return M},this.setContent=function(o){if(I.scroll)if(h.getState()===OGX.MobileScrollContainer.READY){var i=h.getInner();$(i).html(o),h.update()}else h.el.on(OGX.MobileScrollContainer.READY,function(){h.el.off(OGX.MobileScrollContainer.READY),E.setContent(o)})},this.swapIcon=function(o,i){I.icons[o]=i,E.el.find(".ogx_mobile_window_icons").find(".ogx_mobile_window_icon:eq("+String(o)+")").find("img:first").attr("src",i)},this.destroy=function(){I.scroll&&h.destroy(),I.icons.length&&r(!1)},w()},OGX.MobileWindow=function(o){"use strict";return new OGX.prototype.MobileWindow(o)},OGX.MobileWindow.ANIM_LEFT="animLeft",OGX.MobileWindow.ANIM_RIGHT="animRight",OGX.MobileWindow.ANIM_TOP="animTop",OGX.MobileWindow.STYLE_BACK="icon_back",OGX.MobileWindow.STYLE_CLOSE="icon_close",OGX.MobileWindow.STYLE_NONE="none",OGX.MobileWindow.CLOSE="windowClose",OGX.MobileWindow.HIT_ICON="hitIcon",OGX.MobileWindow.MODE_DESKTOP="modeDesktop",OGX.MobileWindow.MODE_MOBILE="modeMobile";