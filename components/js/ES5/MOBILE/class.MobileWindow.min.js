if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileWindow=function(i){"use strict";function n(){var i=d();$(T.container).append(i),E.el=h=$(T.container).find(".ogx_mobile_window:last");var n=h.find(".ogx_view:first"),o=h.height()-n.position().top;n.height(o)}function o(i,n){var o;return n.indexOf("%")!==-1?(o=n.split("%"),o=parseInt(o[0]),o=Math.round(o*$(window)[i]()/100)):(o=n.split("px"),o=parseInt(o[0])),o}function e(i){return i.hasOwnProperty("originalEvent")?i.originalEvent.changedTouches[0]:i}function t(i){i?h.on(_,function(i){i=e(i),G=i.pageX,W=i.pageY,u=0,x=0,h.css("transition","none"),g||(g=h.position().left,p=h.position().top),l(!0),$("body").on(m,function(i){i.preventDefault(),i.stopImmediatePropagation(),i=e(i),u=i.pageX-G,x=i.pageY-W}),$("body").on(M,function(i){if(l(!1),$("body").off(m),$("body").off(M),i=e(i),X=Math.abs(g-u),I=Math.abs(p-x),E.anim===OGX.MobileWindow.ANIM_RIGHT||E.anim===OGX.MobileWindow.ANIM_LEFT){if(I<X)if(E.anim===OGX.MobileWindow.ANIM_RIGHT){if(Math.abs(u)>T.dragMinX)return void T.core.hideWindow(T.name)}else if(E.anim===OGX.MobileWindow.ANIM_LEFT&&g>u)return void T.core.hideWindow(T.name);h.on("transitionend",function(){h.off("transitionend"),h.css("transition","none")}),X&&h.css("transition","all "+Math.round(u*T.win_anim_in_time/h.width())+"ms"),h.css({transform:"translate3D("+g+"px, 0px, 0px)"})}else if(E.anim===OGX.MobileWindow.ANIM_BOTTOM||E.anim===OGX.MobileWindow.ANIM_TOP){if(I>X)if(E.anim===OGX.MobileWindow.ANIM_BOTTOM){if(x>T.dragMinY&&W<i.pageY)return void T.core.hideWindow(T.name)}else if(E.anim===OGX.MobileWindow.ANIM_TOP&&p>x&&Math.abs(x)>T.dragMinY)return void T.core.hideWindow(T.name);h.on("transitionend",function(){h.off("transitionend"),h.css("transition","none")}),I&&h.css("transition","all "+Math.round(x*T.win_anim_in_time/h.height())+"ms"),h.css({transform:"translate3D(0px, "+p+"px, 0px)"})}g=!1})}):h.off(_)}function l(i){i?b=setInterval(a,10):clearInterval(b)}function a(){E.anim===OGX.MobileWindow.ANIM_RIGHT||E.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(p-x)<Math.abs(g-u)&&Math.abs(p-x)<T.dragMaxY&&E.anim&&(E.anim===OGX.MobileWindow.ANIM_RIGHT?g+u+E.el.outerWidth()>$(window).width()&&h.css({transform:"translate3D("+(g+u)+"px, 0px, 0px)"}):E.anim===OGX.MobileWindow.ANIM_LEFT&&g>u&&h.css({transform:"translate3D("+u+"px, 0px, 0px)"})):E.anim!==OGX.MobileWindow.ANIM_BOTTOM&&E.anim!==OGX.MobileWindow.ANIM_TOP||Math.abs(p-x)>Math.abs(g-u)&&E.anim&&(E.anim===OGX.MobileWindow.ANIM_BOTTOM?x>0&&h.css({transform:"translate3D(0px, "+(p+x)+"px, 0px)"}):E.anim===OGX.MobileWindow.ANIM_TOP&&x<0&&h.css({transform:"translate3D(0px, "+x+"px, 0px)"}))}function s(i){i?h.on("click",".ogx_mobile_window_main_icon",function(){T.core.hideWindow(T.name)}):h.off("click",".ogx_mobile_window_main_icon")}function r(i){i?h.on("click",".ogx_mobile_window_icon",function(){h.trigger(OGX.MobileWindow.HIT_ICON,{index:$(this).index()})}):h.off("click",".ogx_mobile_window_icon")}function d(){var i,n=o("width",T.width),e=o("height",T.height),t=T.winhtml;i=new RegExp("\\$w","g"),t=t.replace(i,n),i=new RegExp("\\$h","g"),t=t.replace(i,e),i=new RegExp("\\$style","g"),t=t.replace(i,T.style),i=new RegExp("\\$title","g"),t=t.replace(i,T.title),i=new RegExp("\\$css","g"),t=t.replace(i,T.css);for(var l="",a=0;a<T.icons.length;a++)l+='<span class="ogx_mobile_window_icon"><img src="'+T.icons[a]+'"></span>';return i=new RegExp("\\$icons","g"),t=t.replace(i,l)}function c(){for(var i in v)T.hasOwnProperty(i)||(T[i]=v[i]);switch(T.mode){case OGX.MobileWindow.MODE_MOBILE:_="touchstart",M="touchend",m="touchmove";break;case OGX.MobileWindow.MODE_DESKTOP:_="mousedown",M="mouseup",m="mousemove"}}function w(){if(c(),n(),O=E.el.find(".ogx_view:first"),T.scroll){if("undefined"==typeof OGX.MobileScrollContainer)return void console.log("%c CRITICAL ERROR - OGX.MobileScrollContainer not found! ","background:#222; color: #FF0000");var i=E.el.find(".ogx_view:first");f=new OGX.MobileScrollContainer({container:i[0],initDelay:100,naturalScroll:T.naturalScroll}),i.on(OGX.MobileScrollContainer.READY,function(){i.off(OGX.MobileScrollContainer.READY);var n=f.getOuter(),o=$(window).height();T.style!==OGX.MobileWindow.STYLE_NONE&&(o-=E.el.find(".ogx_mobile_window_head:first").height()),$(n).css("height",o+"px"),O=$(f.getInner())})}T.icons.length>0&&r(!0),T.drag&&t(!0),s(!0)}var _,M,m,f,O,b,h,g,p,u,x,G,W,X,I,E=this,T=i,v={style:OGX.MobileWindow.STYLE_BACK,mode:OGX.MobileWindow.MODE_MOBILE,icons:[],css:"",scroll:!1,naturalScroll:!0,drag:!0,dragMinX:100,dragMaxY:30,dragMinY:100,width:"100%",height:"100%",title:"",winhtml:'<div class="ogx_mobile_window ogx_hw $css" style="width:$wpx; height:$hpx;"><div class="ogx_mobile_window_head ogx_mobile_window_head_$style"><span class="ogx_mobile_window_main_$style ogx_mobile_window_main_icon"></span><span class="ogx_mobile_window_title">$title</span><span class="ogx_mobile_window_icons">$icons</span></div><div class="ogx_view"></div></div>',html:"",win_anim_in_time:350,win_anim_out_time:350};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.z_index=!1,this.updateSize=function(i,n){},this.updateScroll=function(){return!!T.scroll&&(f.update(),!0)},this.getTiming=function(){return{in:T.win_anim_in_time,out:T.win_anim_out_time}},this.getContainer=function(){return O},this.setContent=function(i){if(T.scroll)if(f.getState()===OGX.MobileScrollContainer.READY){var n=f.getInner();$(n).html(i),f.update()}else f.el.on(OGX.MobileScrollContainer.READY,function(){f.el.off(OGX.MobileScrollContainer.READY),E.setContent(i)})},this.swapIcon=function(i,n){T.icons[i]=n,E.el.find(".ogx_mobile_window_icons").find(".ogx_mobile_window_icon:eq("+String(i)+")").find("img:first").attr("src",n)},this.destroy=function(){T.scroll&&f.destroy(),T.icons.length&&r(!1)},w()},OGX.MobileWindow=function(i){"use strict";return new OGX.prototype.MobileWindow(i)},OGX.MobileWindow.ANIM_LEFT="mobileWindowAnimLeft",OGX.MobileWindow.ANIM_RIGHT="mobileWindowAnimRight",OGX.MobileWindow.ANIM_TOP="mobileWindowAnimTop",OGX.MobileWindow.ANIM_BOTTOM="mobileWindowAnimBottom",OGX.MobileWindow.STYLE_BACK="icon_back",OGX.MobileWindow.STYLE_CLOSE="icon_close",OGX.MobileWindow.STYLE_NONE="none",OGX.MobileWindow.CLOSE="mobileWindowClose",OGX.MobileWindow.CLOSED="mobileWindowClosed",OGX.MobileWindow.OPEN="mobileWindowOpen",OGX.MobileWindow.OPENED="mobileWindowOpened",OGX.MobileWindow.HIT_ICON="mobileWindowHitIcon",OGX.MobileWindow.MODE_DESKTOP="modeDesktop",OGX.MobileWindow.MODE_MOBILE="modeMobile";