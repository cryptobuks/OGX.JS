if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileWindow=function(i){"use strict";function n(){var i=c();$(A.container).append(i),T.el=g=$(A.container).find(".ogx_mobile_window:last");var n=g.find(".ogx_view:first"),o=g.height()-n.position().top;n.height(o)}function o(i,n){var o;return n.indexOf("%")!==-1?(o=n.split("%"),o=parseInt(o[0]),o=Math.round(o*$(window)[i]()/100)):(o=n.split("px"),o=parseInt(o[0])),o}function e(i){return i.hasOwnProperty("originalEvent")?i.originalEvent.changedTouches[0]:i}function t(i){i?g.on(M,function(i){i=e(i),W=i.pageX,X=i.pageY,x=0,G=0,g.css("transition","none"),p||(p=g.position().left,u=g.position().top),l(!0),$("body").on(f,function(i){i.preventDefault(),i.stopImmediatePropagation(),i=e(i),x=i.pageX-W,G=i.pageY-X}),$("body").on(m,function(i){if(l(!1),$("body").off(f),$("body").off(m),i=e(i),E=Math.abs(p-x),I=Math.abs(u-G),T.anim===OGX.MobileWindow.ANIM_RIGHT||T.anim===OGX.MobileWindow.ANIM_LEFT){if(I<E)if(T.anim===OGX.MobileWindow.ANIM_RIGHT){if(Math.abs(x)>A.dragMinX)return void A.core.hideWindow(A.name)}else if(T.anim===OGX.MobileWindow.ANIM_LEFT&&p>x)return void A.core.hideWindow(A.name);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),E&&g.css("transition","all "+Math.round(x*A.win_anim_in_time/g.width())+"ms"),g.css({transform:"translate3D("+p+"px, 0px, 0px)"})}else if(T.anim===OGX.MobileWindow.ANIM_BOTTOM||T.anim===OGX.MobileWindow.ANIM_TOP){if(I>E)if(T.anim===OGX.MobileWindow.ANIM_BOTTOM){if(G>A.dragMinY&&X<i.pageY)return void A.core.hideWindow(A.name)}else if(T.anim===OGX.MobileWindow.ANIM_TOP&&u>G&&Math.abs(G)>A.dragMinY)return void A.core.hideWindow(A.name);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),I&&g.css("transition","all "+Math.round(G*A.win_anim_in_time/g.height())+"ms"),g.css({transform:"translate3D(0px, "+u+"px, 0px)"})}p=!1})}):g.off(M)}function l(i){i?O||(O=setInterval(a,10)):O&&clearInterval(O)}function a(){T.anim===OGX.MobileWindow.ANIM_RIGHT||T.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(u-G)<Math.abs(p-x)&&Math.abs(u-G)<A.dragMaxY&&T.anim&&(T.anim===OGX.MobileWindow.ANIM_RIGHT?p+x+T.el.outerWidth()>$(window).width()&&g.css({transform:"translate3D("+(p+x)+"px, 0px, 0px)"}):T.anim===OGX.MobileWindow.ANIM_LEFT&&p>x&&g.css({transform:"translate3D("+x+"px, 0px, 0px)"})):T.anim!==OGX.MobileWindow.ANIM_BOTTOM&&T.anim!==OGX.MobileWindow.ANIM_TOP||Math.abs(u-G)>Math.abs(p-x)&&T.anim&&(T.anim===OGX.MobileWindow.ANIM_BOTTOM?G>0&&g.css({transform:"translate3D(0px, "+(u+G)+"px, 0px)"}):T.anim===OGX.MobileWindow.ANIM_TOP&&G<0&&g.css({transform:"translate3D(0px, "+G+"px, 0px)"}))}function s(i){i?g.on("click",".ogx_mobile_window_main_icon",function(){A.core.hideWindow(A.name)}):g.off("click",".ogx_mobile_window_main_icon")}function d(i){i?g.on("click",".ogx_mobile_window_icon",function(){g.trigger(OGX.MobileWindow.HIT_ICON,{index:$(this).index()})}):g.off("click",".ogx_mobile_window_icon")}function r(i){i?window.addEventListener("resize",T.update):window.removeEventListener("resize",T.update)}function c(){var i,n=o("width",A.width),e=o("height",A.height),t=A.winhtml;i=new RegExp("\\$w","g"),t=t.replace(i,n),i=new RegExp("\\$h","g"),t=t.replace(i,e),i=new RegExp("\\$style","g"),t=t.replace(i,A.style),i=new RegExp("\\$title","g"),t=t.replace(i,A.title),i=new RegExp("\\$css","g"),t=t.replace(i,A.css);for(var l="",a=0;a<A.icons.length;a++)l+='<span class="ogx_mobile_window_icon" style="background-image:url(\''+A.icons[a]+"')\"></span>";return i=new RegExp("\\$icons","g"),t=t.replace(i,l)}function w(){for(var i in N)A.hasOwnProperty(i)||(A[i]=N[i]);switch(A.mode){case OGX.MobileWindow.MODE_MOBILE:M="touchstart",m="touchend",f="touchmove";break;case OGX.MobileWindow.MODE_DESKTOP:M="mousedown",m="mouseup",f="mousemove"}}function _(){if(w(),n(),b=T.el.find(".ogx_view:first"),A.scroll){if("undefined"==typeof OGX.MobileScrollContainer)return void console.log("%c CRITICAL ERROR - OGX.MobileScrollContainer not found! ","background:#222; color: #FF0000");v=T.el.find(".ogx_view:first"),h=new OGX.MobileScrollContainer({container:v[0],initDelay:100,naturalScroll:A.naturalScroll}),v.on(OGX.MobileScrollContainer.READY,function(){v.off(OGX.MobileScrollContainer.READY);var i=h.getOuter(),n=$(window).height();A.style!==OGX.MobileWindow.STYLE_NONE&&(n-=T.el.find(".ogx_mobile_window_head:first").height()),$(i).css("height",n+"px"),b=$(h.getInner())})}A.icons.length>0&&d(!0),A.drag&&t(!0),s(!0),r(!0)}var M,m,f,h,b,O,g,p,u,x,G,W,X,E,I,v,T=this,A=i,N={style:OGX.MobileWindow.STYLE_BACK,mode:OGX.MobileWindow.MODE_MOBILE,icons:[],css:"",scroll:!1,naturalScroll:!0,drag:!0,dragMinX:100,dragMaxY:30,dragMinY:100,width:"100%",height:"100%",title:"",winhtml:'<div class="ogx_mobile_window ogx_hw $css" style="width:$wpx; height:$hpx;"><div class="ogx_mobile_window_head ogx_mobile_window_head_$style"><span class="ogx_mobile_window_main_$style ogx_mobile_window_main_icon"></span><span class="ogx_mobile_window_title">$title</span><span class="ogx_mobile_window_icons">$icons</span></div><div class="ogx_view"></div></div>',html:"",win_anim_in_time:350,win_anim_out_time:350};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.status=OGX.MobileWindow.CLOSED,this.z_index=!1,this.update=function(){var i=o("width",A.width),n=o("height",A.height);g.css("width",i).css("height",n);var e=g.find(".ogx_view:first");n=g.height()-e.position().top,e.height(n),A.scroll&&h.update()},this.updateScroll=function(){return!!A.scroll&&(h.update(),!0)},this.getTiming=function(){return{in:A.win_anim_in_time,out:A.win_anim_out_time}},this.getContainer=function(){return b},this.setContent=function(i){if(A.scroll)if(h.getState()===OGX.MobileScrollContainer.READY){var n=h.getInner();$(n).html(i),h.update()}else h.el.on(OGX.MobileScrollContainer.READY,function(){h.el.off(OGX.MobileScrollContainer.READY),T.setContent(i)})},this.swapIcon=function(i,n){A.icons[i]=n,T.el.find(".ogx_mobile_window_icons").find(".ogx_mobile_window_icon:eq("+String(i)+")").css("background-image",n)},this.destroy=function(){v&&v.off(OGX.MobileScrollContainer.READY),A.scroll&&h.destroy(),A.icons.length&&d(!1),r(!1),A.drag&&t(!1),s(!1),l(!1)},_()},OGX.MobileWindow=function(i){"use strict";return new OGX.prototype.MobileWindow(i)},OGX.MobileWindow.ANIM_LEFT="mobileWindowAnimLeft",OGX.MobileWindow.ANIM_RIGHT="mobileWindowAnimRight",OGX.MobileWindow.ANIM_TOP="mobileWindowAnimTop",OGX.MobileWindow.ANIM_BOTTOM="mobileWindowAnimBottom",OGX.MobileWindow.STYLE_BACK="icon_back",OGX.MobileWindow.STYLE_CLOSE="icon_close",OGX.MobileWindow.STYLE_NONE="none",OGX.MobileWindow.CLOSE="mobileWindowClose",OGX.MobileWindow.CLOSED="mobileWindowClosed",OGX.MobileWindow.OPEN="mobileWindowOpen",OGX.MobileWindow.OPENED="mobileWindowOpened",OGX.MobileWindow.HIT_ICON="mobileWindowHitIcon",OGX.MobileWindow.MODE_DESKTOP="modeDesktop",OGX.MobileWindow.MODE_MOBILE="modeMobile";