if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileWindow=function(i){"use strict";function n(){var i=c();$(T.container).append(i),v.el=g=$(T.container).find(".ogx_mobile_window:last");var n=g.find(".ogx_view:first"),o=g.height()-n.position().top;n.height(o)}function o(i,n){var o;return n.indexOf("%")!==-1?(o=n.split("%"),o=parseInt(o[0]),o=Math.round(o*$(window)[i]()/100)):(o=n.split("px"),o=parseInt(o[0])),o}function e(i){return i.hasOwnProperty("originalEvent")?i.originalEvent.changedTouches[0]:i}function t(i){i?g.on(M,function(i){i=e(i),W=i.pageX,X=i.pageY,x=0,G=0,g.css("transition","none"),p||(p=g.position().left,u=g.position().top),l(!0),$("body").on(m,function(i){i.preventDefault(),i.stopImmediatePropagation(),i=e(i),x=i.pageX-W,G=i.pageY-X}),$("body").on(f,function(i){if(l(!1),$("body").off(m),$("body").off(f),i=e(i),E=Math.abs(p-x),I=Math.abs(u-G),v.anim===OGX.MobileWindow.ANIM_RIGHT||v.anim===OGX.MobileWindow.ANIM_LEFT){if(I<E)if(v.anim===OGX.MobileWindow.ANIM_RIGHT){if(Math.abs(x)>T.dragMinX)return void T.core.hideWindow(T.name)}else if(v.anim===OGX.MobileWindow.ANIM_LEFT&&p>x)return void T.core.hideWindow(T.name);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),E&&g.css("transition","all "+Math.round(x*T.win_anim_in_time/g.width())+"ms"),g.css({transform:"translate3D("+p+"px, 0px, 0px)"})}else if(v.anim===OGX.MobileWindow.ANIM_BOTTOM||v.anim===OGX.MobileWindow.ANIM_TOP){if(I>E)if(v.anim===OGX.MobileWindow.ANIM_BOTTOM){if(G>T.dragMinY&&X<i.pageY)return void T.core.hideWindow(T.name)}else if(v.anim===OGX.MobileWindow.ANIM_TOP&&u>G&&Math.abs(G)>T.dragMinY)return void T.core.hideWindow(T.name);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),I&&g.css("transition","all "+Math.round(G*T.win_anim_in_time/g.height())+"ms"),g.css({transform:"translate3D(0px, "+u+"px, 0px)"})}p=!1})}):g.off(M)}function l(i){i?b||(b=setInterval(a,10)):b&&clearInterval(b)}function a(){v.anim===OGX.MobileWindow.ANIM_RIGHT||v.anim===OGX.MobileWindow.ANIM_LEFT?Math.abs(u-G)<Math.abs(p-x)&&Math.abs(u-G)<T.dragMaxY&&v.anim&&(v.anim===OGX.MobileWindow.ANIM_RIGHT?p+x+v.el.outerWidth()>$(window).width()&&g.css({transform:"translate3D("+(p+x)+"px, 0px, 0px)"}):v.anim===OGX.MobileWindow.ANIM_LEFT&&p>x&&g.css({transform:"translate3D("+x+"px, 0px, 0px)"})):v.anim!==OGX.MobileWindow.ANIM_BOTTOM&&v.anim!==OGX.MobileWindow.ANIM_TOP||Math.abs(u-G)>Math.abs(p-x)&&v.anim&&(v.anim===OGX.MobileWindow.ANIM_BOTTOM?G>0&&g.css({transform:"translate3D(0px, "+(u+G)+"px, 0px)"}):v.anim===OGX.MobileWindow.ANIM_TOP&&G<0&&g.css({transform:"translate3D(0px, "+G+"px, 0px)"}))}function s(i){i?g.on("click",".ogx_mobile_window_main_icon",function(){T.core.hideWindow(T.name)}):g.off("click",".ogx_mobile_window_main_icon")}function r(i){i?g.on("click",".ogx_mobile_window_icon",function(){g.trigger(OGX.MobileWindow.HIT_ICON,{index:$(this).index()})}):g.off("click",".ogx_mobile_window_icon")}function d(i){i?window.addEventListener("resize",v.update):window.removeEventListener("resize",v.update)}function c(){var i,n=o("width",T.width),e=o("height",T.height),t=T.winhtml;i=new RegExp("\\$w","g"),t=t.replace(i,n),i=new RegExp("\\$h","g"),t=t.replace(i,e),i=new RegExp("\\$style","g"),t=t.replace(i,T.style),i=new RegExp("\\$title","g"),t=t.replace(i,T.title),i=new RegExp("\\$css","g"),t=t.replace(i,T.css);for(var l="",a=0;a<T.icons.length;a++)l+='<span class="ogx_mobile_window_icon"><img src="'+T.icons[a]+'"></span>';return i=new RegExp("\\$icons","g"),t=t.replace(i,l)}function w(){for(var i in A)T.hasOwnProperty(i)||(T[i]=A[i]);switch(T.mode){case OGX.MobileWindow.MODE_MOBILE:M="touchstart",f="touchend",m="touchmove";break;case OGX.MobileWindow.MODE_DESKTOP:M="mousedown",f="mouseup",m="mousemove"}}function _(){if(w(),n(),O=v.el.find(".ogx_view:first"),T.scroll){if("undefined"==typeof OGX.MobileScrollContainer)return void console.log("%c CRITICAL ERROR - OGX.MobileScrollContainer not found! ","background:#222; color: #FF0000");var i=v.el.find(".ogx_view:first");h=new OGX.MobileScrollContainer({container:i[0],initDelay:100,naturalScroll:T.naturalScroll}),i.on(OGX.MobileScrollContainer.READY,function(){i.off(OGX.MobileScrollContainer.READY);var n=h.getOuter(),o=$(window).height();T.style!==OGX.MobileWindow.STYLE_NONE&&(o-=v.el.find(".ogx_mobile_window_head:first").height()),$(n).css("height",o+"px"),O=$(h.getInner())})}T.icons.length>0&&r(!0),T.drag&&t(!0),s(!0),d(!0)}var M,f,m,h,O,b,g,p,u,x,G,W,X,E,I,v=this,T=i,A={style:OGX.MobileWindow.STYLE_BACK,mode:OGX.MobileWindow.MODE_MOBILE,icons:[],css:"",scroll:!1,naturalScroll:!0,drag:!0,dragMinX:100,dragMaxY:30,dragMinY:100,width:"100%",height:"100%",title:"",winhtml:'<div class="ogx_mobile_window ogx_hw $css" style="width:$wpx; height:$hpx;"><div class="ogx_mobile_window_head ogx_mobile_window_head_$style"><span class="ogx_mobile_window_main_$style ogx_mobile_window_main_icon"></span><span class="ogx_mobile_window_title">$title</span><span class="ogx_mobile_window_icons">$icons</span></div><div class="ogx_view"></div></div>',html:"",win_anim_in_time:350,win_anim_out_time:350};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.status=OGX.MobileWindow.CLOSED,this.z_index=!1,this.update=function(){var i=o("width",T.width),n=o("height",T.height);g.css("width",i).css("height",n);var e=g.find(".ogx_view:first");n=g.height()-e.position().top,e.height(n),T.scroll&&h.update()},this.updateScroll=function(){return!!T.scroll&&(h.update(),!0)},this.getTiming=function(){return{in:T.win_anim_in_time,out:T.win_anim_out_time}},this.getContainer=function(){return O},this.setContent=function(i){if(T.scroll)if(h.getState()===OGX.MobileScrollContainer.READY){var n=h.getInner();$(n).html(i),h.update()}else h.el.on(OGX.MobileScrollContainer.READY,function(){h.el.off(OGX.MobileScrollContainer.READY),v.setContent(i)})},this.swapIcon=function(i,n){T.icons[i]=n,v.el.find(".ogx_mobile_window_icons").find(".ogx_mobile_window_icon:eq("+String(i)+")").find("img:first").attr("src",n)},this.destroy=function(){T.scroll&&h.destroy(),T.icons.length&&r(!1),d(!1),T.drag&&t(!1),s(!1),l(!1),view.off(OGX.MobileScrollContainer.READY)},_()},OGX.MobileWindow=function(i){"use strict";return new OGX.prototype.MobileWindow(i)},OGX.MobileWindow.ANIM_LEFT="mobileWindowAnimLeft",OGX.MobileWindow.ANIM_RIGHT="mobileWindowAnimRight",OGX.MobileWindow.ANIM_TOP="mobileWindowAnimTop",OGX.MobileWindow.ANIM_BOTTOM="mobileWindowAnimBottom",OGX.MobileWindow.STYLE_BACK="icon_back",OGX.MobileWindow.STYLE_CLOSE="icon_close",OGX.MobileWindow.STYLE_NONE="none",OGX.MobileWindow.CLOSE="mobileWindowClose",OGX.MobileWindow.CLOSED="mobileWindowClosed",OGX.MobileWindow.OPEN="mobileWindowOpen",OGX.MobileWindow.OPENED="mobileWindowOpened",OGX.MobileWindow.HIT_ICON="mobileWindowHitIcon",OGX.MobileWindow.MODE_DESKTOP="modeDesktop",OGX.MobileWindow.MODE_MOBILE="modeMobile";