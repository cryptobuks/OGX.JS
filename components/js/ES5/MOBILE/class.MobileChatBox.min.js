if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileChatBox=function(e){"use strict";function o(){m.empty();for(var e=0;e<d.messages.length;e++)t(d.messages[e])}function t(e){var o=i(e),t=l(e,o);m.append(t),setTimeout(function(){m.find('.ogx_mobile_chat_box_message[data-user="'+e.user+'"]:last').addClass("ogx_mobile_chat_box_message_anim")},100)}function s(e){u[e]=!0;var o='<div class="ogx_mobile_chat_box_typing" data-user="'+e+'"><span class="ogx_mobile_chat_box_typing_body">.</div></div>';m.append(o),_(!0)}function a(e){u[e]=!1,m.find('.ogx_mobile_chat_box_typing[data-user="'+e+'"]').remove(),0===m.find(".ogx_mobile_chat_box_typing").length&&_(!1)}function _(e){e?b||(b=setInterval(n,d.dot_speed)):(clearInterval(b),b=null)}function n(){f+=".",f.length>3?f=".":null,m.find(".ogx_mobile_chat_box_typing_body").html(f)}function i(e){return e.user.toString()===d.users.current?d.template_right:d.template_left}function l(e,o){var t=o;for(var s in e)reg=new RegExp("\\$"+s,"g"),t=t.replace(reg,e[s]);return t}function r(){var e=$(window).height(),o='<div class="ogx_mobile_chat_box_composer" style="top:'+e+'px;"><span class="ogx_mobile_chat_box_composer_input"><textarea placeholder="'+d.placeholder+'">';o+='</textarea></span><span class="ogx_mobile_chat_box_composer_send"></span></div>',m.prepend(o),e=m.find(".ogx_mobile_chat_box_composer:first").height(),console.log("composer h",e),m.find(".ogx_mobile_chat_box_composer:first").css("transform","translateY("+-e+"px)")}function c(){for(var e in d.users)u[e]=!1}function g(){for(var e in h)d.hasOwnProperty(e)||(d[e]=h[e]);x.el=m=$(d.container),m.addClass("ogx_mobile_chat_box")}function p(){g(),r(),c(),o()}var m,b,x=this,d=e,h={placeholder:"Type a message",dot_speed:600,messages:[],mode:OGX.MobileChatBox.MODE_DESKTOP,template_left:'<div class="ogx_mobile_chat_box_message ogx_mobile_chat_box_message_left" data-user="$user"><span class="ogx_mobile_chat_box_message_icon"><span>M</span></span><span class="ogx_mobile_chat_box_message_body">$msg</span></div>',template_right:'<div class="ogx_mobile_chat_box_message ogx_mobile_chat_box_message_right" data-user="$user"><span class="ogx_mobile_chat_box_message_body">$msg</span></div>'},u={},f=".";this.el=null,this.addMessage=function(e){t(e)},this.userTyping=function(e,o){e&&!u[o]?s(o):!e&&u[o]&&a(o)},p()},OGX.MobileChatBox=function(e){"use strict";return new OGX.prototype.MobileChatBox(e)},OGX.MobileChatBox.MODE_DESKTOP="desktop",OGX.MobileChatBox.MODE_MOBILE="mobile";