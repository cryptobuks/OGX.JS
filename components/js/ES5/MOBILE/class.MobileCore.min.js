if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.MobileCore=function(e){"use strict";function o(e){e?b[_].overlay.el.on("click",function(e){b[_].stage.el.trigger(OGX.MobileCore.OVERLAY_REMOVE),g.removeOverlay()}):b[_].overlay.el.off("click")}function i(e){s(!1,e);for(var o in b[_].windows[e].views)o.view.destroy(),o.view.el.empty();b[_].windows[e].views={},b[_].windows[e].el.remove(),b[_].windows[e].destroy(),delete b[_].windows[e]}function n(e,o,i,n,s,l){var r={opac:1,tX:0,tY:0},d=$(window).width(),w=$(window).height(),c=b[_].windows[e],f=c.el.find(".ogx_mobile_window_main_icon:first");switch(n&&(c.el.css("display","block"),t(e,o,!0)),n?(f.removeClass("ogx_mobile_window_main_icon_left ogx_mobile_window_main_icon_right ogx_mobile_window_main_icon_top"),c.el.addClass("ogx_mobile_window_anim_in")):c.el.addClass("ogx_mobile_window_anim_out"),o){case OGX.MobileWindow.ANIM_NONE:n||(r.opac=0);break;case OGX.MobileWindow.ANIM_TOP:n?(r.tY=0,f.addClass("ogx_mobile_window_main_icon_top")):(r.tY=w,r.opac=0,console.log("hide window to ",w));break;case OGX.MobileWindow.ANIM_RIGHT:n?(r.tX=0,f.addClass("ogx_mobile_window_main_icon_right")):(r.opac=0,r.tX=d);break;case OGX.MobileWindow.ANIM_LEFT:n?(r.tX=0,f.addClass("ogx_mobile_window_main_icon_left")):(r.opac=0,r.tX=-d)}"undefined"!=typeof i&&(i.hasOwnProperty("left")&&(r.tX=d-a("width",i.left)),i.hasOwnProperty("top")&&(r.tY=a("height",i.top)),i.hasOwnProperty("right")&&(r.tX=a("width",i.right)));var v=250;n||(v=0),setTimeout(function(){c.el.css({transform:"translate3D("+r.tX+"px, "+r.tY+"px, 0px)"}).css("opacity",1),c.el.on("transitionend",function(){c.el.off("transitionend"),n?c.el.removeClass("ogx_mobile_window_anim_in"):c.el.removeClass("ogx_mobile_window_anim_out"),n||t(e,o,!1),"undefined"!=typeof s&&s&&("undefined"!=typeof l&&l?s.apply(g,[l]):s())})},v)}function t(e,o,i){var n=$(window).width(),t=$(window).height(),s=b[_].windows[e];if(i){switch(o){case OGX.MobileWindow.ANIM_NONE:i&&s.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.MobileWindow.ANIM_TOP:i&&s.el.css({transform:"translate3D(0px, "+t+"px, 0px)"});break;case OGX.MobileWindow.ANIM_RIGHT:i&&s.el.css({transform:"translate3D("+n+"px, 0px, 0px)"});break;case OGX.MobileWindow.ANIM_LEFT:i&&s.el.css({transform:"translate3D("+-n+"px, 0px, 0px)"})}s.el.css("visibility","visible"),s.el.position()}else s.el.css("visibility","hidden"),s.el.css({transform:"translate3D("+-n+"px, 0px, 0px)"})}function s(e,o){e?b[_].windows[o].el.on("click",".ogx_mobile_window_back",function(e){g.hideWindow(o)}):b[_].windows[o].el.off("click",".ogx_mobile_window_back")}function a(e,o){var i;return o.indexOf("%")!==-1?(i=o.split("%"),i=parseInt(i[0]),i=Math.round(i*$(window)[e]()/100)):(i=o.split("px"),i=parseInt(i[0])),i}function l(e,o){$("body").append('<div class="ogx_mobile_stage ogx_hw"></div>'),o.container=$("body").find(".ogx_mobile_stage:last")[0];var i=function(){};i.prototype.MobileBaseStage=OGX.prototype.MobileBaseStage,i.prototype[e]=OGX.prototype[e];var n=new i;return n.MobileBaseStage(o),n[e](),n}function r(e,o){var i=function(){};i.prototype.MobileBaseView=OGX.prototype.MobileBaseView,i.prototype[e]=OGX.prototype[e];var n=new i;return n.MobileBaseView(o),n[e](),console.log("CREATE VIEW",e),setTimeout(function(){console.log("INIT VIEW",e),n.constructor(),n.ux(!0)},50),n}function d(){$(document).on("backbutton",function(e){e.preventDefault(),b[_].over.length>0||($(g.config.container).trigger(OGX.MobileCore.NAV_BACK),navigator.app.backHistory())}),$(window).on("popstate",function(e){console.log("popstate",e.originalEvent.state),null!==e.originalEvent.state||(console.log("exit app"),v.autoExit?navigator.app.exitApp():$(v.container).trigger(OGX.MobileCore.APP_EXIT))})}function w(e){for(var o=0;o<e.length;o++)if(v.scopes.indexOf(e[o])!==-1)return!0;return!1}function c(){for(var e in p)v.hasOwnProperty(e)||(v[e]=p[e]);g.el=$(document)}function f(){c(),d()}var g=this,v=e,p={path:"/",scopes:["public"],auto_exit:!1,views:{}},_=!1,u=!1,b={},y=!1,h=new OGX.ResponsiveGraphics;this.el=null,this.trigger=function(e,o){g.el.trigger(e,o)},this.bindGfx=function(e,o){h.bind(e,o)},this.unbindGfx=function(e){h.unbind(e)},this.showStageNav=function(){y||(y=new OGX.MobileStageNavigator({}))},this.addStage=function(e,o,i,n){if(b.hasOwnProperty(e))return!1;var t=l(o,i);if(b[e]={stage:t,windows:{},views:{},overlay:null,snooze:!1},_=e,t.constructor(),t.ux(!0),"undefined"==typeof n)var n=!0;n&&g.showStage(e)},this.removeStage=function(e){},this.useStage=function(e){_=e},this.snoozeStage=function(e){if(!b[e].snooze){b[e].snooze=!0;for(var o in b[e].stage.views)b[e].stage.views[o].blur();b[e].stage.el=b[e].stage.el.detach()}},this.wakeStage=function(e){if(b[e].snooze){b[e].snooze=!0;for(var o in b[e].stage.views)b[e].stage.views[o].blur();b[u].stage.el.appendTo("body"),b[e].stage.el=$("body").find(".ogx_mobile_stage:last")}},this.showStage=function(e,o){if(console.log("show stage ",e,o),"undefined"==typeof o)var o=!1;if(o){var i=$(window).height();switch(o){case OGX.MobileStage.ANIM_SWAP:b[u].stage.el.on("transitionend",function(){b[u].stage.el.off("transitionend"),b[u].stage.el.css("top",-i+"px"),b[e].stage.el.css("top","0px"),b[e].stage.el.on("transitionend",function(){b[e].stage.el.off("transitionend"),b[e].stage.el.css("transform","scale(1)"),b[u].stage.el.removeClass("ogx_mobile_stage_anim"),b[u].stage.el.css("display","none"),u=e,g.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:u,new:e})})}),b[e].stage.el.addClass("ogx_mobile_stage_anim"),b[u].stage.el.addClass("ogx_mobile_stage_anim"),b[u].stage.el.css("transform","scale(0.9)"),b[e].stage.el.css("top",i+"px"),b[e].stage.el.css("display","block"),b[e].stage.el.css("transform","scale(0.9)"),b[e].stage.el.addClass("ogx_mobile_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:b[e].stage.el.appendTo("body"),b[e].stage.el.addClass("ogx_mobile_stage_anim_swap"),b[u].stage.el.addClass("ogx_mobile_stage_anim"),b[u].stage.el.addClass("ogx_mobile_stage_anim_flip")}}else u&&b[u].stage.el.css("display","none"),b[e].stage.el.css("display","block"),u=e},this.addToStage=function(e,o,i,n){var t;if("undefined"==typeof i)var i={};if("undefined"==typeof n)var n=!0;var s=w(OGX[o].scopes);s||console.log("bad scope for that view");var a;i.container=b[_].stage.el.find(e)[0],g.removeFromStage(e);var t=r(o,i);b[_].views[e]={view:t,name:o},a={name:o,config:JSON.stringify(i),stage:_},n&&history.pushState(a,"index.html")},this.removeFromStage=function(e){b[_].views.hasOwnProperty(e)&&(console.log("kKILL VIEW IN ",e),b[_].views[e].view.destroy(),delete b[_].views[e],b[_].stage.el.find(e).empty())},this.windowExists=function(e){return b[_].windows.hasOwnProperty(e)},this.getWindow=function(e){return!!g.windowExists(e)&&b[_].windows[e]},this.addWindow=function(e,o,i){if(g.windowExists(e))return!1;if("undefined"==typeof o)var o={};o.container=b[_].stage.el[0],o.name=e,o.core=this;var n=new OGX.MobileWindow(o);return n.snooze=!1,b[_].windows[e]=n,"undefined"!=typeof i&&g.showWindow(e,i),n},this.showWindow=function(e,o,i){var t=b[_].windows[e];t.anim=o,n(e,o,i,!0),s(!0,e)},this.hideWindow=function(e,o,i,t){if(!g.windowExists(e))return!1;if("undefined"==typeof i){var i=OGX.MobileWindow.ANIM_NONE;b[_].windows[e].anim&&(i=b[_].windows[e].anim)}s(!1,e),n(e,i,t,!1,o,e),b[_].stage.el.trigger(OGX.MobileWindow.CLOSE,e),b[_].stage.el.trigger(OGX.MobileWindow.CLOSE_+e,e)},this.snoozeWindow=function(e){if(!b[_].windows[e].snooze){b[_].windows[e].snooze=!0;for(var o in b[_].windows[e].views)b[_].windows[e].views[o].blur();b[_].windows[e].el=b[_].windows[e].el.detach()}},this.wakeWindow=function(e){if(b[_].windows[e].snooze){b[_].windows[e].snooze=!1;for(var o in b[_].windows[e].views)b[_].windows[e].views[o].focus();b[_].windows[e].el=b[_].windows[e].el.detach(),b[_].windows[e].el.appendTo(b[_].stage.el),b[_].windows[e].el=b[_].stage.el.find(".ogx_mobile_window:last")}},this.removeWindow=function(e,o){return!!g.windowExists(e)&&(i(e),!0)},this.addToWindow=function(e,o,i,n){if("undefined"==typeof n)var n=".ogx_view:first";i.container=b[_].windows[e].el.find(n),b[_].windows[e].snooze&&g.wakeWindow(e);var t=r(o,i);b[_].windows[e].views[n]=t},this.removeFromWindow=function(e,o){return!!b[_].windows[e].views.hasOwnProperty(o)&&(b[_].windows[e].views[o].view.destroy(),delete b[_].windows[e].views[o],!0)},this.addOverlay=function(e,i){if(b[_].overlay)b[_].stage.el.off("transitionend");else{var n='<div class="ogx_overlay" style="height:'+$(window).height()+'px;"></div>';b[_].stage.el.prepend(n),b[_].overlay={el:b[_].stage.el.find(".ogx_overlay:first")},e&&o(!0)}switch(i){case OGX.MobileCore.OVERLAY_FADE:setTimeout(function(){b[_].overlay.el.removeClass("ogx_overlay_fade_out"),b[_].overlay.el.addClass("ogx_overlay_fade_in")},100);break;default:b[_].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){if(b[_].overlay)if(o(!1),"undefined"!=typeof e)switch(e){case OGX.MobileCore.OVERLAY_FADE:b[_].overlay.el.removeClass("ogx_overlay_fade_in"),b[_].overlay.el.addClass("ogx_overlay_fade_out"),b[_].overlay.el.on("transitionend",function(){b[_].overlay&&(b[_].overlay.el.off("transitionend"),b[_].overlay.el.remove(),b[_].overlay=null)})}else b[_].overlay.el.remove(),b[_].overlay=null},this.getOverlay=function(){return!!b[_].overlay&&b[_].overlay.el},this.getView=function(e,o){return b[e].views[o].view},f()},OGX.MobileCore=function(e){"use strict";return new OGX.prototype.MobileCore(e)},OGX.MobileCore.OVERLAY_FADE="overlayFade",OGX.MobileCore.OVERLAY_REMOVE="overlayRemove",OGX.MobileCore.NAV_BACK="navBack",OGX.MobileCore.APP_EXIT="appExit";