if(typeof OGX==="undefined"){var OGX=function(){}}OGX.prototype.StackedTree=function(e){var t=this;var a={scopes:["public"],speed:200};var s=e;var r,i,n,c;var l;this.el=null;this.refresh=function(){l=r.innerWidth();_(c)};this.setScopes=function(e){s.scopes=e;_([0])};this.setPath=function(e){c=e;_(c)};this.destroy=function(){o(false)};function o(e){if(e){r.on("click",".ogx_stacked_tree_item",function(e){var t=$(this).data("path").split("_");var a=d(t);n=a.label;var s=_(t);if(s){r.trigger(OGX.StackedTree.CHANGE,a)}else{r.trigger(OGX.StackedTree.SELECT,a)}});r.on("click",".ogx_stacked_tree_back",function(e){var t=$(this).data("path").split("_");var a=d(t);h(parseInt($(this).data("lv")));r.trigger(OGX.StackedTree.CHANGE,a)})}else{r.off("click",".ogx_stacked_tree_item")}}function d(e){var t=s.data;var a=e.slice();a.shift();while(a.length>0){if(t.hasOwnProperty("items")){t=t.items[a[0]]}a.shift()}return t}function f(e){if(e.length===1){return 0}return e.length-1}function _(e){var t,a;if(e.length===1){t=s.data}else{t=d(e)}c=e;var r=f(e);if(t&&t.hasOwnProperty("items")){if(i.find(".ogx_stacked_tree_level"+r+":first").length===0){i.append('<div class="ogx_stacked_tree_level ogx_stacked_tree_level'+r+'" data-lv="'+r+'"></div>')}a=i.find(".ogx_stacked_tree_level"+r+":first");a.empty();a.css("left",r*l+"px");var o="<ul>";var _,u;var v=e.slice();v=v.join("_");if(r>0){o+='<li data-path="'+v+'" data-lv="'+(r-1)+'" class="ogx_stacked_tree_back"><span class="ogx_stacked_tree_item_label">'+n+"</span></li>"}for(var g=0;g<t.items.length;g++){if(p(t.items[g])){_="";if(!t.items[g].hasOwnProperty("items")||t.items[g].hasOwnProperty("items")&&t.items[g].length===0){_=" ogx_stacked_tree_end"}u=v+"_"+g;o+='<li data-path="'+u+'" class="ogx_stacked_tree_item'+_+'"><span class="ogx_stacked_tree_item_label">'+t.items[g].label+"</span></li>"}}o+="</ul>";a.html(o);h(r);return true}return false}function h(e){i.off("transitionend");i.css("transition","all ."+s.speed/100+"s");i.css("transform","translateX("+e*l*-1+"px)")}function p(e){if(e.hasOwnProperty("scopes")){for(var t=0;t<e.scopes.length;t++){if(s.scopes.indexOf(e.scopes[t])!==-1){return true}}}return false}function u(){r=$(s.container);r.addClass("ogx_stacked_tree");r.html('<div class="ogx_stacked_tree_container"></div>');i=r.find(".ogx_stacked_tree_container:first");t.el=r;l=r.innerWidth();console.log("stacked tree width",l)}function v(){for(var e in a){if(!s.hasOwnProperty(e)){s[e]=a[e]}}var t=s.data.slice();s.data={items:t}}function g(){v();u();_([0]);o(true)}g()};OGX.StackedTree=function(e){return new OGX.prototype.StackedTree(e)};OGX.StackedTree.CHANGE="change";OGX.StackedTree.SELECT="select";