if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.CalendarDayRenderer=function(e){"use strict";function r(e,r,a){for(var n,d=0;d<y[e][r].length;d++)if(n=y[e][r][d],n._id===a)return n;return!1}function a(e,r){var a={},n=u.max_hour-u.min_hour+1,d=e.height(),t=d/n,o=100*t/d,_=r.start.split(":"),l=Number(_[0])+Number(_[1])/60-u.min_hour;return a.h_pc=Math.round(o*(r.length/60)*100)/100,a.h=Math.round(t*(r.length/60)*100)/100,a.y_pc=Math.round(l*o*100)/100,a.y=Math.round(l*t*100)/100,a}function n(e,r){return Math.max(e.top,r.top)<Math.min(e.bottom,r.bottom)}function d(e,r,d,t){var o,_,l,i,c,s=a(e,r),u=e.children(".ogx_calendar_day_renderer_column").length,h=!1;if(0===u)e.html('<div class="ogx_calendar_day_renderer_column"></div>'),h=e.children(".ogx_calendar_day_renderer_column:first");else{for(var m=0;m<u;m++){if(c=!1,o=e.children(".ogx_calendar_day_renderer_column:eq("+m+")").children(".ogx_calendar_day_renderer_apt").length,o>0){for(var y=0;y<o;y++)if(_=e.children(".ogx_calendar_day_renderer_column:eq("+m+")").children(".ogx_calendar_day_renderer_apt:eq("+y+")"),l=_.position().top,i=_.height(),n({top:s.y,bottom:s.y+s.h},{top:l,bottom:l+i})){c=!0;break}if(!c){h=e.children(".ogx_calendar_day_renderer_column:eq("+m+")");break}}if(h)break}h||(e.append('<div class="ogx_calendar_day_renderer_column"></div>'),h=e.children(".ogx_calendar_day_renderer_column:last"))}h.append('<div class="ogx_calendar_day_renderer_apt" style="height:'+s.h_pc+"%; top:"+s.y_pc+"%; background-color:"+t[r.type].color+'" data-id="'+r._id+'" data-time="'+r.start+'" data-date="'+d+'"><div class="ogx_calendar_day_renderer_apt_info"><span class="ogx_calendar_day_renderer_apt_time">'+r.start+'</span><span class="ogx_calendar_day_renderer_apt_label">'+r.label+"</span></div></div>")}function t(e,r,a,n){e.html('<div class="ogx_calendar_day_renderer"><div class="ogx_calendar_day_renderer_hours"></div><div class="ogx_calendar_day_renderer_columns"></div></div>'),u.render_hour_grid&&o(e);var t=e.find(".ogx_calendar_day_renderer_columns:first");for(var _ in r)for(var l=0;l<r[_].length;l++)d(t,r[_][l],a,n.categories)}function o(e){for(var r=e.find(".ogx_calendar_day_renderer_hours:first"),a="",n=u.min_hour;n<u.max_hour+1;n++)a+='<div class="ogx_calendar_day_renderer_hour"><span class="ogx_calendar_day_renderer_hour_label">'+n+"</span></div>";r.html(a)}function _(){for(var e in h)u.hasOwnProperty(e)||(u[e]=h[e])}function l(){return"undefined"==typeof moment?void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000"):void _()}"undefined"!=typeof e&&null!==e||(e={});var i,c,s=this,u=e,h={min_hour:6,max_hour:22,render_hour_grid:!0},m=!1,y={};this.render=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");y[n]=OGX.CalendarDataHelper.getDay(a,r),i=$(e),t(i,y[n],n,r),this.listenApt(!0)},this.update=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");y[n]=OGX.CalendarDataHelper.getDay(a,r),i=$(e),t(i,y[n],n,r)},this.listenApt=function(e){e?i&&i.on("click",".ogx_calendar_day_renderer_apt",function(e){return $(this).hasClass("ogx_calendar_day_renderer_selected_apt")?($(this).removeClass("ogx_calendar_day_renderer_selected_apt"),i.trigger(OGX.CalendarDayRenderer.UNSELECT,r(m.data("date"),m.data("time"),m.data("id"))),m=null,void(c=null)):(m&&m.removeClass("ogx_calendar_day_renderer_selected_apt"),$(this).addClass("ogx_calendar_day_renderer_selected_apt"),m=$(this),c=r(m.data("date"),m.data("time"),m.data("id")),void i.trigger(OGX.CalendarDayRenderer.SELECT,c))}):i&&i.off("click",".ogx_calendar_day_renderer_apt")},this.destroy=function(){s.listenApt(!1)},l()},OGX.CalendarDayRenderer=function(e){"use strict";return new OGX.prototype.CalendarDayRenderer(e)},OGX.CalendarDayRenderer.SELECT="CalendarDayRendererSelect",OGX.CalendarDayRenderer.UNSELECT="CalendarDayRendererUnselect";