if("undefined"==typeof OGX)var OGX=function(){};OGX.Templater=function(){},OGX.Templater.templatize=function(__obj,__template){"use strict";function evalOp(__op){var reg=new RegExp("\\@","g");return __op=__op.replace(reg,"__obj."),eval(__op),!0}function extractOps(){var op,e,html,prop,temp,ver,reg=new RegExp("{{loop ([^{{}}]*)}}","gi"),match=__template.match(reg);if(match)for(var j=0;j<match.length;j++)if(op=match[j].substr(2).split(" "),op.shift(),prop=op.shift().substr(1),temp=op.join(" "),temp=temp.substring(0,temp.length-2),ver=eval("__obj."+prop)){html="";for(var i=0;i<ver.length;i++)html+=temp.replace(/\.\$/g,"["+i+"]");__template=__template.replace(match[j],html)}if(reg=new RegExp("{{(((?!(}})).)*)}}","g"),match=__template.match(reg))for(var i=0;i<match.length;i++)e=match[i].substr(1),e=e.substring(0,e.length-1),__template=__template.replace(match[i],""),evalOp(e)}function replaceVals(){var reg=new RegExp("\\$([a-zA-Z0-9_\\-\\[\\]\\.]+)","g"),match=__template.match(reg),m,val;if(match)for(var i=0;i<match.length;i++)m=match[i].replace(/((^[\$])(\.)?)/g,""),val=eval("__obj."+m),"undefined"!=typeof val&&(__template=__template.replace(match[i],val))}return extractOps(),replaceVals(),__template},OGX.Templater.loadTemplates=function(e,t){"use strict";function a(e,t){$("<div></div>").load(e[0].file,function(m){p.templates[e[0].name]=m,$(document).trigger(OGX.Templater.TEMPLATE_LOADED,{name:e[0].name,html:m}),e.splice(0,1),e.length?setTimeout(function(){a(e,t)},0):t?t():$(document).trigger(OGX.Templater.TEMPLATES_LOADED)})}var p=this;this.templates={},"undefined"==typeof t&&(t=!1),setTimeout(function(){a(e,t)},0),this.getTemplate=function(e){return!!this.templates.hasOwnProperty(e)&&this.templates[e]}},OGX.Templater.TEMPLATE_LOADED="Templater_TEMPLATE_LOADED",OGX.Templater.TEMPLATES_LOADED="Templater_TEMPLATES_LOADED";