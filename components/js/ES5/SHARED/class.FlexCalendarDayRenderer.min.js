if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendarDayRenderer=function(e){"use strict";function r(e,r,a){for(var n,d=0;d<u[e][r].length;d++)if(n=u[e][r][d],n._id===a)return n;return!1}function a(e,r){var a={},n=s.max_hour-s.min_hour+1,d=e.height(),t=d/n,_=100*t/d,l=r.start.split(":"),o=Number(l[0])+Number(l[1])/60-s.min_hour;return a.h_pc=Math.round(_*(r.length/60)*100)/100,a.h=Math.round(t*(r.length/60)*100)/100,a.y_pc=Math.round(o*_*100)/100,a.y=Math.round(o*t*100)/100,a}function n(e,r){return Math.max(e.top,r.top)<Math.min(e.bottom,r.bottom)}function d(e,r,d,t){var _,l,o,i,c,s=a(e,r),f=e.children(".ogx_flex_calendar_day_renderer_column").length,x=!1;if(0===f)e.html('<div class="ogx_flex_calendar_day_renderer_column"></div>'),x=e.children(".ogx_flex_calendar_day_renderer_column:first");else{for(var u=0;u<f;u++){if(c=!1,_=e.children(".ogx_flex_calendar_day_renderer_column:eq("+u+")").children(".ogx_flex_calendar_day_renderer_apt").length,_>0){for(var h=0;h<_;h++)if(l=e.children(".ogx_flex_calendar_day_renderer_column:eq("+u+")").children(".ogx_flex_calendar_day_renderer_apt:eq("+h+")"),o=l.position().top,i=l.height(),n({top:s.y,bottom:s.y+s.h},{top:o,bottom:o+i})){c=!0;break}if(!c){x=e.children(".ogx_flex_calendar_day_renderer_column:eq("+u+")");break}}if(x)break}x||(e.append('<div class="ogx_flex_calendar_day_renderer_column"></div>'),x=e.children(".ogx_flex_calendar_day_renderer_column:last"))}x.append('<div class="ogx_flex_calendar_day_renderer_apt" style="height:'+s.h_pc+"%; top:"+s.y_pc+"%; background-color:"+t[r.type].color+'" data-id="'+r._id+'" data-time="'+r.start+'" data-date="'+d+'"><div class="ogx_flex_calendar_day_renderer_apt_info"><span class="ogx_flex_calendar_day_renderer_apt_time">'+r.start+'</span><span class="ogx_flex_calendar_day_renderer_apt_label">'+r.label+"</span></div></div>")}function t(e,r,a,n){e.html('<div class="ogx_flex_calendar_day_renderer"><div class="ogx_flex_calendar_day_renderer_hours"></div><div class="ogx_flex_calendar_day_renderer_columns"></div></div>'),_(e);var t=e.find(".ogx_flex_calendar_day_renderer_columns:first");for(var l in r)for(var o=0;o<r[l].length;o++)d(t,r[l][o],a,n.categories)}function _(e){for(var r=e.find(".ogx_flex_calendar_day_renderer_hours:first"),a="",n=s.min_hour;n<s.max_hour+1;n++)a+='<div class="ogx_flex_calendar_day_renderer_hour"><span class="ogx_flex_calendar_day_renderer_hour_label">'+n+"</span></div>";r.html(a)}function l(){for(var e in f)s.hasOwnProperty(e)||(s[e]=f[e])}function o(){return"undefined"==typeof moment?void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000"):void l()}"undefined"!=typeof e&&null!==e||(e={});var i,c,s=e,f={min_hour:6,max_hour:22},x=!1,u={};this.render=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");u[n]=OGX.FlexCalendarDataHelper.getDay(a,r),i=$(e),t(i,u[n],n,r),this.listenApt(!0)},this.update=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");u[n]=OGX.FlexCalendarDataHelper.getDay(a,r),i=$(e),t(i,u[n],n,r)},this.listenApt=function(e){e?i.on("click",".ogx_flex_calendar_day_renderer_apt",function(e){return $(this).hasClass("ogx_flex_calendar_day_renderer_selected_apt")?($(this).removeClass("ogx_flex_calendar_day_renderer_selected_apt"),i.trigger(OGX.FlexCalendarDayRenderer.UNSELECT,r(x.data("date"),x.data("time"),Number(x.data("id")))),x=null,void(c=null)):(x&&x.removeClass("ogx_flex_calendar_day_renderer_selected_apt"),$(this).addClass("ogx_flex_calendar_day_renderer_selected_apt"),x=$(this),c=r(x.data("date"),x.data("time"),Number(x.data("id"))),void i.trigger(OGX.FlexCalendarDayRenderer.SELECT,c))}):i.off("click",".ogx_flex_calendar_day_renderer_apt")},this.destroy=function(){this.listenApt(!1)},o()},OGX.FlexCalendarDayRenderer=function(e){"use strict";return new OGX.prototype.FlexCalendarDayRenderer(e)},OGX.FlexCalendarDayRenderer.SELECT="FlexCalendarDayRendererSelect",OGX.FlexCalendarDayRenderer.UNSELECT="FlexCalendarDayRendererUnselect";