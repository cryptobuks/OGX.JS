if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendarDayRenderer=function(e){"use strict";function r(e,r,a){for(var n,d=0;d<u[e][r].length;d++)if(n=u[e][r][d],n.__id__===a)return n;return!1}function a(e,r){var a={},n=c.max_hour-c.min_hour+1,d=e.height(),_=d/n,t=100*_/d,l=r.start.split(":"),o=Number(l[0])+Number(l[1])/60-c.min_hour;return a.h_pc=Math.round(t*(r.length/60)*100)/100,a.h=Math.round(_*(r.length/60)*100)/100,a.y_pc=Math.round(o*t*100)/100,a.y=Math.round(o*_*100)/100,a}function n(e,r){return Math.max(e.top,r.top)<Math.min(e.bottom,r.bottom)}function d(e,r,d,_){var t,l,o,i,c,s=a(e,r),x=e.children(".ogx_flex_calendar_day_renderer_column").length,u=!1;if(0===x)e.html('<div class="ogx_flex_calendar_day_renderer_column"></div>'),u=e.children(".ogx_flex_calendar_day_renderer_column:first");else{for(var h=0;h<x;h++){if(c=!1,t=e.children(".ogx_flex_calendar_day_renderer_column:eq("+h+")").children(".ogx_flex_calendar_day_renderer_apt").length,t>0){for(var m=0;m<t;m++)if(l=e.children(".ogx_flex_calendar_day_renderer_column:eq("+h+")").children(".ogx_flex_calendar_day_renderer_apt:eq("+m+")"),o=l.position().top,i=l.height(),n({top:s.y,bottom:s.y+s.h},{top:o,bottom:o+i})){c=!0;break}if(!c){u=e.children(".ogx_flex_calendar_day_renderer_column:eq("+h+")");break}}if(u)break}u||(e.append('<div class="ogx_flex_calendar_day_renderer_column"></div>'),u=e.children(".ogx_flex_calendar_day_renderer_column:last"))}r.__id__=f,u.append('<div class="ogx_flex_calendar_day_renderer_apt" style="height:'+s.h_pc+"%; top:"+s.y_pc+"%; background-color:"+_[r.type].color+'" data-id="'+f+'" data-time="'+r.start+'" data-date="'+d+'"><div class="ogx_flex_calendar_day_renderer_apt_info"><span class="ogx_flex_calendar_day_renderer_apt_time">'+r.start+'</span><span class="ogx_flex_calendar_day_renderer_apt_label">'+r.label+"</span></div></div>"),f++}function _(e,r,a,n){e.html('<div class="ogx_flex_calendar_day_renderer"><div class="ogx_flex_calendar_day_renderer_hours"></div><div class="ogx_flex_calendar_day_renderer_columns"></div></div>'),t(e);var _=e.find(".ogx_flex_calendar_day_renderer_columns:first");for(var l in r)for(var o=0;o<r[l].length;o++)d(_,r[l][o],a,n.categories)}function t(e){for(var r=e.find(".ogx_flex_calendar_day_renderer_hours:first"),a="",n=c.min_hour;n<c.max_hour+1;n++)a+='<div class="ogx_flex_calendar_day_renderer_hour"><span class="ogx_flex_calendar_day_renderer_hour_label">'+n+"</span></div>";r.html(a)}function l(){for(var e in s)c.hasOwnProperty(e)||(c[e]=s[e])}function o(){return"undefined"==typeof moment?void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000"):void l()}"undefined"!=typeof e&&null!==e||(e={});var i,c=e,s={min_hour:6,max_hour:22},f=1,x=!1,u={};this.render=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");u[n]=OGX.FlexCalendarDataHelper.getDay(a,r),i=$(e),_(i,u[n],n,r),this.listenApt(!0)},this.update=function(e,r,a){"undefined"==typeof a&&(a=moment()),moment.isMoment(a)||(a=moment(a));var n=a.format("YYYY-MM-DD");u[n]=OGX.FlexCalendarDataHelper.getDay(a,r),i=$(e),_(i,u[n],n,r)},this.listenApt=function(e){e?i.on("click",".ogx_flex_calendar_day_renderer_apt",function(e){return $(this).hasClass("ogx_flex_calendar_day_renderer_selected_apt")?($(this).removeClass("ogx_flex_calendar_day_renderer_selected_apt"),i.trigger(OGX.FlexCalendarDayRenderer.UNSELECT,r(x.data("date"),x.data("time"),Number(x.data("id")))),void(x=null)):(x&&x.removeClass("ogx_flex_calendar_day_renderer_selected_apt"),$(this).addClass("ogx_flex_calendar_day_renderer_selected_apt"),x=$(this),void i.trigger(OGX.FlexCalendarDayRenderer.SELECT,r(x.data("date"),x.data("time"),Number(x.data("id")))))}):i.off("click",".ogx_flex_calendar_day_renderer_apt")},this.destroy=function(){this.listenApt(!1)},o()},OGX.FlexCalendarDayRenderer=function(e){"use strict";return new OGX.prototype.FlexCalendarDayRenderer(e)},OGX.FlexCalendarDayRenderer.SELECT="FlexCalendarDayRendererSelect",OGX.FlexCalendarDayRenderer.UNSELECT="FlexCalendarDayRendererUnselect";