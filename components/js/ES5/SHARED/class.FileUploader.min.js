if("undefined"==typeof RCP)var RCP=function(){};RCP.prototype.FileUploader=function(e){"use strict";function t(e){e?($(f.button).on("click",function(e){e.preventDefault(),u.openBrowse()}),$(".rcp_file_uploader:first").find("input[type=file]").on("change",function(){u.uploadFile($(this).get(0).files[0],s)})):(f.button&&$(f.button).off("click"),$(".rcp_file_uploader:first").find("input[type=file]").off("change"))}function n(e){e?(R.upload.addEventListener("progress",r),R.addEventListener("load",i),R.addEventListener("error",o),R.addEventListener("abort",l)):(R.upload.removeEventListener("progress",r),R.removeEventListener("load",i),R.removeEventListener("error",o),R.removeEventListener("abort",l),R=null)}function r(e){var t=Math.round(100*e.loaded/e.total);$(f.container).trigger(RCP.FileUploader.UPLOAD_PROGRESS,{percent:t})}function i(){var e=$.parseJSON(R.responseText);if(e.success)$(f.container).trigger(RCP.FileUploader.UPLOAD_COMPLETE,e);else switch(e.error){case"FILESIZE":$(f.container).trigger(RCP.FileUploader.ERROR_FILE_SIZE),$(".rcp_file_uploader").find("input[type=file]").val("")}n(!1)}function o(){$(f.container).trigger(RCP.FileUploader.ERROR_GENERIC),n(!1)}function l(){$(f.container).trigger(RCP.FileUploader.UPLOAD_ABORTED),n(!1)}function a(){0===$(".rcp_file_uploader").length&&$("body").append('<form class="rcp_file_uploader" method="post" enctype="multipart/form-data" style="display:none;"><input name="file" type="file"/></form>')}function p(){for(var e in c)f.hasOwnProperty(e)||(f[e]=c[e])}function d(){p(),a(),f.button&&(t(!1),t(!0))}var s,u=this,f=e,c={container:document,button:!1,extensions:["txt"],send:!0,enabled:!0};this.type="RcpFileUploader",this.enable=function(){return!!f.enabled||(f.button&&t(!0),void(f.enabled=!0))},this.disable=function(){return!f.enabled||(f.button&&t(!1),void(f.enabled=!1))};var R;this.uploadFile=function(e){if(f.extensions){for(var t="/",r=0;r<f.extensions;r++)t+="\\"+f.extensions[r]+"|";t=t.substr(0,t.length-1);var i=new RegExp(t,"i");if(e.name.search(i)===-1)return void $(f.container).trigger(RCP.FileUploader.ERROR_FILE_EXT)}var o=new FormData;o.append("file",e),f.send?(R=new XMLHttpRequest,n(!0),R.open("POST",f.url),R.send(o),$(f.container).trigger(RCP.FileUploader.UPLOAD_START)):$(f.container).trigger(RCP.FileUploader.PREPARE_DATA,e)},this.setParams=function(e){s=e},this.setButton=function(e){t(!1),f.button=e,t(!0)},this.openBrowse=function(){$(".rcp_file_uploader:first").find("input[type=file]").click()},d()},RCP.FileUploader=function(e){"use strict";return new RCP.prototype.FileUploader(e)},RCP.FileUploader.ERROR_FILE_SIZE="errorFileSize",RCP.FileUploader.ERROR_GENERIC="errorGeneric",RCP.FileUploader.ERROR_FILE_EXT="errorFileExt",RCP.FileUploader.UPLOAD_START="uploadStart",RCP.FileUploader.UPLOAD_ABORTED="uploadAborted",RCP.FileUploader.UPLOAD_COMPLETE="uploadComplete",RCP.FileUploader.UPLOAD_PROGRESS="uploadProgress",RCP.FileUploader.PREPARE_DATA="prepareData";