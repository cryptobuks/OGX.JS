if("undefined"==typeof OGX)var OGX=function(){};OGX.List=function(){function t(t,e){return function(i,r){return i[t]<r[t]?e*-1:i[t]>r[t]?e:0}}function e(t,e,i,r){if(t.hasOwnProperty(e)){var s=t[e];switch(i){case"substr":return s=s.substr(r[0],r[1]);case"numrange":return s=Number(s),Array.isArray(r)?(s=Math.floor(s/r[0]),s="pre"===r[2]?r[1]+s*r[0]+" - "+r[1]+(s+1)*r[0]:s*r[0]+r[1]+" - "+(s+1)*r[0]+r[1]):(s=Math.floor(s/r),s=s*r+" - "+(s+1)*r),s;case"date":if(!Array.isArray(r)){if("year"===r)return s=s.substr(0,4);if("month"===r)return s=s.substr(0,7);if("week"===r)return s=s.substr(0,4)+" week "+moment(s).week()}return s=moment(s).unix(),s=Math.floor(s/(60*r[0]*60*24)),s*=60*r[0]*60*24,s=moment(1e3*s).format(r[1])+" - "+moment(1e3*s+1e3*r[0]*60*60*24).format(r[1])}return s}return!1}if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var i=Object.create(Array.prototype);i=Array.apply(i,arguments)||i;for(var r in OGX.List.prototype)OGX.List.prototype.hasOwnProperty(r)&&(i[r]=OGX.List.prototype[r]);return i.insert=function(t,e){i.splice(e,0,t)},i.delete=function(t){i.splice(t,1)},i.findDelete=function(t,e,i){var r=0;"undefined"==typeof i&&(i=0);for(var s=[],n=0;n<this.length;n++)if(this[n][t]===e){if(s.push(this.splice(n,1)[0]),r++,i>0&&i===r)return s;n--}return s},i.findReplace=function(t,e,i,r){var s=0;"undefined"==typeof r&&(r=0);for(var n=[],h=0;h<this.length;h++)if(this[h][t]===e&&(n.push(this[h]),s++,this[h]=i,r>0&&r===s))return n;return n},i.findUpdate=function(t,e,i,r,s){var n=0;"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=0);for(var h,o=[],a=0;a<this.length;a++)if(this[a][t]===e){h=!1;for(var f in i)r?this[a].hasOwnProperty(f)&&(this[a][f]=i[f],h=!0,n++):(this[a][f]=i[f],h=!0,n++);if(h&&(o.push(this[a]),s>0&&s===n))return o}return o},i.findIndex=function(t,e){var i=!1;e instanceof RegExp&&(i=!0);for(var r=0;r<this.length;r++)if(i){if(this[r][t].match(e))return{index:r}}else if(this[r][t]===e)return{index:r};return!1},i.find=function(t,e,i){var r=0,s=[],n=!1;e instanceof RegExp&&(n=!0);for(var h=0;h<this.length;h++)if(n?this[h][t].match(e)&&(s.push(this[h]),r++):this[h][t]===e&&(s.push(this[h]),r++),i>0&&r===i)return new OGX.List(s);return new OGX.List(s)},i.order=function(e,r){i.sort(t(e,r))},i.group=function(t,i,r){for(var s,n={},h=0;h<this.length;h++)s=e(this[h],t,i,r),s&&(n.hasOwnProperty(s)||(n[s]=[]),n[s].push({item:this[h],pos:h}));return n},i.filters={},i.addFilter=function(t,e,i){return!this.filters.hasOwnProperty(t)&&(this.filters[t]={value:i,mode:e},!0)},i.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(delete this.filters[t],!0)},i.getFilters=function(){return this.filters},i.resetFilters=function(){this.filters={}},i.setFilters=function(t){this.filters=t},i.filter=function(){for(var t,e=[],r=!1,s=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}/g,n=!1,h=0;h<this.length;h++){n=!0;for(var o in this.filters)if(this[h].hasOwnProperty(o)){switch(r=!0,t=!1,isString=!1,Array.isArray(this[h][o])?"string"==typeof this[h][o][0]&&(isString=!0,this[h][o][0].match(s)&&(t=!0)):"string"==typeof this[h][o]&&(isString=!0,this[h][o].match(s)&&(t=!0)),this.filters[o].mode){case"eq":isString?this[h][o].toLowerCase()!==this.filters[o].value.toLowerCase()&&(n=!1):this[h][o]!==this.filters[o].value&&(n=!1);break;case"eqjson":JSON.stringify(this[h][o])!==JSON.stringify(this.filters[o].value)&&(n=!1);break;case"neq":isString?this[h][o].toLowerCase()===this.filters[o].value.toLowerCase()&&(n=!1):this[h][o]===this.filters[o].value&&(n=!1);break;case"in":isString?this[h][o].toLowerCase().indexOf(this.filters[o].value.toLowerCase())===-1&&(n=!1):this[h][o].indexOf(this.filters[o].value)===-1&&(n=!1);break;case"nin":isString?this[h][o].toLowerCase().indexOf(this.filters[o].value.toLowerCase())!==-1&&(n=!1):this[h][o].indexOf(this.filters[o].value)!==-1&&(n=!1);break;case"gt":t?moment(this[h][o]).unix()<=moment(this.filters[o].value).unix()&&(n=!1):this[h][o]<=this.filters[o].value&&(n=!1);break;case"gte":t?moment(this[h][o]).unix()<moment(this.filters[o].value).unix()&&(n=!1):this[h][o]<this.filters[o].value&&(n=!1);break;case"lt":t?moment(this[h][o]).unix()>=moment(this.filters[o].value).unix()&&(n=!1):this[h][o]>=this.filters[o].value&&(n=!1);break;case"lte":t?moment(this[h][o]).unix()>moment(this.filters[o].value).unix()&&(n=!1):this[h][o]>this.filters[o].value&&(n=!0);break;case"btw":t?(moment(this.filters[o].value[0]).unix()>moment(this[h][o]).unix()||moment(this.filters[o].value[1]).unix()<moment(this[h][o]).unix())&&(n=!1):(this.filters[o].value[0]>this[h][o]||this.filters[o].value[1]<this[h][o])&&(n=!1);break;case"substr":this[h][o].toLowerCase().substr(this.filters[o].value[0],this.filters[o].value[1]).toLowerCase()!==this.filters[o].value[2].toLowerCase()&&(n=!1);break;case"regex":this[h][o].match(this.filters[o].value)||(n=!1)}if(!n)break}n&&e.push(this[h])}return r?OGX.List.apply(null,e):i},i};