if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.List=function(t){"use strict";function e(){for(var t,e,n,i,o=99999999,r=null,a=E.children().length,s=x.scrollTop(),l=0;l<a;l++){if(e=E.children(":eq("+l+")"),t=e.position().top,n=e.height(),i=parseInt(e.data("id")),t<=s&&t+n>=s+O)return r=i;t<=s&&t+n<s+O?t<o&&(o=t,r=i):t>=s&&t<s+O&&t<o&&(o=t,r=i)}return r}function n(t){t?$(window).on("resize",function(){console.log("resize"),i()}):$(window).off("resize")}function i(){f(!1),G=e(),null!==G&&(r(),O=x.height(),E.empty(),x.scrollTop(),b=0,P={},o(G))}function o(t){for(var e=0;e<t+1;e++)E.append(I[e]),delete I[e];setTimeout(function(){var e=0;E.children().each(function(t,n){$(n).css("top",e+"px"),e+=$(n).height()}),E.css("height",e+"px");var n=E.find('[data-id="'+t+'"]');x.scrollTop(n.position().top),_.bind.scroller&&_.bind.scroller.update(),f(!0)},100)}function r(){for(var t,e=E.children().length,n=0;n<e;n++)t=E.children(":first").data("id"),I[t]=E.children(":first").detach()}function a(){var t,e;t=p(_.data[0],"test"),E.append(t),e=E.children(":last"),e.attr("data-id",0),l(!1,e,!0)}function s(t,e){var n=parseInt(t.data("id"));if(n++,m=n,n<_.data.length&&!P.hasOwnProperty(n)){if(I.hasOwnProperty(n))E.append(I[n]),delete I[n];else{var i,o;i=p(_.data[n],"test"),E.append(i)}o=E.children(":last"),o.attr("data-id",n),P[n]=!0,l(t,o)}}function l(t,e){var n;n=t===!1?0:t.position().top+t.height(),e.css("top",n+"px"),setTimeout(function(){delete P[e.data("id")],n+e.outerHeight(!0)>E.height()&&E.css("height",n+"px")},100)}function c(t){var e=parseInt(t.data("id")),n=t.position().top;if(e>0)if(I.hasOwnProperty(e-1))E.prepend(I[e-1]),delete I[e-1];else{var i,o;i=p(_.data[e-1],"test"),E.prepend(i),o=E.children(":first"),o.attr("data-id",e-1),P[e-1]=!0,d(o,n)}}function d(t,e){setTimeout(function(){delete P[t.data("id")];var n=e-t.height();t.css("top",n+"px")},100)}function p(t,e){var n,i=_.templates[e];for(var o in t)n=new RegExp("\\$"+o,"g"),i=i.replace(n,t[o]);return i='<div class="ogx_list_item">'+i+"</div>"}function f(t){t?L=setInterval(h,50):clearInterval(L)}function h(){var t=x.scrollTop(),e=0;if(t<b)E.children(":first").position().top>=t-1.5*w&&(c(E.children(":first")),e=-1);else if(t>b){e=1;var n=E.children(":last");n.length>0?n.position().top+n.height()<=t+O+w&&s(n):console.log("no last, clean up bug")}e&&(y=Math.abs(b-t),w=_.offset+y,y<_.cleanspeed&&u(e),b=t)}function u(t){var e,n,i,o=x.scrollTop();E.children().each(function(r,a){e=$(a).position().top,n=$(a).height(),i=$(a).data("id"),P.hasOwnProperty(i)||(t===-1?(console.log("clean down"),e>o+O+w&&(I[i]=$(a).detach())):(console.log("clean up"),e+n+w<o&&(I[i]=$(a).detach())))})}function g(){_||(_={});for(var t in T)_.hasOwnProperty(t)||(_[t]=T[t]);X.el=$(_.container),$(_.container).append('<div class="ogx_list"><div class="ogx_list_container"></div>'),x=$(_.container),E=$(_.container).find(".ogx_list_container:first"),O=2*$(_.container).height(),w=_.offset}function v(){g(),a(),f(!0),n(!0)}var O,L,y,w,G,m,x,E,X=this,_=t,T={container:null,templates:{},data:[],default_template:!1,cleanspeed:50,offset:300,mode:OGX.List.MODE_SCROLL,bind:{scroller:null}},b=0,P={},I={};this.el=null,this.bind=function(t,e,n){var i;if(i=typeof t,"object"===i&&t.hasOwnProperty("type")&&t.type)switch(t.type){case"OgxMobileScrollContainer":_.bind.scroller=t,x.empty(),f(!1),x=$(t.getOuter()),E=$(t.getInner()),E.addClass("ogx_list"),O=x.height(),P={},I={},a(),f(!0)}},this.destroy=function(){f(!1),n(!1)},v()},OGX.List=function(t){"use strict";return new OGX.prototype.List(t)},OGX.List.MODE_PAGE="modePage",OGX.List.MODE_SCROLL="modeScroll",OGX.List.SELECT="select",OGX.List.UNSELECT="unselect",OGX.List.FILTER="filter",OGX.List.RENDER="render";