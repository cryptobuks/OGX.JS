if("undefined"==typeof OGX)var OGX=function(){};OGX.List=function(){function t(t,e){return function(i,r){return i[t]<r[t]?e*-1:i[t]>r[t]?e:0}}function e(t,e,i,r){if(t.hasOwnProperty(e)){var s=t[e];switch(i){case"substr":return s=s.substr(r[0],r[1]);case"numrange":return s=Number(s),Array.isArray(r)?(s=Math.floor(s/r[0]),s="pre"===r[2]?r[1]+s*r[0]+" - "+r[1]+(s+1)*r[0]:s*r[0]+r[1]+" - "+(s+1)*r[0]+r[1]):(s=Math.floor(s/r),s=s*r+" - "+(s+1)*r),s;case"date":if(!Array.isArray(r)){if("year"===r)return s=s.substr(0,4);if("month"===r)return s=s.substr(0,7);if("week"===r)return s=s.substr(0,4)+" week "+moment(s).week()}return s=moment(s).unix(),s=Math.floor(s/(60*r[0]*60*24)),s*=60*r[0]*60*24,s=moment(1e3*s).format(r[1])+" - "+moment(1e3*s+1e3*r[0]*60*60*24).format(r[1])}return s}return!1}if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var i=Object.create(Array.prototype);i=Array.apply(i,arguments)||i;for(var r in OGX.List.prototype)OGX.List.prototype.hasOwnProperty(r)&&(i[r]=OGX.List.prototype[r]);return i.insert=function(t,e){i.splice(e,0,t)},i.delete=function(t){i.splice(t,1)},i.findDelete=function(t,e,i){var r=0;"undefined"==typeof i&&(i=0);for(var s=[],n=0;n<this.length;n++)if(this[n][t]===e){if(s.push(this.splice(n,1)[0]),r++,i>0&&i===r)return s;n--}return s},i.findReplace=function(t,e,i,r){var s=0;"undefined"==typeof r&&(r=0);for(var n=[],a=0;a<this.length;a++)if(this[a][t]===e&&(n.push(this[a]),s++,this[a]=i,r>0&&r===s))return n;return n},i.findUpdate=function(t,e,i,r,s){var n=0;"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=0);for(var a,f=[],h=0;h<this.length;h++)if(this[h][t]===e){a=!1;for(var o in i)r?this[h].hasOwnProperty(o)&&(this[h][o]=i[o],a=!0,n++):(this[h][o]=i[o],a=!0,n++);if(a&&(f.push(this[h]),s>0&&s===n))return f}return f},i.findIndex=function(t,e){var i=!1;e instanceof RegExp&&(i=!0);for(var r=0;r<this.length;r++)if(i){if(this[r][t].match(e))return{index:r}}else if(this[r][t]===e)return{index:r};return!1},i.find=function(t,e,i){var r=0,s=[],n=!1;e instanceof RegExp&&(n=!0);for(var a=0;a<this.length;a++)if(n?this[a][t].match(e)&&(s.push(this[a]),r++):this[a][t]===e&&(s.push(this[a]),r++),i>0&&r===i)return new OGX.List(s);return new OGX.List(s)},i.order=function(e,r){i.sort(t(e,r))},i.group=function(t,i,r){for(var s,n={},a=0;a<this.length;a++)s=e(this[a],t,i,r),s&&(n.hasOwnProperty(s)||(n[s]=[]),n[s].push({item:this[a],pos:a}));return n},i.filters={},i.addFilter=function(t,e,i){return!this.filters.hasOwnProperty(t)&&(this.filters[t]={value:i,mode:e},!0)},i.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(delete this.filters[t],!0)},i.getFilters=function(){return this.filters},i.resetFilters=function(){this.filters={}},i.setFilters=function(t){this.filters=t},i.filter=function(){for(var t,e=[],r=!1,s=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}/g,n=!1,a=0;a<this.length;a++){n=!0;for(var f in this.filters)if(this[a].hasOwnProperty(f)){switch(r=!0,t=!1,isString=!1,Array.isArray(this[a][f])?"string"==typeof this[a][f][0]&&(isString=!0,this[a][f][0].match(s)&&(t=!0)):"string"==typeof this[a][f]&&(isString=!0,this[a][f].match(s)&&(t=!0)),this.filters[f].mode){case"eq":isString?this[a][f].toLowerCase()!==this.filters[f].value.toLowerCase()&&(n=!1):this[a][f]!==this.filters[f].value&&(n=!1);break;case"eqjson":JSON.stringify(this[a][f])!==JSON.stringify(this.filters[f].value)&&(n=!1);break;case"neq":isString?this[a][f].toLowerCase()===this.filters[f].value.toLowerCase()&&(n=!1):this[a][f]===this.filters[f].value&&(n=!1);break;case"in":if(Array.isArray(this.filters[f].value)){for(var h=0;h<this.filters[f].value.length;h++)if(this[a][f].indexOf(this.filters[f].value[h])===-1){n=!1;break}}else isString?this[a][f].toLowerCase().indexOf(this.filters[f].value.toLowerCase())===-1&&(n=!1):this[a][f].indexOf(this.filters[f].value)===-1&&(n=!1);break;case"nin":if(Array.isArray(this.filters[f].value)){for(var h=0;h<this.filters[f].value.length;h++)if(this[a][f].indexOf(this.filters[f].value[h])!==-1){n=!1;break}}else isString?this[a][f].toLowerCase().indexOf(this.filters[f].value.toLowerCase())!==-1&&(n=!1):this[a][f].indexOf(this.filters[f].value)!==-1&&(n=!1);break;case"gt":t?moment(this[a][f]).unix()<=moment(this.filters[f].value).unix()&&(n=!1):this[a][f]<=this.filters[f].value&&(n=!1);break;case"gte":t?moment(this[a][f]).unix()<moment(this.filters[f].value).unix()&&(n=!1):this[a][f]<this.filters[f].value&&(n=!1);break;case"lt":t?moment(this[a][f]).unix()>=moment(this.filters[f].value).unix()&&(n=!1):this[a][f]>=this.filters[f].value&&(n=!1);break;case"lte":t?moment(this[a][f]).unix()>moment(this.filters[f].value).unix()&&(n=!1):this[a][f]>this.filters[f].value&&(n=!0);break;case"btw":t?(moment(this.filters[f].value[0]).unix()>moment(this[a][f]).unix()||moment(this.filters[f].value[1]).unix()<moment(this[a][f]).unix())&&(n=!1):(this.filters[f].value[0]>this[a][f]||this.filters[f].value[1]<this[a][f])&&(n=!1);break;case"substr":this[a][f].toLowerCase().substr(this.filters[f].value[0],this.filters[f].value[1]).toLowerCase()!==this.filters[f].value[2].toLowerCase()&&(n=!1);break;case"regex":this[a][f].match(this.filters[f].value)||(n=!1)}if(!n)break}n&&e.push(this[a])}return r?OGX.List.apply(null,e):i},i};