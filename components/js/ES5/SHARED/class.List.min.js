if("undefined"==typeof OGX)var OGX=function(){};OGX.List=function(){function t(t,e){return function(i,r){return i[t]<r[t]?e*-1:i[t]>r[t]?e:0}}function e(t,e,i,r){if(t.hasOwnProperty(e)){var s=t[e];switch(i){case"substr":return s=s.substr(r[0],r[1]);case"numrange":return s=Number(s),Array.isArray(r)?(s=Math.floor(s/r[0]),s="pre"===r[2]?r[1]+s*r[0]+" - "+r[1]+(s+1)*r[0]:s*r[0]+r[1]+" - "+(s+1)*r[0]+r[1]):(s=Math.floor(s/r),s=s*r+" - "+(s+1)*r),s;case"date":if(!Array.isArray(r)){if("year"===r)return s=s.substr(0,4);if("month"===r)return s=s.substr(0,7);if("week"===r)return s=s.substr(0,4)+" week "+moment(s).week()}return s=moment(s).unix(),s=Math.floor(s/(60*r[0]*60*24)),s*=60*r[0]*60*24,s=moment(1e3*s).format(r[1])+" - "+moment(1e3*s+1e3*r[0]*60*60*24).format(r[1])}return s}return!1}if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var i=Object.create(Array.prototype);i=Array.apply(i,arguments)||i;for(var r in OGX.List.prototype)OGX.List.prototype.hasOwnProperty(r)&&(i[r]=OGX.List.prototype[r]);return i.insert=function(t,e){i.splice(e,0,t)},i.delete=function(t){i.splice(t,1)},i.findDelete=function(t,e,i){var r=0;"undefined"==typeof i&&(i=0);for(var s=[],n=0;n<this.length;n++)if(this[n][t]===e){if(s.push(this.splice(n,1)[0]),r++,i>0&&i===r)return s;n--}return s},i.findReplace=function(t,e,i,r){var s=0;"undefined"==typeof r&&(r=0);for(var n=[],a=0;a<this.length;a++)if(this[a][t]===e&&(n.push(this[a]),s++,this[a]=i,r>0&&r===s))return n;return n},i.findUpdate=function(t,e,i,r,s){var n=0;"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=0);for(var a,f=[],h=0;h<this.length;h++)if(this[h][t]===e){a=!1;for(var o in i)r?this[h].hasOwnProperty(o)&&(this[h][o]=i[o],a=!0,n++):(this[h][o]=i[o],a=!0,n++);if(a&&(f.push(this[h]),s>0&&s===n))return f}return f},i.findIndex=function(t,e){var i=!1;e instanceof RegExp&&(i=!0);for(var r=0;r<this.length;r++)if(i){if(this[r][t].match(e))return{index:r}}else if(this[r][t]===e)return{index:r};return!1},i.find=function(t,e,i){var r=0,s=[],n=!1;e instanceof RegExp&&(n=!0);for(var a=0;a<this.length;a++)if(n?this[a][t].match(e)&&(s.push(this[a]),r++):this[a][t]===e&&(s.push(this[a]),r++),i>0&&r===i)return new OGX.List(s);return new OGX.List(s)},i.order=function(e,r){i.sort(t(e,r))},i.group=function(t,i,r){for(var s,n={},a=0;a<this.length;a++)s=e(this[a],t,i,r),s&&(n.hasOwnProperty(s)||(n[s]=[]),n[s].push({item:this[a],pos:a}));return n},i.filters={},i.addFilter=function(t,e,i){return!this.filters.hasOwnProperty(t)&&(this.filters[t]={value:i,mode:e},!0)},i.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(delete this.filters[t],!0)},i.getFilters=function(){return this.filters},i.resetFilters=function(){this.filters={}},i.setFilters=function(t){this.filters=t},i.filter=function(){for(var t,e,r,s=[],n=!1,a=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}/g,f=!1,h=0;h<this.length;h++){f=!0;for(var o in this.filters)if(this[h].hasOwnProperty(o)){switch(n=!0,t=!1,e=!1,r=Array.isArray(this[h][o]),r?"string"==typeof this[h][o][0]&&(e=!0,this[h][o][0].match(a)&&(t=!0)):"string"==typeof this[h][o]&&(e=!0,this[h][o].match(a)&&(t=!0)),this.filters[o].mode){case"eq":e?this[h][o].toLowerCase()!==this.filters[o].value.toLowerCase()&&(f=!1):this[h][o]!==this.filters[o].value&&(f=!1);break;case"eqjson":JSON.stringify(this[h][o])!==JSON.stringify(this.filters[o].value)&&(f=!1);break;case"neq":e?this[h][o].toLowerCase()===this.filters[o].value.toLowerCase()&&(f=!1):this[h][o]===this.filters[o].value&&(f=!1);break;case"in":if(Array.isArray(this.filters[o].value)){for(var u=0;u<this.filters[o].value.length;u++)if(this[h][o].indexOf(this.filters[o].value[u])===-1){f=!1;break}}else e?r?this[h][o].indexOf(this.filters[o].value)===-1&&(f=!1):this[h][o].toLowerCase().indexOf(this.filters[o].value.toLowerCase())===-1&&(f=!1):this[h][o].indexOf(this.filters[o].value)===-1&&(f=!1);break;case"nin":if(Array.isArray(this.filters[o].value)){for(var u=0;u<this.filters[o].value.length;u++)if(this[h][o].indexOf(this.filters[o].value[u])!==-1){f=!1;break}}else e?this[h][o].toLowerCase().indexOf(this.filters[o].value.toLowerCase())!==-1&&(f=!1):this[h][o].indexOf(this.filters[o].value)!==-1&&(f=!1);break;case"gt":t?moment(this[h][o]).unix()<=moment(this.filters[o].value).unix()&&(f=!1):this[h][o]<=this.filters[o].value&&(f=!1);break;case"gte":t?moment(this[h][o]).unix()<moment(this.filters[o].value).unix()&&(f=!1):this[h][o]<this.filters[o].value&&(f=!1);break;case"lt":t?moment(this[h][o]).unix()>=moment(this.filters[o].value).unix()&&(f=!1):this[h][o]>=this.filters[o].value&&(f=!1);break;case"lte":t?moment(this[h][o]).unix()>moment(this.filters[o].value).unix()&&(f=!1):this[h][o]>this.filters[o].value&&(f=!0);break;case"btw":t?(moment(this.filters[o].value[0]).unix()>moment(this[h][o]).unix()||moment(this.filters[o].value[1]).unix()<moment(this[h][o]).unix())&&(f=!1):(this.filters[o].value[0]>this[h][o]||this.filters[o].value[1]<this[h][o])&&(f=!1);break;case"substr":this[h][o].toLowerCase().substr(this.filters[o].value[0],this.filters[o].value[1]).toLowerCase()!==this.filters[o].value[2].toLowerCase()&&(f=!1);break;case"regex":this[h][o].match(this.filters[o].value)||(f=!1)}if(!f)break}else f=!1;f&&s.push(this[h])}return n?OGX.List.apply(null,s):i},i};