if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.DynamicList=function(e){"use strict";function t(){p.filter.list=s(),p.start=0,p.bind.pager&&(p.bind.pager.setPages(Math.ceil(p.filter.list.length*p.limit)),p.bind.pager.setPageBlock(0),p.bind.pager.setPage(0)),n(p.filter.list)}function i(){for(var e in y)for(var t in y[e].options)u.unbind(e,t)}function s(){var e,t,i,s,n,l,r,a,o,c,d={},f=[],m=!1;_=!0;for(var g=0;g<p.list.length;g++){a=0,r=0;for(L in y){y[L].matches=0,c=!1,o=0;for(var u in y[L].options)if(y[L].options[u].include&&(c||(c=!0,r++),p.list[g].hasOwnProperty(L)&&(e=String(p.list[g][L]).toLowerCase(),y[L].options[u].vals.length>0))){m=!0;for(var h=0;h<y[L].options[u].vals.length;h++)switch(o++,u){case"min":t=Number(p.list[g][L]),isNaN(t)||t>=Number(y[L].options[u].vals[h])&&y[L].matches++;break;case"max":t=Number(p.list[g][L]),isNaN(t)||t<=Number(y[L].options[u].vals[h])&&y[L].matches++;break;case"in":e.indexOf(y[L].options[u].vals[h].toLowerCase())!==-1&&y[L].matches++;break;case"out":e.indexOf(y[L].options[u].vals[h].toLowerCase())==-1&&y[L].matches++;break;case"from":i=new Date(e),n=i.getTime(),s=new Date(y[L].options[u].vals[h]),l=s.getTime(),n>=l&&y[L].matches++;break;case"to":i=new Date(e),n=i.getTime(),s=new Date(y[L].options[u].vals[h]),l=s.getTime(),n<=l&&y[L].matches++;break;case"include":e.indexOf(y[L].options[u].vals[h].toLowerCase())!==-1&&y[L].matches++;break;case"exclude":e.indexOf(y[L].options[u].vals[h].toLowerCase())==-1&&y[L].matches++;break;default:if(y[L].options[u].hasOwnProperty("mode"))switch(y[L].options[u].mode){case"strict":e.toLowerCase()===y[L].options[u].vals[h].toLowerCase()&&y[L].matches++;break;case"include":e.indexOf(y[L].options[u].vals[h].toLowerCase())!==-1&&y[L].matches++}else e.toLowerCase()===y[L].options[u].vals[h].toLowerCase()&&y[L].matches++}}o===y[L].matches&&o&&a++}a===r&&(d[g]=!0)}if(m)for(var L in d)f.push(p.list[L]);else _=!1,f=p.list;return f}function n(e){if(u.clearList(),"undefined"!=typeof e&&0!==e.length){var t=0,i=e.length;p.limit&&(i=p.limit),p.start&&(t=p.start),i=t+i,i>e.length?i=e.length:null,p.limit&&(p.pages=Math.ceil(e.length/p.limit)),p.bind.pager&&p.bind.pager.setPages(p.pages);for(var s,n,r,a=t;a<i;a++)s='<li class="ogx_dynamic_list_item',n=o(e[a]),e[a].hasOwnProperty("css")&&(s+=" "+e[a].css),p.css&&(s+=" "+p.css),s+=n?' ogx_dynamic_list_selected_item"':'"',p.key&&(s+=" data-"+p.key+'="'+e[a][p.key]+'"'),s+=">",s+=l(e[a]),s+="</li>",p.components?r=$(p.list_container).append(s).get(0):$(p.list_container).append(s);p.trigger&&$(p.container).trigger(OGX.DynamicList.RENDER,u)}}function l(e){return OGX.DynamicList.templateObject(e,p.template)}function r(){$(p.list_container).on("click",".ogx_dynamic_list_item",function(e){if(p.enabled){var t=$(e.currentTarget).index();if(p.bind.pager&&p.limit&&(t+=p.bind.pager.getPage()*p.limit),"multi"===p.mode)return $(this).hasClass("ogx_dynamic_list_selected_item")?($(this).removeClass("ogx_dynamic_list_selected_item"),void(p.filter.enabled&&_?(a(p.filter.list[t]),$(p.container).trigger(OGX.DynamicList.UNSELECT,p.filter.list[t])):(a(p.list[t]),$(p.container).trigger(OGX.DynamicList.UNSELECT,p.list[t])))):($(this).addClass("ogx_dynamic_list_selected_item"),void(p.filter.enabled&&_?(p.selected.push(p.filter.list[t]),$(p.container).trigger(OGX.DynamicList.SELECT,p.filter.list[t])):(p.selected.push(p.list[t]),$(p.container).trigger(OGX.DynamicList.SELECT,p.list[t]))));if("toggle"===p.mode)return $(this).hasClass("ogx_dynamic_list_selected_item")?($(this).removeClass("ogx_dynamic_list_selected_item"),p.selected=[],void(p.filter.enabled&&_?$(p.container).trigger(OGX.DynamicList.UNSELECT,p.filter.list[t]):$(p.container).trigger(OGX.DynamicList.UNSELECT,p.list[t]))):($(p.list_container).find(".ogx_dynamic_list_item").removeClass("ogx_dynamic_list_selected_item"),$(this).addClass("ogx_dynamic_list_selected_item"),void(p.filter.enabled&&_?(p.selected=[p.filter.list[t]],$(p.container).trigger(OGX.DynamicList.SELECT,p.filter.list[t])):(p.selected=[p.list[t]],$(p.container).trigger(OGX.DynamicList.SELECT,p.list[t]))));if($(p.list_container).find(".ogx_dynamic_list_selected_item")[0]==$(this)[0])return;return $(p.list_container).find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item"),$(this).addClass("ogx_dynamic_list_selected_item"),void(p.filter.enabled&&_?(p.selected=[p.filter.list[t]],$(p.container).trigger(OGX.DynamicList.SELECT,p.filter.list[t])):(p.selected=[p.list[t]],$(p.container).trigger(OGX.DynamicList.SELECT,p.list[t])))}})}function a(e){for(var t=!1,i=0;i<p.selected.length;i++)if(t=p.key?e[p.key]===p.selected[i][p.key]:c(e,p.selected[i]))return p.selected.splice(i,1),!0;return!1}function o(e){for(var t=!1,i=0;i<p.selected.length;i++)if(t=p.key?e[p.key]===p.selected[i][p.key]:c(e,p.selected[i]))return!0;return!1}function c(e,t){if(p.key)return e[p.key]===t[p.key];for(var i in e)if(t[i]!==e[i])return!1;return!0}function d(e,t){var i=p.list;return i.sort(f(e,t)),i}function f(e,t){return function(i,s){return i[e]<s[e]?t*-1:i[e]>s[e]?t:0}}function m(){p||(p={});for(var e in h)p.hasOwnProperty(e)||(p[e]=h[e]);u.el=$(p.container)}function g(){return"undefined"==typeof OGX.Templater?void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):(m(),$(p.container).append('<ul class="ogx_dynamic_list"></ul>'),p.list_container=$(p.container).find(".ogx_dynamic_list:first"),p.list&&n(p.list),void r())}var u=this,p=e,h={container:null,list_container:null,enabled:!0,selectable:!0,key:null,mode:"single",filter:{enabled:!1,list:[]},bind:{pager:null},trigger:!1,limit:10,pages:0,components:!1,list:[],selected:[],css:null},y={},_=!1;this.el=null,this.type="OgxDynamicList",this.enable=function(){p.enabled=!0},this.disable=function(){p.enabled=!1},this.setPage=function(e){p.start=p.limit*e,u.renderList()},this.setLimit=function(e){p.limit=e,u.renderList()},this.getItemPage=function(e,t){var i;if(!p.limit)return 0;var s=p.list;p.filter.enabled&&_&&(s=p.filter.list);for(var n=0;n<s.length;n++)if(s[n][e]===t)return i=Math.floor(n/p.limit)},this.setCSS=function(e){p.css&&$(p.container).find(".ogx_dynamic_list_item").removeClass(p.css),p.css=e,$(p.container).find(".ogx_dynamic_list_item").addClass(e)},this.setTemplate=function(e){p.template=e},this.getList=function(){return p.list?p.list:[]},this.setList=function(e){p.start=0,p.list=e,p.selected=[],p.filter.enabled&&_?(p.filter.list=s(),n(p.filter.list)):n(p.list),p.bind.pager&&(0===p.list.length&&p.bind.pager.setPages(1),p.bind.pager.setPage(0))},this.clearList=function(){$(p.list_container).empty()},this.setMode=function(e){p.mode!==e&&(p.mode=e,u.resetSelection())},this.bind=function(e,i,s,n){"undefined"!=typeof s&&null!==s||(s=i);var l,r;if(l=typeof e,"object"===l){if(e.hasOwnProperty("type")&&e.type)switch(e.type){case"OgxTagManager":p.filter.enabled=!0,y.hasOwnProperty(i)||(y[i]={options:{}}),l=e.getCurrentTags(),r=!1,l.length>0&&(r=!0),y[i].options[s]={obj:e,type:e.type,vals:l,include:r},$(e.el).on(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED,function(n,l){var r=e.getCurrentTags();y[i].options[s].vals=r,y[i].options[s].include=r.length>0,t()});break;case"OgxDynamicPager":p.bind.pager=e,$(e.el).on(OGX.DynamicPager.SELECT_PAGE,function(e,t){p.start=t.page*p.limit,u.renderList()}),p.bind.pager.setPages(Math.ceil(p.list.length/p.limit));break;case"OgxDynamicList":p.filter.enabled=!0,y.hasOwnProperty(i)||(y[i]={options:{}}),y[i].options[s]={obj:e,mode:n,type:e.type,vals:[],include:!1},$(e.el).on(OGX.DynamicList.SELECT+" "+OGX.DynamicList.UNSELECT,function(n,l){for(var r=e.getSelectedItems(),a=[],o=0;o<r.length;o++)a.push(r[o][s]);y[i].options[s].vals=a,y[i].options[s].include=a.length>0,t()})}}else if("string"===l&&$(e).length>0){p.filter.enabled=!0,y.hasOwnProperty(i)||(y[i]={options:{}});var a=$(e).val().trim().toLowerCase();switch(r=!1,a.length>0&&(r=!0),y[i].options[s]={obj:$(e),type:"input",vals:[a],include:r,mode:n},$(e).attr("type").toLowerCase()){case"text":case"range":y[i].options[s].obj.on("input",function(){var e=$(this).val().trim().toLowerCase(),n=e.split(" ");y[i].options[s].vals=n;var l=y[i].options[s].include;y[i].options[s].include=n.length>0,(n.length>0!==l||n.length>0)&&t()})}}},this.unbind=function(e,t){switch("undefined"==typeof t&&(t=e),y[e].options[t].type){case"OgxTagManager":y[e].options[t].obj.el.off(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED);break;case"OgxDynamicPager":y[e].options[t].obj.el.off(OGX.DynamicPager.SELECT_PAGE);break;case"OgxDynamicList":y[e].options[t].obj.el.off(OGX.DynamicList.SELECT+" "+OGX.DynamicList.UNSELECT);break;case"input":y[e].options[t].obj.off("input focusout")}delete y[e].options[t]},this.getSelectedItem=function(){return p.selected[0]},this.getSelectedItems=function(){return p.selected},this.getItem=function(e,t){for(var i=0;i<p.list.length;i++)if(p.list[i][e]&&p.list[i][e]===t)return p.list[i]},this.selectItems=function(e,t,i,s){var n,l=[];"undefined"==typeof i&&(i=!1),"undefined"==typeof s&&(s=!1);for(var r=0;r<p.list.length;r++)p.list[r][e]&&p.list[r][e]===t&&(p.selected.push(p.list[r]),l.push(p.list[r]),n=r,p.bind.pager&&p.limit?n=r+p.bind.pager.getPage()*p.limit:$(p.container).find(".ogx_dynamic_list_item:eq("+r+")").addClass("ogx_dynamic_list_selected_item"));return i||u.renderList(),s&&$(p.container).trigger(OGX.DynamicList.SELECT,p.selected),l},this.selectList=function(e,t,i){for(var s=0;s<p.list.length;s++)p.list[s].hasOwnProperty(e)&&t.indexOf(p.list[s][e])!==-1&&p.selected.push(p.list[s]);i||u.renderList()},this.updateSelectedItem=function(e){p.selected[0]=e,u.renderSelectedItem()},this.updateSelectedItems=function(e){if(p.key){for(var t=0;t<e.length;t++)for(var i=0;i<p.selected.length;i++)if(p.selected[i][p.key]===e[t][p.key]){p.selected[i]=e[t];break}}else for(var t=0;t<e.length;t++)p.selected[t]=e[t];u.renderSelectedItems()},this.renderSelectedItem=function(){var e=$(p.list_container).find(".ogx_dynamic_list_selected_item"),t=OGX.Templater.templatize(p.selected[0]);$(e).html(t),p.trigger&&$(p.container).trigger(OGX.DynamicList.RENDER_ITEM,p.selected[0])},this.renderSelectedItems=function(){var e;if(p.key)for(var t,i=0;i<p.selected.length;i++)t=p.selected[i][p.key],e=l(p.selected[i]),$(p.list_container).find(".ogx_dynamic_list_selected_item[data-"+p.key+'="'+t+'"]').html(e);else $(p.list_container).find(".ogx_dynamic_list_selected_item").each(function(t,i){e=l(p.selected[i]),$(t).html(e)})},this.resetSelection=function(){$(p.list_container).find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item"),p.selected=[]},this.addItem=function(e,t){p.list.push(e),p.filter.enabled&&(p.filter.list=s()),t&&("multi"===p.mode?p.selected.push(e):p.selected=[e]),u.renderList()},this.addItemAt=function(e,t){if(p.list.length>0){var i=p.list.splice(0,t-1);i.push(e);var n=p.list.splice(t);p.list=i.concat(n)}else p.list.push(e);p.filter.enabled&&(p.filter.list=s()),u.renderList()},this.removeItem=function(e,t){for(var i=0;i<p.list.length;i++)if(p.list[i][e]&&p.list[i][e]===t)return p.list.splice(i,1),p.filter.enabled&&(p.filter.list=s()),u.renderList(),!0;return!1},this.removeSelectedItems=function(){for(var e,t=!1;p.selected.length>0;)for(var i=0;i<p.list.length&&(t=!1,p.key?p.list[i][p.key]===p.selected[0][p.key]&&(t=!0):(e=c(p.list[i],p.selected[0]),e&&(t=!0)),!t||(p.list.splice(i,1),p.selected.splice(0,1),i--,0!==p.selected.length));i++);p.filter.enabled&&(p.filter.list=s()),u.renderList()},this.updateItem=function(e,t,i){for(var n=0;n<p.list.length;n++)if(p.list[n][e]===t){p.list[n]=i;break}p.filter.enabled&&(p.filter.list=s()),u.renderList()},this.renderBlock=function(e,t){t&&(p.limit=t),p.start=e*p.limit,u.renderList()},this.renderList=function(){if(p.filter.enabled){var e=s();n(e)}else n(p.list)},this.sortList=function(e,t){p.list&&(d(e,t),p.filter.enabled&&(p.filter.list=s()),u.renderList())},this.destroy=function(){i(),$(p.list_container).off("click",".ogx_dynamic_list_item")},g()},OGX.DynamicList=function(e){"use strict";return new OGX.prototype.DynamicList(e)},OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.FILTER="DynamicListFilter",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.RENDER_ITEM="DynamicListRenderItem";