if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.DynamicList=function(e){"use strict";function t(){_.filter.list=s(),_.start=0,_.bind.pager&&(_.bind.pager.setPages(Math.ceil(_.filter.list.length*_.limit)),_.bind.pager.setPageBlock(0),_.bind.pager.setPage(0)),n(_.filter.list)}function i(){for(var e in h)for(var t in h[e].options)p.unbind(e,t)}function s(){var e,t,i,s,n,l,a,r,o,c,d={},f=[],m=!1;y=!0;for(var g=0;g<_.list.length;g++){r=0,a=0;for(L in h){h[L].matches=0,c=!1,o=0;for(var p in h[L].options)if(h[L].options[p].include&&(c||(c=!0,a++),_.list[g].hasOwnProperty(L)&&(e=String(_.list[g][L]).toLowerCase(),h[L].options[p].vals.length>0))){m=!0;for(var u=0;u<h[L].options[p].vals.length;u++)switch(o++,p){case"min":t=Number(_.list[g][L]),isNaN(t)||t>=Number(h[L].options[p].vals[u])&&h[L].matches++;break;case"max":t=Number(_.list[g][L]),isNaN(t)||t<=Number(h[L].options[p].vals[u])&&h[L].matches++;break;case"in":e.indexOf(h[L].options[p].vals[u].toLowerCase())!==-1&&h[L].matches++;break;case"out":e.indexOf(h[L].options[p].vals[u].toLowerCase())==-1&&h[L].matches++;break;case"from":i=new Date(e),n=i.getTime(),s=new Date(h[L].options[p].vals[u]),l=s.getTime(),n>=l&&h[L].matches++;break;case"to":i=new Date(e),n=i.getTime(),s=new Date(h[L].options[p].vals[u]),l=s.getTime(),n<=l&&h[L].matches++;break;case"include":e.indexOf(h[L].options[p].vals[u].toLowerCase())!==-1&&h[L].matches++;break;case"exclude":e.indexOf(h[L].options[p].vals[u].toLowerCase())==-1&&h[L].matches++;break;default:if(h[L].options[p].hasOwnProperty("mode"))switch(h[L].options[p].mode){case"strict":e.toLowerCase()===h[L].options[p].vals[u].toLowerCase()&&h[L].matches++;break;case"include":e.indexOf(h[L].options[p].vals[u].toLowerCase())!==-1&&h[L].matches++}else e.toLowerCase()===h[L].options[p].vals[u].toLowerCase()&&h[L].matches++}}o===h[L].matches&&o&&r++}r===a&&(d[g]=!0)}if(m)for(var L in d)f.push(_.list[L]);else y=!1,f=_.list;return f}function n(e){if(p.clearList(),"undefined"!=typeof e&&0!==e.length){var t=0,i=e.length;_.limit&&(i=_.limit),_.start&&(t=_.start),i=t+i,i>e.length?i=e.length:null,_.limit&&(_.pages=Math.ceil(e.length/_.limit)),_.bind.pager&&_.bind.pager.setPages(_.pages);for(var s,n,a,r=t;r<i;r++)s='<li class="ogx_dynamic_list_item',n=o(e[r]),e[r].hasOwnProperty("css")&&(s+=" "+e[r].css),_.css&&(s+=" "+_.css),s+=n?' ogx_dynamic_list_selected_item"':'"',_.key&&(s+=" data-"+_.key+'="'+e[r][_.key]+'"'),s+=">",s+=l(e[r]),s+="</li>",_.components?a=$(_.list_container).append(s).get(0):$(_.list_container).append(s);_.trigger&&$(_.container).trigger(OGX.DynamicList.RENDER,p)}}function l(e){return OGX.DynamicList.templateObject(e,_.template)}function a(){$(_.list_container).on("click",".ogx_dynamic_list_item",function(e){if(_.enabled){var t=$(e.currentTarget).index();if(_.bind.pager&&_.limit&&(t+=_.bind.pager.getPage()*_.limit),"multi"===_.mode)return $(this).hasClass("ogx_dynamic_list_selected_item")?($(this).removeClass("ogx_dynamic_list_selected_item"),void(_.filter.enabled&&y?(r(_.filter.list[t]),$(_.container).trigger(OGX.DynamicList.UNSELECT,_.filter.list[t])):(r(_.list[t]),$(_.container).trigger(OGX.DynamicList.UNSELECT,_.list[t])))):($(this).addClass("ogx_dynamic_list_selected_item"),void(_.filter.enabled&&y?(_.selected.push(_.filter.list[t]),$(_.container).trigger(OGX.DynamicList.SELECT,_.filter.list[t])):(_.selected.push(_.list[t]),$(_.container).trigger(OGX.DynamicList.SELECT,_.list[t]))));if("toggle"===_.mode)return $(this).hasClass("ogx_dynamic_list_selected_item")?($(this).removeClass("ogx_dynamic_list_selected_item"),_.selected=[],void(_.filter.enabled&&y?$(_.container).trigger(OGX.DynamicList.UNSELECT,_.filter.list[t]):$(_.container).trigger(OGX.DynamicList.UNSELECT,_.list[t]))):($(_.list_container).find(".ogx_dynamic_list_item").removeClass("ogx_dynamic_list_selected_item"),$(this).addClass("ogx_dynamic_list_selected_item"),void(_.filter.enabled&&y?(_.selected=[_.filter.list[t]],$(_.container).trigger(OGX.DynamicList.SELECT,_.filter.list[t])):(_.selected=[_.list[t]],$(_.container).trigger(OGX.DynamicList.SELECT,_.list[t]))));if($(_.list_container).find(".ogx_dynamic_list_selected_item")[0]==$(this)[0])return;return $(_.list_container).find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item"),$(this).addClass("ogx_dynamic_list_selected_item"),void(_.filter.enabled&&y?(_.selected=[_.filter.list[t]],$(_.container).trigger(OGX.DynamicList.SELECT,_.filter.list[t])):(_.selected=[_.list[t]],$(_.container).trigger(OGX.DynamicList.SELECT,_.list[t])))}})}function r(e){for(var t=!1,i=0;i<_.selected.length;i++)if(t=_.key?e[_.key]===_.selected[i][_.key]:c(e,_.selected[i]))return _.selected.splice(i,1),!0;return!1}function o(e){for(var t=!1,i=0;i<_.selected.length;i++)if(t=_.key?e[_.key]===_.selected[i][_.key]:c(e,_.selected[i]))return!0;return!1}function c(e,t){if(_.key)return e[_.key]===t[_.key];for(var i in e)if(t[i]!==e[i])return!1;return!0}function d(e,t){var i=_.list;return i.sort(f(e,t)),i}function f(e,t){return function(i,s){return i[e]<s[e]?t*-1:i[e]>s[e]?t:0}}function m(){_||(_={});for(var e in u)_.hasOwnProperty(e)||(_[e]=u[e]);p.el=$(_.container)}function g(){m(),$(_.container).append('<ul class="ogx_dynamic_list"></ul>'),_.list_container=$(_.container).find(".ogx_dynamic_list:first"),_.list&&n(_.list),a()}var p=this,_=e,u={container:null,list_container:null,enabled:!0,selectable:!0,key:null,mode:"single",filter:{enabled:!1,list:[]},bind:{pager:null},trigger:!1,limit:10,pages:0,components:!1,list:[],selected:[],css:null},h={},y=!1;this.el=null,this.type="OgxDynamicList",this.enable=function(){_.enabled=!0},this.disable=function(){_.enabled=!1},this.setPage=function(e){_.start=_.limit*e,p.renderList()},this.setLimit=function(e){_.limit=e,p.renderList()},this.getItemPage=function(e,t){var i;if(!_.limit)return 0;var s=_.list;_.filter.enabled&&y&&(s=_.filter.list);for(var n=0;n<s.length;n++)if(s[n][e]===t)return i=Math.floor(n/_.limit)},this.setCSS=function(e){_.css&&$(_.container).find(".ogx_dynamic_list_item").removeClass(_.css),_.css=e,$(_.container).find(".ogx_dynamic_list_item").addClass(e)},this.setTemplate=function(e){_.template=e},this.getList=function(){return _.list?_.list:[]},this.setList=function(e){_.start=0,_.list=e,_.selected=[],_.filter.enabled&&y?(_.filter.list=s(),n(_.filter.list)):n(_.list),_.bind.pager&&(0===_.list.length&&_.bind.pager.setPages(1),_.bind.pager.setPage(0))},this.clearList=function(){$(_.list_container).empty()},this.setMode=function(e){_.mode!==e&&(_.mode=e,p.resetSelection())},this.bind=function(e,i,s,n){"undefined"!=typeof s&&null!==s||(s=i);var l,a;if(l=typeof e,"object"===l){if(e.hasOwnProperty("type")&&e.type)switch(e.type){case"OgxTagManager":_.filter.enabled=!0,h.hasOwnProperty(i)||(h[i]={options:{}}),l=e.getCurrentTags(),a=!1,l.length>0&&(a=!0),h[i].options[s]={obj:e,type:e.type,vals:l,include:a},$(e.el).on(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED,function(n,l){var a=e.getCurrentTags();h[i].options[s].vals=a,h[i].options[s].include=a.length>0,t()});break;case"OgxDynamicPager":_.bind.pager=e,$(e.el).on(OGX.DynamicPager.SELECT_PAGE,function(e,t){_.start=t.page*_.limit,p.renderList()}),_.bind.pager.setPages(Math.ceil(_.list.length/_.limit));break;case"OgxDynamicList":_.filter.enabled=!0,h.hasOwnProperty(i)||(h[i]={options:{}}),h[i].options[s]={obj:e,mode:n,type:e.type,vals:[],include:!1},$(e.el).on(OGX.DynamicList.SELECT+" "+OGX.DynamicList.UNSELECT,function(n,l){for(var a=e.getSelectedItems(),r=[],o=0;o<a.length;o++)r.push(a[o][s]);h[i].options[s].vals=r,h[i].options[s].include=r.length>0,t()})}}else if("string"===l&&$(e).length>0){_.filter.enabled=!0,h.hasOwnProperty(i)||(h[i]={options:{}});var r=$(e).val().trim().toLowerCase();switch(a=!1,r.length>0&&(a=!0),h[i].options[s]={obj:$(e),type:"input",vals:[r],include:a,mode:n},$(e).attr("type").toLowerCase()){case"text":case"range":h[i].options[s].obj.on("input",function(){var e=$(this).val().trim().toLowerCase(),n=e.split(" ");h[i].options[s].vals=n;var l=h[i].options[s].include;h[i].options[s].include=n.length>0,(n.length>0!==l||n.length>0)&&t()})}}},this.unbind=function(e,t){switch("undefined"==typeof t&&(t=e),h[e].options[t].type){case"OgxTagManager":h[e].options[t].obj.el.off(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED);break;case"OgxDynamicPager":h[e].options[t].obj.el.off(OGX.DynamicPager.SELECT_PAGE);break;case"OgxDynamicList":h[e].options[t].obj.el.off(OGX.DynamicList.SELECT+" "+OGX.DynamicList.UNSELECT);break;case"input":h[e].options[t].obj.off("input focusout")}delete h[e].options[t]},this.getSelectedItem=function(){return _.selected[0]},this.getSelectedItems=function(){return _.selected},this.getItem=function(e,t){for(var i=0;i<_.list.length;i++)if(_.list[i][e]&&_.list[i][e]===t)return _.list[i]},this.selectItems=function(e,t,i,s){var n,l=[];"undefined"==typeof i&&(i=!1),"undefined"==typeof s&&(s=!1);for(var a=0;a<_.list.length;a++)_.list[a][e]&&_.list[a][e]===t&&(_.selected.push(_.list[a]),l.push(_.list[a]),n=a,_.bind.pager&&_.limit?n=a+_.bind.pager.getPage()*_.limit:$(_.container).find(".ogx_dynamic_list_item:eq("+a+")").addClass("ogx_dynamic_list_selected_item"));return i||p.renderList(),s&&$(_.container).trigger(OGX.DynamicList.SELECT,_.selected),l},this.selectList=function(e,t,i){for(var s=0;s<_.list.length;s++)_.list[s].hasOwnProperty(e)&&t.indexOf(_.list[s][e])!==-1&&_.selected.push(_.list[s]);i||p.renderList()},this.updateSelectedItem=function(e){_.selected[0]=e,p.renderSelectedItem()},this.updateSelectedItems=function(e){if(_.key){for(var t=0;t<e.length;t++)for(var i=0;i<_.selected.length;i++)if(_.selected[i][_.key]===e[t][_.key]){_.selected[i]=e[t];break}}else for(var t=0;t<e.length;t++)_.selected[t]=e[t];p.renderSelectedItems()},this.renderSelectedItem=function(){var e=$(_.list_container).find(".ogx_dynamic_list_selected_item"),t=l(_.selected[0]);$(e).html(t),_.trigger&&$(_.container).trigger(OGX.DynamicList.RENDER_ITEM,_.selected[0])},this.renderSelectedItems=function(){var e;if(_.key)for(var t,i=0;i<_.selected.length;i++)t=_.selected[i][_.key],e=l(_.selected[i]),$(_.list_container).find(".ogx_dynamic_list_selected_item[data-"+_.key+'="'+t+'"]').html(e);else $(_.list_container).find(".ogx_dynamic_list_selected_item").each(function(t,i){e=l(_.selected[i]),$(t).html(e)})},this.resetSelection=function(){$(_.list_container).find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item"),_.selected=[]},this.addItem=function(e,t){_.list.push(e),_.filter.enabled&&(_.filter.list=s()),t&&("multi"===_.mode?_.selected.push(e):_.selected=[e]),p.renderList()},this.addItemAt=function(e,t){if(_.list.length>0){var i=_.list.splice(0,t-1);i.push(e);var n=_.list.splice(t);_.list=i.concat(n)}else _.list.push(e);_.filter.enabled&&(_.filter.list=s()),p.renderList()},this.removeItem=function(e,t){for(var i=0;i<_.list.length;i++)if(_.list[i][e]&&_.list[i][e]===t)return _.list.splice(i,1),_.filter.enabled&&(_.filter.list=s()),p.renderList(),!0;return!1},this.removeSelectedItems=function(){for(var e,t=!1;_.selected.length>0;)for(var i=0;i<_.list.length&&(t=!1,_.key?_.list[i][_.key]===_.selected[0][_.key]&&(t=!0):(e=c(_.list[i],_.selected[0]),e&&(t=!0)),!t||(_.list.splice(i,1),_.selected.splice(0,1),i--,0!==_.selected.length));i++);_.filter.enabled&&(_.filter.list=s()),p.renderList()},this.updateItem=function(e,t,i){for(var n=0;n<_.list.length;n++)if(_.list[n][e]===t){_.list[n]=i;break}_.filter.enabled&&(_.filter.list=s()),p.renderList()},this.renderBlock=function(e,t){t&&(_.limit=t),_.start=e*_.limit,p.renderList()},this.renderList=function(){if(_.filter.enabled){var e=s();n(e)}else n(_.list)},this.sortList=function(e,t){_.list&&(d(e,t),_.filter.enabled&&(_.filter.list=s()),p.renderList())},this.destroy=function(){i(),$(_.list_container).off("click",".ogx_dynamic_list_item")},g()},OGX.DynamicList=function(e){"use strict";return new OGX.prototype.DynamicList(e)},OGX.DynamicList.templateObject=function(__item,__template){function evalOp(__op){var reg=new RegExp("\\@","g");return __op=__op.replace(reg,"__obj."),eval(__op),!0}function extractOps(){var e=new RegExp("\\$\\([^(]*\\)","g"),t=__template.match(e);if(t)for(var i,s=0;s<t.length;s++)i=t[s].substr(1),__template=__template.replace(t[s],""),evalOp(i)}function scan(e,t){var i;for(var s in e)if(i=t.length>0?t+"."+s:s,"object"==typeof e[s])scan(e[s],i);else{var n=new RegExp("(\\$"+i+")(\\(.*\\))?","g"),l=n.exec(__template);l&&(l[2]?(evalOp(l[2]),__template=__template.replace(l[0],e[s])):__template=__template.replace(l[1],e[s]))}}return extractOps(),scan(__obj,""),__template},OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.FILTER="DynamicListFilter",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.RENDER_ITEM="DynamicListRenderItem";