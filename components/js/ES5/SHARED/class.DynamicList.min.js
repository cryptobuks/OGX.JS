OGX.prototype.DynamicList=function(e){"use strict";function t(){var e;e=u?f:_.list;for(var t,i,n,s="",r=0;r<e.length;r++)t=r,i=!1,n="",_.key&&(t=e[r][_.key],i=O.find(_.key,t,1),i.length&&(n="ogx_dynamic_list_selected_item")),s+='<span class="ogx_dynamic_list_item '+n+" "+_.css+'" data-id='+t+">"+OGX.Templater.templatize(e[r],_.template)+"</span>";d.html(s),_.trigger&&d.trigger(OGX.DynamicList.RENDER)}function i(e,i,n,s){"undefined"!=typeof n&&null!==n||(n=e),"undefined"!=typeof s&&null!==s||(s="eqjson");var r=_.list;if("object"==typeof i)switch(E[e]=i,i.__proto__.constructor){case OGX.prototype.DynamicList:E[e].el.on(OGX.DynamicList.SELECT,function(i,l){r.removeFilter(e),r.addFilter(e,s,l[n]),f=r.filter(),u=!0,t()}),E[e].el.on(OGX.DynamicList.UNSELECT,function(i,n){r.removeFilter(e),f=r.filter(),u=!0,t()});break;case OGX.prototype.TagManager:E[e].el.on(OGX.TagManager.ADD_TAG+" "+OGX.TagManager.REMOVE_TAG,function(i,n){r.removeFilter(e),r.addFilter(e,s,E[e].getCurrentTags()),f=r.filter(),u=!0,t()});break;case OGX.prototype.Switch:E[e].el.on(OGX.Switch.TOGGLE,function(i,n){r.removeFilter(e),r.addFilter(e,s,n),f=r.filter(),u=!0,t()});break;case OGX.prototype.SwitchMulti:E[e].el.on(OGX.DynamicList.CHANGE,function(i,n){r.removeFilter(e),r.addFilter(e,s,n),f=r.filter(),u=!0,t()})}else if("string"==typeof i){if(0===$(i).length)return!1;switch(E[e]=$(i),$(i).attr("type").toLowerCase()){case"text":case"number":case"email":case"password":E[e].on("input",function(){r.removeFilter(e),r.addFilter(e,s,$(this).val()),f=r.filter(),u=!0,t()});break;case"range":var l;E[e].on("input",function(){l=Number($(this).attr("min")),r.removeFilter(e),r.addFilter(e,s,[l,$(this).val()]),f=r.filter(),u=!0,t()})}}}function n(e){if("object"==typeof E[e]){switch(__obj.__proto__.constructor){case OGX.prototype.DynamicList:E[e].el.off(OGX.DynamicList.SELECT),E[e].el.off(OGX.DynamicList.UNSELECT);break;case OGX.prototype.TagManager:E[e].el.off(OGX.TagManager.ADD_TAG+" "+OGX.TagManager.REMOVE_TAG);break;case OGX.prototype.Switch:E[e].el.off(OGX.Switch.TOGGLE);break;case OGX.prototype.SwitchMulti:E[e].el.off(OGX.DynamicList.CHANGE)}list.removeFilter(e),f=list.filter(),u=!0,t()}else E[e].off("input"),list.removeFilter(e),u=!0,t();return!0}function s(){for(var e in E)n(e)}function r(e){e?d.on("click",".ogx_dynamic_list_item",function(){switch(_.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:$(this).hasClass("ogx_dynamic_list_selected_item")||(o($(this).index(),!0),d.trigger(OGX.DynamicList.SELECT,O[O.length-1]));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:$(this).hasClass("ogx_dynamic_list_selected_item")?(o($(this).index(),!1),d.trigger(OGX.DynamicList.UNSELECT)):(m.resetSelection(),o($(this).index(),!0),d.trigger(OGX.DynamicList.SELECT,O[O.length-1]));break;case OGX.DynamicList.SELECT_MODE_MULTI:$(this).hasClass("ogx_dynamic_list_selected_item")?(o($(this).index(),!1),d.trigger(OGX.DynamicList.UNSELECT)):(o($(this).index(),!0),d.trigger(OGX.DynamicList.SELECT,O))}}):d.off("click",".ogx_dynamic_list_item")}function l(e,t,i){"single"===_.mode&&m.resetSelection();var n=!1;t instanceof RegExp&&(n=!0);var s,r,l,o=!1;s=u?f:_.list;for(var a=0;a<s.length;a++)if(!n&&s[a][e]===t&&(selected.push(s[a]),l=_.key?s[a][l]:a,r=d.find(".ogx_dynamic_list_item[data-id="+l+"]:first"),i?r.addClass("ogx_dynamic_list_selected_item"):r.removeClass("ogx_dynamic_list_selected_item"),o=!0,"single"===_.mode))return o;return o}function o(e,t){var i,n;if(i=d.find(".ogx_dynamic_list_item:eq("+e+")"),i.length>0){if(n=u?f:_.list,_.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&m.resetSelection(),t)i.addClass("ogx_dynamic_list_selected_item"),u?O.push(n[e]):O.push(n[e]);else if(i.removeClass("ogx_dynamic_list_selected_item"),_.key){O.findDelete(_.key,i.data("id"),1)}else{var s=n[e];s=JSON.stringify(s);for(var r=0;r<O.length;r++)if(JSON.stringify(O[r])===s){O.delete(r);break}}return!0}return!1}function a(){_||(_={});for(var e in y)_.hasOwnProperty(e)||(_[e]=y[e]);_.list.length>0&&!_.list.hasOwnProperty("insert")&&(_.list=new OGX.List(_.list)),m.el=d=$(_.container),d.addClass("ogx_dynamic_list")}function c(){return"undefined"==typeof OGX.Templater?void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):"undefined"==typeof OGX.List?void console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000"):(a(),t(),void(_.enabled&&r(!0)))}var d,f,u,m=this,_=e,y={container:null,enabled:!0,key:null,mode:OGX.DynamicList.SELECT_MODE_SINGLE,render_mode:OGX.DynamicList.RENDER_MODE_SIMPLE,trigger:!1,css:null,key:null},O=new OGX.List,E={};this.el=null,this.enable=function(){return!_.enabled&&(_.enabled=!0,r(!0),!0)},this.disable=function(){return!!_.enabled&&(_.enabled=!1,r(!1),!0)},this.bind=function(e,t,n,s){return!E.hasOwnProperty(e)&&i(e,t,n,s)},this.unbind=function(e){return!!E.hasOwnProperty(e)&&n(e)},this.order=function(e,i){_.list.order(e,i),t()},this.filter=function(){f=_.list.filter(),u=!0,t()},this.unfilter=function(){u=!1,t()},this.addFilter=function(e,t,i){return _.list.addFilter(e,t,i)},this.removeFilter=function(e,t,i){return _.list.removeFilter(e,t,i)},this.resetFilters=function(){return _.list.resetFilters()},this.getFilters=function(){return _.list.getFilters()},this.insert=function(e,t){return"undefined"==typeof t?(_.list.push(e),!0):_.list.insert(e,t)},this.delete=function(e){return _.list.delete(e)},this.deleteSelection=function(){var e;e=u?f:_.list;for(var i=0;i<O.length;i++)if(_.key)e.findDelete(_.key,O[i][_.key],1);else for(var n=0;n<e.length;n++)JSON.stringify(O[i])===e[n]&&(O.delete(i),e.delete(n),i--,n--);t()},this.select=function(e,t){return l(e,t,!0)},this.selectIndex=function(e){return o(e,!0)},this.unselect=function(e,t){return l(e,t,!1)},this.unselectIndex=function(e){return o(e,!1)},this.resetSelection=function(){O=new OGX.List,d.find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item")},this.getSelection=function(){return O},this.replace=function(e,i,n,s){_.list.findReplace(e,i,n)&&("undefined"==typeof s||s)&&t()},this.update=function(e,i,n,s,r){_.list.findUpdate(e,i,n,s)&&("undefined"==typeof r||r)&&t()},this.refresh=function(){var e,t=d.find(".ogx_dynamic_list_seleted_item:first");e=u?f:_.list;var i=OGX.Templater.templatize(e[t.index()],_.template);t.html(i)},this.val=function(e){return"undefined"==typeof e?_.list:(e>0&&!e.hasOwnProperty("insert")&&(e=new OGX.List(e)),_.list=e,void t())},this.destroy=function(){s(),_.enabled&&r(!1),d.empty(),d.removeClass("ogx_dynamic_list")},this.render=function(){t()},c()},OGX.DynamicList=function(e){"use strict";return new OGX.prototype.DynamicList(e)},OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.RENDER_MODE_SIMPLE="DynamicListRenderModeSimple",OGX.DynamicList.RENDER_MODE_SCROLL="DynamicListRenderModeScroll";