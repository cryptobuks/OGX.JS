OGX.prototype.DynamicList=function(e){"use strict";function t(){for(var e,t,i,n=o(),r="",s=0;s<n.length;s++)e=s,t=!1,i="",e=n[s][g.key],t=p.find(g.key,e,1),t.length&&(i="ogx_dynamic_list_selected_item"),r+='<span class="ogx_dynamic_list_item '+i+" "+g.css+'" data-id='+e+">"+OGX.Templater.templatize(n[s],g.template)+"</span>";m.html(r),g.trigger&&m.trigger(OGX.DynamicList.RENDER)}function i(e,i,n,r){"undefined"!=typeof n&&null!==n||(n=e),"undefined"!=typeof r&&null!==r||(r="eqjson");var s=g.list;if("object"==typeof i)switch(L[e]=i,i.__proto__.constructor){case OGX.prototype.DynamicList:L[e].el.on(OGX.DynamicList.SELECT,function(i,l){s.removeFilter(e),s.addFilter(e,r,l[n]),u=s.filter(),y=!0,t()}),L[e].el.on(OGX.DynamicList.UNSELECT,function(i,n){s.removeFilter(e),u=s.filter(),y=!0,t()});break;case OGX.prototype.TagManager:L[e].el.on(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED,function(i,n){s.removeFilter(e),s.addFilter(e,r,L[e].getCurrentTags()),u=s.filter(),y=!0,t()});break;case OGX.prototype.Switch:L[e].el.on(OGX.Switch.TOGGLE,function(i,n){s.removeFilter(e),s.addFilter(e,r,n),u=s.filter(),y=!0,t()});break;case OGX.prototype.SwitchMulti:L[e].el.on(OGX.DynamicList.CHANGE,function(i,n){s.removeFilter(e),s.addFilter(e,r,n),u=s.filter(),y=!0,t()})}else if("string"==typeof i){if(0===$(i).length)return!1;switch(L[e]=$(i),$(i).attr("type").toLowerCase()){case"text":case"number":case"email":case"password":L[e].on("input",function(){s.removeFilter(e),s.addFilter(e,r,$(this).val()),u=s.filter(),y=!0,t()});break;case"range":var l;L[e].on("input",function(){l=Number($(this).attr("min")),s.removeFilter(e),s.addFilter(e,r,[l,$(this).val()]),u=s.filter(),y=!0,t()})}}}function n(e){if("object"==typeof L[e]){switch(L[e].__proto__.constructor){case OGX.prototype.DynamicList:L[e].el.off(OGX.DynamicList.SELECT),L[e].el.off(OGX.DynamicList.UNSELECT);break;case OGX.prototype.TagManager:L[e].el.off(OGX.TagManager.TAG_ADDED+" "+OGX.TagManager.TAG_REMOVED);break;case OGX.prototype.Switch:L[e].el.off(OGX.Switch.TOGGLE);break;case OGX.prototype.SwitchMulti:L[e].el.off(OGX.DynamicList.CHANGE)}g.list.removeFilter(e),u=g.list.filter(),y=!0,t()}else L[e].off("input"),g.list.removeFilter(e),y=!0,t();return!0}function r(){for(var e in L)n(e)}function s(e){e?m.on("click",".ogx_dynamic_list_item",function(){switch(g.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:$(this).hasClass("ogx_dynamic_list_selected_item")||(a($(this).index(),!0),m.trigger(OGX.DynamicList.SELECT,p[p.length-1]));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:$(this).hasClass("ogx_dynamic_list_selected_item")?(a($(this).index(),!1),m.trigger(OGX.DynamicList.UNSELECT)):(h.resetSelection(),a($(this).index(),!0),m.trigger(OGX.DynamicList.SELECT,p[p.length-1]));break;case OGX.DynamicList.SELECT_MODE_MULTI:$(this).hasClass("ogx_dynamic_list_selected_item")?(a($(this).index(),!1),m.trigger(OGX.DynamicList.UNSELECT)):(a($(this).index(),!0),m.trigger(OGX.DynamicList.SELECT,p))}}):m.off("click",".ogx_dynamic_list_item")}function l(e,t,i){"single"===g.mode&&h.resetSelection();var n=!1;t instanceof RegExp&&(n=!0);for(var r,s=o(),l=!1,a=0;a<s.length;a++)if(!n&&s[a][e]===t&&(p.push(s[a]),r=m.find(".ogx_dynamic_list_item[data-id="+s[a][g.key]+"]:first"),i?r.addClass("ogx_dynamic_list_selected_item"):r.removeClass("ogx_dynamic_list_selected_item"),l=!0,"single"===g.mode))return l;return l}function a(e,t){var i,n=o();if(i=m.find(".ogx_dynamic_list_item:eq("+e+")"),i.length>0){if(g.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&h.resetSelection(),t)i.addClass("ogx_dynamic_list_selected_item"),y?p.push(n[e]):p.push(n[e]);else{i.removeClass("ogx_dynamic_list_selected_item");p.findDelete(g.key,i.data("id"),1)}return!0}return!1}function o(){return y?u:g.list}function c(){for(var e=0;e<g.list.length;e++)g.list[e].__id__=G,G++}function d(e){for(var t=0;t<e.length;t++)delete e[t].__id__;return e}function f(){g||(g={});for(var e in O)g.hasOwnProperty(e)||(g[e]=O[e]);g.list.length>0&&!g.list.hasOwnProperty("insert")&&(g.list=new OGX.List(g.list)),!g.key&&g.list.length>0&&(c(),g.key="__id__",E=!0),$(g.container).append('<div class="ogx_dynamic_list"></div>'),h.el=m=$(g.container).children(".ogx_dynamic_list:first")}function _(){return"undefined"==typeof OGX.Templater?void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):"undefined"==typeof OGX.List?void console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000"):(f(),t(),void(g.enabled&&s(!0)))}var m,u,y,h=this,g=e,O={container:null,enabled:!0,key:!1,list:[],mode:OGX.DynamicList.SELECT_MODE_SINGLE,render_mode:OGX.DynamicList.RENDER_MODE_SIMPLE,trigger:!1,css:""},p=new OGX.List,L={},E=!1,G=1;this.el=null,this.val=function(e){if("undefined"==typeof e){if(E){var i=JSON.stringify(JSON.parse(g.list));return d(i)}return g.list}e.hasOwnProperty("insert")||(e=new OGX.List(e)),g.list=e,t()},this.enable=function(){return!g.enabled&&(g.enabled=!0,s(!0),!0)},this.disable=function(){return!!g.enabled&&(g.enabled=!1,s(!1),!0)},this.bind=function(e,t,n,r){return!L.hasOwnProperty(e)&&i(e,t,n,r)},this.unbind=function(e){return!!L.hasOwnProperty(e)&&n(e)},this.order=function(e,i){g.list.order(e,i),t()},this.filter=function(){u=g.list.filter(),y=!0,t()},this.unfilter=function(){y=!1,t()},this.addFilter=function(e,t,i){return g.list.addFilter(e,t,i)},this.removeFilter=function(e,t,i){return g.list.removeFilter(e,t,i)},this.resetFilters=function(){return g.list.resetFilters()},this.getFilters=function(){return g.list.getFilters()},this.insert=function(e,t){E&&(e.__id__=G++);var i,n=!0;if(y){var r=new OGX.List(e);r.setFilters(g.list.getFilters()),0===r.filter().length&&(n=!1)}var s='<span class="ogx_dynamic_list_item '+g.css+'" data-id='+e[g.key]+">"+OGX.Templater.templatize(e,g.template)+"</span>";if("undefined"==typeof t)g.list.push(e),n&&m.append(s);else if(g.list.insert(e,t),n){if(y)u=g.list.filter(),i=u.findIndex(g.key,e[g.key]);else{if(0===t)return m.prepend(s),!0;i=g.list.findIndex(g.key,e[g.key])}var l=m.children(".ogx_dynamic_list_item:nth-child("+(i.index+1)+")");l.length>0?l.before(s):m.append(s)}return n},this.delete=function(e){return g.list.delete(e)&&m.children(".ogx_dynamic_list_item:eq("+e+")").remove(),!0},this.deleteSelection=function(){for(var e=o(),t=0;t<p.length;t++)e.findDelete(key,p[t][g.key],1),m.children(".ogx_dynamic_list_selected_item").remove();return!0},this.findDelete=function(e,t,i){for(var n=g.list.findDelete(e,t,i),r=0;r<n.length;r++)m.children(".ogx_dynamic_list_item[data-id="+n[r][g.key]+"]:first").remove();return n.length},this.select=function(e,t){return l(e,t,!0)},this.selectIndex=function(e){return a(e,!0)},this.unselect=function(e,t){return l(e,t,!1)},this.unselectIndex=function(e){return a(e,!1)},this.resetSelection=function(){p=new OGX.List,m.children(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item")},this.getSelection=function(){if(E){var e=JSON.stringify(JSON.parse(p));return d(e)}return p},this.replace=function(e,t,i){E&&(i.__id__=G++);var n=g.list.findReplace(e,t,i,1);if(n.length>0){var r=m.children(".ogx_dynamic_list_item[data-id="+n[0][g.key]+"]:first"),s=OGX.Templater.templatize(i,g.template);return r.attr("data-id",i[g.key]),r.html(s),!0}return!1},this.update=function(e,t,i,n,r){var s,l,a=g.list.findUpdate(e,t,i,n,r);if(a.length>0){for(var o=0;o<a.length;o++)s=m.children(".ogx_dynamic_list_item[data-id="+a[o][g.key]+"]:first"),s.length>0&&(l=OGX.Templater.templatize(a[o],g.template),s.html(l));return a.length}return!1},this.clear=function(){m.empty()},this.reset=function(){m.empty(),y=!1,g.list=new OGX.List,p=new OGX.List,u=new OGX.List},this.destroy=function(){r(),g.enabled&&s(!1),m.empty(),m.removeClass("ogx_dynamic_list")},this.render=function(){t()},_()},OGX.DynamicList=function(e){"use strict";return new OGX.prototype.DynamicList(e)},OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.RENDER_MODE_SIMPLE="DynamicListRenderModeSimple",OGX.DynamicList.RENDER_MODE_SCROLL="DynamicListRenderModeScroll";