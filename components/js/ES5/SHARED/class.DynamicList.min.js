OGX.prototype.DynamicList=function(e){"use strict";function t(){var e;e=m?u:O.list;for(var t,i,n,s="",r=0;r<e.length;r++)t=r,i=!1,n="",t=e[r][O.key],i=E.find(O.key,t,1),i.length&&(n="ogx_dynamic_list_selected_item"),s+='<span class="ogx_dynamic_list_item '+n+" "+O.css+'" data-id='+t+">"+OGX.Templater.templatize(e[r],O.template)+"</span>";_.html(s),O.trigger&&_.trigger(OGX.DynamicList.RENDER)}function i(e,i,n,s){"undefined"!=typeof n&&null!==n||(n=e),"undefined"!=typeof s&&null!==s||(s="eqjson");var r=O.list;if("object"==typeof i)switch(L[e]=i,i.__proto__.constructor){case OGX.prototype.DynamicList:L[e].el.on(OGX.DynamicList.SELECT,function(i,l){r.removeFilter(e),r.addFilter(e,s,l[n]),u=r.filter(),m=!0,t()}),L[e].el.on(OGX.DynamicList.UNSELECT,function(i,n){r.removeFilter(e),u=r.filter(),m=!0,t()});break;case OGX.prototype.TagManager:L[e].el.on(OGX.TagManager.ADD_TAG+" "+OGX.TagManager.REMOVE_TAG,function(i,n){r.removeFilter(e),r.addFilter(e,s,L[e].getCurrentTags()),u=r.filter(),m=!0,t()});break;case OGX.prototype.Switch:L[e].el.on(OGX.Switch.TOGGLE,function(i,n){r.removeFilter(e),r.addFilter(e,s,n),u=r.filter(),m=!0,t()});break;case OGX.prototype.SwitchMulti:L[e].el.on(OGX.DynamicList.CHANGE,function(i,n){r.removeFilter(e),r.addFilter(e,s,n),u=r.filter(),m=!0,t()})}else if("string"==typeof i){if(0===$(i).length)return!1;switch(L[e]=$(i),$(i).attr("type").toLowerCase()){case"text":case"number":case"email":case"password":L[e].on("input",function(){r.removeFilter(e),r.addFilter(e,s,$(this).val()),u=r.filter(),m=!0,t()});break;case"range":var l;L[e].on("input",function(){l=Number($(this).attr("min")),r.removeFilter(e),r.addFilter(e,s,[l,$(this).val()]),u=r.filter(),m=!0,t()})}}}function n(e){if("object"==typeof L[e]){switch(__obj.__proto__.constructor){case OGX.prototype.DynamicList:L[e].el.off(OGX.DynamicList.SELECT),L[e].el.off(OGX.DynamicList.UNSELECT);break;case OGX.prototype.TagManager:L[e].el.off(OGX.TagManager.ADD_TAG+" "+OGX.TagManager.REMOVE_TAG);break;case OGX.prototype.Switch:L[e].el.off(OGX.Switch.TOGGLE);break;case OGX.prototype.SwitchMulti:L[e].el.off(OGX.DynamicList.CHANGE)}list.removeFilter(e),u=list.filter(),m=!0,t()}else L[e].off("input"),list.removeFilter(e),m=!0,t();return!0}function s(){for(var e in L)n(e)}function r(e){e?_.on("click",".ogx_dynamic_list_item",function(){switch(O.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:$(this).hasClass("ogx_dynamic_list_selected_item")||(o($(this).index(),!0),_.trigger(OGX.DynamicList.SELECT,E[E.length-1]));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:$(this).hasClass("ogx_dynamic_list_selected_item")?(o($(this).index(),!1),_.trigger(OGX.DynamicList.UNSELECT)):(y.resetSelection(),o($(this).index(),!0),_.trigger(OGX.DynamicList.SELECT,E[E.length-1]));break;case OGX.DynamicList.SELECT_MODE_MULTI:$(this).hasClass("ogx_dynamic_list_selected_item")?(o($(this).index(),!1),_.trigger(OGX.DynamicList.UNSELECT)):(o($(this).index(),!0),_.trigger(OGX.DynamicList.SELECT,E))}}):_.off("click",".ogx_dynamic_list_item")}function l(e,t,i){"single"===O.mode&&y.resetSelection();var n=!1;t instanceof RegExp&&(n=!0);var s,r,l=!1;s=m?u:O.list;for(var o=0;o<s.length;o++)if(!n&&s[o][e]===t&&(selected.push(s[o]),r=_.find(".ogx_dynamic_list_item[data-id="+s[o][key]+"]:first"),i?r.addClass("ogx_dynamic_list_selected_item"):r.removeClass("ogx_dynamic_list_selected_item"),l=!0,"single"===O.mode))return l;return l}function o(e,t){var i,n;if(i=_.find(".ogx_dynamic_list_item:eq("+e+")"),i.length>0){if(n=m?u:O.list,O.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&y.resetSelection(),t)i.addClass("ogx_dynamic_list_selected_item"),m?E.push(n[e]):E.push(n[e]);else{i.removeClass("ogx_dynamic_list_selected_item");E.findDelete(O.key,i.data("id"),1)}return!0}return!1}function a(){for(var e=1,t=0;t<list.length;t++)list[t].__id__=e,e++}function c(e){for(var t=0;t<list.length;t++)delete e[t].__id__;return e}function d(){O||(O={});for(var e in g)O.hasOwnProperty(e)||(O[e]=g[e]);O.list.length>0&&!O.list.hasOwnProperty("insert")&&(O.list=new OGX.List(O.list)),!O.key&&O.list.length>0&&(a(),O.key="__id__",h=!0),y.el=_=$(O.container),_.addClass("ogx_dynamic_list")}function f(){return"undefined"==typeof OGX.Templater?void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):"undefined"==typeof OGX.List?void console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000"):(d(),t(),void(O.enabled&&r(!0)))}var _,u,m,y=this,O=e,g={container:null,enabled:!0,key:null,mode:OGX.DynamicList.SELECT_MODE_SINGLE,render_mode:OGX.DynamicList.RENDER_MODE_SIMPLE,trigger:!1,css:null,key:null},E=new OGX.List,L={},h=!1;this.el=null,this.enable=function(){return!O.enabled&&(O.enabled=!0,r(!0),!0)},this.disable=function(){return!!O.enabled&&(O.enabled=!1,r(!1),!0)},this.bind=function(e,t,n,s){return!L.hasOwnProperty(e)&&i(e,t,n,s)},this.unbind=function(e){return!!L.hasOwnProperty(e)&&n(e)},this.order=function(e,i){O.list.order(e,i),t()},this.filter=function(){u=O.list.filter(),m=!0,t()},this.unfilter=function(){m=!1,t()},this.addFilter=function(e,t,i){return O.list.addFilter(e,t,i)},this.removeFilter=function(e,t,i){return O.list.removeFilter(e,t,i)},this.resetFilters=function(){return O.list.resetFilters()},this.getFilters=function(){return O.list.getFilters()},this.insert=function(e,t){return"undefined"==typeof t?(O.list.push(e),!0):O.list.insert(e,t)},this.delete=function(e){return O.list.delete(e)},this.deleteSelection=function(){var e;e=m?u:O.list;for(var t=0;t<E.length;t++)e.findDelete(key,E[t][O.key],1),_.find(".ogx_dynamic_list_selected_item").remove()},this.select=function(e,t){return l(e,t,!0)},this.selectIndex=function(e){return o(e,!0)},this.unselect=function(e,t){return l(e,t,!1)},this.unselectIndex=function(e){return o(e,!1)},this.resetSelection=function(){E=new OGX.List,_.find(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item")},this.getSelection=function(){if(h){var e=JSON.stringify(JSON.parse(E));return c(e)}return E},this.replace=function(e,i,n,s){O.list.findReplace(e,i,n)&&("undefined"==typeof s||s)&&t()},this.update=function(e,i,n,s,r){O.list.findUpdate(e,i,n,s)&&("undefined"==typeof r||r)&&t()},this.refresh=function(){var e,t=_.find(".ogx_dynamic_list_seleted_item:first");e=m?u:O.list;var i=OGX.Templater.templatize(e[t.index()],O.template);t.html(i)},this.val=function(e){if("undefined"==typeof e){if(h){var i=JSON.stringify(JSON.parse(O.list));return c(i)}return O.list}e>0&&!e.hasOwnProperty("insert")&&(e=new OGX.List(e)),O.list=e,t()},this.destroy=function(){s(),O.enabled&&r(!1),_.empty(),_.removeClass("ogx_dynamic_list")},this.render=function(){t()},f()},OGX.DynamicList=function(e){"use strict";return new OGX.prototype.DynamicList(e)},OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.RENDER_MODE_SIMPLE="DynamicListRenderModeSimple",OGX.DynamicList.RENDER_MODE_SCROLL="DynamicListRenderModeScroll";