if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendar=function(e){"use strict";function a(){switch(y.find(".ogx_flex_calendar_date:first").html(p.date.format(p.format)),p.mode){case OGX.FlexCalendar.MODE_MONTH:n();break;case OGX.FlexCalendar.MODE_WEEK:d();break;case OGX.FlexCalendar.MODE_DAY:l()}}function n(){var e=p.date.clone();e.subtract(1,"month");for(var a,n,d,l,r,_,o=u.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first"),i=0;i<3;i++){a=o.children(".ogx_infinite_swiper_item:eq("+i+")"),n=e.daysInMonth(),d="",_=e.format("YYYY-MM"),l=moment(_+"-01"),r=l.weekday();for(var t=0;t<r;t++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';for(t=0;t<n;t++)d+='<div class="ogx_flex_calendar_day" data-date="'+_+"-"+String(t+1).padStart(2,"0")+'"><span class="ogx_flex_calendar_day_label">'+(t+1)+'</span><span class="ogx_flex_calendar_day_content"></span></div>';for(t=0;t<35-r-n;t++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';a.html(d),p.render&&p.render.month&&a.children(".ogx_flex_calendar_day[data-date]").each(function(e,a){C.month.render($(a).children(".ogx_flex_calendar_day_content:first"),p.data,_+"-"+String(e+1).padStart(2,"0"))}),e.add(1,"month")}}function d(){var e=p.date.clone();e.subtract(14,"days");for(var a,n,d,l=u.el.find(".ogx_infinite_swiper_container:first"),r=0;r<3;r++){a=l.children(".ogx_infinite_swiper_item:eq("+r+")"),n=7,d="";for(var _=0;_<n;_++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_week"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("DD")+'</span><span class="ogx_flex_calendar_day_content"></span></div>';a.html(d)}}function l(){var e=p.date.clone();e.subtract(2,"day");var a,n,d=h.el.find(".ogx_infinite_swiper_container:first");y.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day").removeClass("ogx_flex_calendar_current_weekday");for(var l=0;l<3;l++)a=d.children(".ogx_infinite_swiper_item:eq("+l+")"),n='<div class="ogx_flex_calendar_day ogx_flex_calendar_full_day"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("D")+'</span><div class="ogx_flex_calendar_day_content"></div></div>',a.html(n),1===l&&y.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day:eq("+e.weekday()+")").addClass("ogx_flex_calendar_current_weekday"),p.render&&p.render.day&&C.day.render(a.children(".ogx_flex_calendar_day:last").children(".ogx_flex_calendar_day_content:first")[0],p.data,e)}function r(e){var a;console.log("show",e),e?(i(!1),p.mode=OGX.FlexCalendar.MODE_DAY,u.disable(),u.el.prepend('<div class="ogx_flex_calendar_swiper_day"></div>'),a=u.el.find(".ogx_flex_calendar_swiper_day:first"),h=new OGX.InfiniteSwiper({container:a[0]}),a.css("opacity",1),l(),t(!0)):(p.mode=OGX.FlexCalendar.MODE_MONTH,t(!1),n(),_(p.date.format("YYYY-MM-DD"),!1),a=u.el.find(".ogx_flex_calendar_swiper_day:first"),a.css("opacity",0),setTimeout(function(){h.destroy(),u.el.find(".ogx_flex_calendar_swiper_day:first").remove(),o(!0),u.enable(),i(!0)},0))}function _(e,a){console.log("select",e),p.date=moment(e);var n,d=u.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)"),l=d.find('.ogx_flex_calendar_day[data-date="'+e+'"]:first')[0];d.find(".ogx_flex_calendar_day").each(function(e,d){n=$(d),a?n.removeClass("ogx_flex_calendar_anim_off"):n.addClass("ogx_flex_calendar_anim_off"),n.removeClass("ogx_flex_calendar_selected_day"),n.removeClass("ogx_flex_calendar_shrunk_day"),n.removeClass("ogx_flex_calendar_full_day"),l===d?(n.addClass("ogx_flex_calendar_selected_day"),n.addClass("ogx_flex_calendar_full_day")):n.addClass("ogx_flex_calendar_shrunk_day")})}function o(e){console.log("unselect");var a,n=u.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)");n.find(".ogx_flex_calendar_day").each(function(n,d){a=$(d),e?a.removeClass("ogx_flex_calendar_anim_off"):a.addClass("ogx_flex_calendar_anim_off"),a.removeClass("ogx_flex_calendar_selected_day"),a.removeClass("ogx_flex_calendar_shrunk_day"),a.removeClass("ogx_flex_calendar_full_day")})}function i(e){console.log("listen main cal",e),e?u.el.on("click",".ogx_flex_calendar_day",function(){$(this).hasClass("ogx_flex_calendar_selected_day")||$(this).hasClass("ogx_flex_calendar_offset")?o(!0):(_($(this).data("date"),!0),setTimeout(function(){r(!0)},400))}):u.el.off("click",".ogx_flex_calendar_day")}function t(e){console.log("listen day cal",e),e?h.el.on("click",".ogx_flex_calendar_day",function(){_(p.date.format("YYYY-MM-DD")),r(!1)}):h.el.off("click",".ogx_flex_calendar_day")}function s(e){e?(y.on(OGX.InfiniteSwiper.SWIPE_LEFT,function(){switch(p.mode){case OGX.FlexCalendar.MODE_MONTH:p.date.add(1,"month");break;case OGX.FlexCalendar.MODE_WEEK:p.date.add(7,"days");break;case OGX.FlexCalendar.MODE_DAY:p.date.add(1,"days")}a()}),y.on(OGX.InfiniteSwiper.SWIPE_RIGHT,function(){switch(p.mode){case OGX.FlexCalendar.MODE_MONTH:p.date.subtract(1,"month");break;case OGX.FlexCalendar.MODE_WEEK:p.date.subtract(7,"days");break;case OGX.FlexCalendar.MODE_DAY:p.date.subtract(1,"days")}a()})):(y.off(OGX.InfiniteSwiper.SWIPE_LEFT),y.off(OGX.InfiniteSwiper.SWIPE_RIGHT))}function c(){u=new OGX.InfiniteSwiper({container:m}),s(!0)}function f(){var e=[];if(!p.render)return e;OGX.hasOwnProperty("FlexCalendarRenderer")||e.push("FlexCalendarRenderer");for(var a in p.render)p.render[a]&&(OGX.hasOwnProperty(p.render[a])?C[a]=new OGX[p.render[a]]:e.push(p.render[a]));return e}function x(){for(var e in v)p.hasOwnProperty(e)||(p[e]=v[e]);for(var a='<div class="ogx_flex_calendar"><div class="ogx_flex_calendar_head"><div class="ogx_flex_calendar_date">'+p.date.format("YYYY-MM")+'</div><div class="ogx_flex_calendar_days">',n=0;n<p.labels.length;n++)a+='<span class="ogx_flex_calendar_days_day">'+p.labels[n]+"</span>";a+='</div></div><div class="ogx_flex_calendar_swiper"></div></div>',$(p.container).html(a),O.el=y=$(p.container),m=y.find(".ogx_flex_calendar_swiper:first")}function g(){if("undefined"==typeof OGX.InfiniteSwiper)return void console.log("%c CRITICAL ERROR - OGX.InfiniteSwiper not found! ","background:#222; color: #FF0000");if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");moment.isMoment(p.date)||(p.date=moment(p.date)),x();var e=f();if(e.length)for(var n=0;n<e.length;n++)console.log("%c CRITICAL ERROR - OGX."+e[n]+" not found! ","background:#222; color: #FF0000");else c(),a(),i(!0)}var y,m,u,h,O=this,p=e,v={date:moment(),mode:OGX.FlexCalendar.MODE_MONTH,render:{month:"FlexCalendarTotalRenderer",day:"FlexCalendarDayRenderer"},labels:["Sun","Mon","Tus","Wed","Thu","Fri","Sat"],format:"YYYY-MM"},C={};this.val=function(e){return"undefined"!=typeof e?p.date.format("YYYY-MM-DD"):(moment.isMoment(e)||(p.date=moment(e)),void a())},this.destroy=function(){h&&(t(!1),h.destroy()),i(!1),s(!1),u.destroy()},g()},OGX.FlexCalendar=function(e){"use strict";return new OGX.prototype.FlexCalendar(e)},OGX.FlexCalendar.MODE_MONTH="FlexCalendarModeMonth",OGX.FlexCalendar.MODE_WEEK="FlexCalendarModeWeek",OGX.FlexCalendar.MODE_DAY="FlexCalendarModeDay";