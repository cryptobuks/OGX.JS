if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendar=function(e){"use strict";function a(){switch(v.find(".ogx_flex_calendar_date:first").html(I.date.format(I.format)),I.view){case OGX.FlexCalendar.VIEW_MONTH:setTimeout(function(){n(),E||(E=1e3*Number($(".ogx_flex_calendar_day").css("transition-duration").split("s")[0]))},0);break;case OGX.FlexCalendar.VIEW_WEEK:d();break;case OGX.FlexCalendar.VIEW_DAY:l()}}function n(){var e=moment().format("YYYY-MM-DD"),a=I.date.clone();a.subtract(1,"month");for(var n,d,l,_,t,i,o,s,f=C.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first"),c=0;c<3;c++){n=f.children(".ogx_infinite_swiper_item:eq("+c+")"),d=a.daysInMonth(),l="",i=a.format("YYYY-MM"),_=moment(i+"-01"),t=_.weekday();for(var x=0;x<t;x++)l+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';for(x=0;x<d;x++)s=i+"-"+r(String(x+1),2,"0"),o="",s===e&&(o+=" ogx_flex_calendar_today_day"),l+='<div class="ogx_flex_calendar_day'+o+'" data-date="'+s+'"><span class="ogx_flex_calendar_day_label">'+(x+1)+'</span><span class="ogx_flex_calendar_day_content" style="height:'+w+'px;"></span></div>';for(x=0;x<42-t-d;x++)l+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';n.html(l),I.render&&I.render.month&&I.data&&n.children(".ogx_flex_calendar_day[data-date]").each(function(e,a){Y.month.render($(a).children(".ogx_flex_calendar_day_content:first"),I.data,i+"-"+r(String(e+1),2,"0"))}),a.add(1,"month")}}function r(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function d(){var e=I.date.clone();e.subtract(14,"days");for(var a,n,r,d=C.el.find(".ogx_infinite_swiper_container:first"),l=0;l<3;l++){a=d.children(".ogx_infinite_swiper_item:eq("+l+")"),n=7,r="";for(var _=0;_<n;_++)r+='<div class="ogx_flex_calendar_day ogx_flex_calendar_week"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("DD")+'</span><span class="ogx_flex_calendar_day_content"></span></div>';a.html(r)}}function l(){var e=I.date.clone();e.subtract(2,"day");var a,n,r=O.el.find(".ogx_infinite_swiper_container:first");v.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day").removeClass("ogx_flex_calendar_current_weekday");for(var d=0;d<3;d++)a=r.children(".ogx_infinite_swiper_item:eq("+d+")"),n='<div class="ogx_flex_calendar_day ogx_flex_calendar_full_day"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("D")+'</span><div class="ogx_flex_calendar_day_content"></div></div>',a.html(n),1===d&&v.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day:eq("+e.weekday()+")").addClass("ogx_flex_calendar_current_weekday"),I.render&&I.render.day&&I.data&&Y.day.render(a.children(".ogx_flex_calendar_day:last").children(".ogx_flex_calendar_day_content:first")[0],I.data,e)}function _(e){var a;e?(s(!1),I.view=OGX.FlexCalendar.VIEW_DAY,C.disable(),C.el.prepend('<div class="ogx_flex_calendar_swiper_day"></div>'),a=C.el.find(".ogx_flex_calendar_swiper_day:first"),O=new OGX.InfiniteSwiper({container:a[0]}),a.css("opacity",1),l(),f(!0),o(!0)):(I.view=OGX.FlexCalendar.VIEW_MONTH,f(!1),o(!1),n(),t(I.date.format("YYYY-MM-DD"),!1),a=C.el.find(".ogx_flex_calendar_swiper_day:first"),a.css("opacity",0),setTimeout(function(){O.destroy(),C.el.find(".ogx_flex_calendar_swiper_day:first").remove(),i(!0),C.enable(),s(!0)},0))}function t(e,a){I.date=moment(e);var n,r=C.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)"),d=r.find('.ogx_flex_calendar_day[data-date="'+e+'"]:first')[0];r.find(".ogx_flex_calendar_day").each(function(e,r){n=$(r),a?n.removeClass("ogx_flex_calendar_anim_off"):n.addClass("ogx_flex_calendar_anim_off"),n.removeClass("ogx_flex_calendar_selected_day"),n.removeClass("ogx_flex_calendar_shrunk_day"),n.removeClass("ogx_flex_calendar_full_day"),n.removeClass("ogx_flex_calendar_last_selected_day"),d===r?(n.addClass("ogx_flex_calendar_selected_day"),n.addClass("ogx_flex_calendar_full_day")):n.addClass("ogx_flex_calendar_shrunk_day")})}function i(e){var a,n=C.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)");n.find(".ogx_flex_calendar_day").each(function(n,r){a=$(r),e?a.removeClass("ogx_flex_calendar_anim_off"):a.addClass("ogx_flex_calendar_anim_off"),a.hasClass("ogx_flex_calendar_selected_day")&&(a.removeClass("ogx_flex_calendar_selected_day"),a.removeClass("ogx_flex_calendar_full_day"),a.addClass("ogx_flex_calendar_last_selected_day")),a.removeClass("ogx_flex_calendar_shrunk_day")})}function o(e){if(e){var a,n,r,d,l,i,s;G.el.on(X,function(e){e=m(e),a=e.pageX,n=e.pageY,l=(new Date).getTime()}),G.el.on(F,function(e){e=m(e),r=e.pageX,d=e.pageY,i=(new Date).getTime(),s=d<n?-1:1,i-l<I.maxT&&s===-1&&Math.abs(r-a)<I.maxX&&Math.abs(d-n)>I.minY&&(t(I.date.format("YYYY-MM-DD")),_(!1),o(!1))})}else G.el.off(X),G.el.off(F)}function s(e){e?C.el.on("click",".ogx_flex_calendar_day",function(){$(this).hasClass("ogx_flex_calendar_offset")?i(!0):(t($(this).data("date"),!0),setTimeout(function(){_(!0)},E-300))}):C.el.off("click",".ogx_flex_calendar_day")}function f(e){e?O.el.on("click",".ogx_flex_calendar_renderer_item",function(){$(this).hasClass("ogx_flex_calendar_renderer_selected_item")?$(this).removeClass("ogx_flex_calendar_renderer_selected_item"):($(".ogx_flex_calendar_renderer_selected_item").removeClass("ogx_flex_calendar_renderer_selected_item"),$(this).addClass("ogx_flex_calendar_renderer_selected_item"))}):O.el.off("click",".ogx_flex_calendar_renderer_item")}function c(e){e?(v.on(OGX.InfiniteSwiper.SWIPE_LEFT,function(){switch(I.view){case OGX.FlexCalendar.VIEW_MONTH:I.date.add(1,"month");break;case OGX.FlexCalendar.VIEW_WEEK:I.date.add(7,"days");break;case OGX.FlexCalendar.VIEW_DAY:I.date.add(1,"days")}a()}),v.on(OGX.InfiniteSwiper.SWIPE_RIGHT,function(){switch(I.view){case OGX.FlexCalendar.VIEW_MONTH:I.date.subtract(1,"month");break;case OGX.FlexCalendar.VIEW_WEEK:I.date.subtract(7,"days");break;case OGX.FlexCalendar.VIEW_DAY:I.date.subtract(1,"days")}a()})):(v.off(OGX.InfiniteSwiper.SWIPE_LEFT),v.off(OGX.InfiniteSwiper.SWIPE_RIGHT))}function x(){C=new OGX.InfiniteSwiper({container:p}),c(!0)}function g(){var e=[];if(!I.render)return e;OGX.hasOwnProperty("FlexCalendarRenderer")||e.push("FlexCalendarRenderer");for(var a in I.render)I.render[a]&&(OGX.hasOwnProperty(I.render[a])?Y[a]=new OGX[I.render[a]]:e.push(I.render[a]));return e}function m(e){return e.hasOwnProperty("originalEvent")?e.originalEvent.changedTouches[0]:e}function u(){switch(I.mode){case OGX.FlexCalendar.MODE_MOBILE:X="touchstart",F="touchend";break;case OGX.FlexCalendar.MODE_DESKTOP:X="mousedown",F="mouseup"}}function y(){for(var e in M)I.hasOwnProperty(e)||(I[e]=M[e]);for(var a='<div class="ogx_flex_calendar"><div class="ogx_flex_calendar_head"><div class="ogx_flex_calendar_date">'+I.date.format("YYYY-MM")+'</div><div class="ogx_flex_calendar_days">',n=0;n<I.labels.length;n++)a+='<span class="ogx_flex_calendar_days_day">'+I.labels[n]+"</span>";a+='</div></div><div class="ogx_flex_calendar_swiper"></div></div>',$(I.container).html(a),G.el=v=$(I.container),p=v.find(".ogx_flex_calendar_swiper:first"),w=Math.floor(p.height()/6)-30}function h(){if("undefined"==typeof OGX.InfiniteSwiper)return void console.log("%c CRITICAL ERROR - OGX.InfiniteSwiper not found! ","background:#222; color: #FF0000");if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");moment.isMoment(I.date)||(I.date=moment(I.date)),y();var e=g();if(e.length)for(var n=0;n<e.length;n++)console.log("%c CRITICAL ERROR - OGX."+e[n]+" not found! ","background:#222; color: #FF0000");else x(),u(),a(),s(!0)}var v,p,C,O,w,E,F,X,G=this,I=e,M={date:moment(),view:OGX.FlexCalendar.VIEW_MONTH,mode:OGX.FlexCalendar.MODE_MOBILE,render:{month:"FlexCalendarTotalRenderer",day:"FlexCalendarDayRenderer"},labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM",maxX:40,minY:40,maxT:700},Y={};this.val=function(e){return"undefined"!=typeof e?I.date.format("YYYY-MM-DD"):(moment.isMoment(e)||(I.date=moment(e)),void a())},this.setData=function(e){I.data=e,a()},this.destroy=function(){O&&O.destroy(),s(!1),c(!1),C.destroy()},h()},OGX.FlexCalendar=function(e){"use strict";return new OGX.prototype.FlexCalendar(e)},OGX.FlexCalendar.VIEW_MONTH="FlexCalendarViewMonth",OGX.FlexCalendar.VIEW_WEEK="FlexCalendarViewWeek",OGX.FlexCalendar.VIEW_DAY="FlexCalendarViewDay",OGX.FlexCalendar.MODE_MOBILE="FlexCalendarModeMobile",OGX.FlexCalendar.MODE_DESKTOP="FlexCalendarModeDesktop";