if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendar=function(e){"use strict";function a(){switch(h.find(".ogx_flex_calendar_date:first").html(G.date.format(G.format)),G.view){case OGX.FlexCalendar.VIEW_MONTH:n();break;case OGX.FlexCalendar.VIEW_WEEK:r();break;case OGX.FlexCalendar.VIEW_DAY:d()}}function n(){var e=moment().format("YYYY-MM-DD"),a=G.date.clone();a.subtract(1,"month");for(var n,r,d,o,t,i,_,s,f=p.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first"),c=0;c<3;c++){n=f.children(".ogx_infinite_swiper_item:eq("+c+")"),r=a.daysInMonth(),d="",i=a.format("YYYY-MM"),o=moment(i+"-01"),t=o.weekday();for(var x=0;x<t;x++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';for(x=0;x<r;x++)s=i+"-"+l(String(x+1),2,"0"),_="",s===e&&(_=" ogx_flex_calendar_today_day"),d+='<div class="ogx_flex_calendar_day'+_+'" data-date="'+s+'"><span class="ogx_flex_calendar_day_label">'+(x+1)+'</span><span class="ogx_flex_calendar_day_content" style="height:'+w+'px;"></span></div>';for(x=0;x<42-t-r;x++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';n.html(d),G.render&&G.render.month&&G.data&&n.children(".ogx_flex_calendar_day[data-date]").each(function(e,a){M.month.render($(a).children(".ogx_flex_calendar_day_content:first"),G.data,i+"-"+l(String(e+1),2,"0"))}),a.add(1,"month")}}function l(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function r(){var e=G.date.clone();e.subtract(14,"days");for(var a,n,l,r=p.el.find(".ogx_infinite_swiper_container:first"),d=0;d<3;d++){a=r.children(".ogx_infinite_swiper_item:eq("+d+")"),n=7,l="";for(var o=0;o<n;o++)l+='<div class="ogx_flex_calendar_day ogx_flex_calendar_week"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("DD")+'</span><span class="ogx_flex_calendar_day_content"></span></div>';a.html(l)}}function d(){var e=G.date.clone();e.subtract(2,"day");var a,n,l=O.el.find(".ogx_infinite_swiper_container:first");h.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day").removeClass("ogx_flex_calendar_current_weekday");for(var r=0;r<3;r++)a=l.children(".ogx_infinite_swiper_item:eq("+r+")"),n='<div class="ogx_flex_calendar_day ogx_flex_calendar_full_day"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("D")+'</span><div class="ogx_flex_calendar_day_content"></div></div>',a.html(n),1===r&&h.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day:eq("+e.weekday()+")").addClass("ogx_flex_calendar_current_weekday"),G.render&&G.render.day&&G.data&&M.day.render(a.children(".ogx_flex_calendar_day:last").children(".ogx_flex_calendar_day_content:first")[0],G.data,e)}function o(e){var a;console.log("show",e),e?(s(!1),G.view=OGX.FlexCalendar.VIEW_DAY,p.disable(),p.el.prepend('<div class="ogx_flex_calendar_swiper_day"></div>'),a=p.el.find(".ogx_flex_calendar_swiper_day:first"),O=new OGX.InfiniteSwiper({container:a[0]}),a.css("opacity",1),d(),_(!0)):(G.view=OGX.FlexCalendar.VIEW_MONTH,_(!1),n(),t(G.date.format("YYYY-MM-DD"),!1),a=p.el.find(".ogx_flex_calendar_swiper_day:first"),a.css("opacity",0),setTimeout(function(){O.destroy(),p.el.find(".ogx_flex_calendar_swiper_day:first").remove(),i(!0),p.enable(),s(!0)},0))}function t(e,a){console.log("select",e),G.date=moment(e);var n,l=p.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)"),r=l.find('.ogx_flex_calendar_day[data-date="'+e+'"]:first')[0];l.find(".ogx_flex_calendar_day").each(function(e,l){n=$(l),a?n.removeClass("ogx_flex_calendar_anim_off"):n.addClass("ogx_flex_calendar_anim_off"),n.removeClass("ogx_flex_calendar_selected_day"),n.removeClass("ogx_flex_calendar_shrunk_day"),n.removeClass("ogx_flex_calendar_full_day"),r===l?(n.addClass("ogx_flex_calendar_selected_day"),n.addClass("ogx_flex_calendar_full_day")):n.addClass("ogx_flex_calendar_shrunk_day")})}function i(e){console.log("unselect");var a,n=p.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)");n.find(".ogx_flex_calendar_day").each(function(n,l){a=$(l),e?a.removeClass("ogx_flex_calendar_anim_off"):a.addClass("ogx_flex_calendar_anim_off"),a.removeClass("ogx_flex_calendar_selected_day"),a.removeClass("ogx_flex_calendar_shrunk_day"),a.removeClass("ogx_flex_calendar_full_day")})}function _(e){if(e){var a,n,l,r,d,i,s;console.log("listen",F),X.el.on(F,function(e){console.log("mdown vert"),e=g(e),a=e.pageX,n=e.pageY,d=(new Date).getTime()}),X.el.on(E,function(e){console.log("mup vert"),e=g(e),l=e.pageX,r=e.pageY,i=(new Date).getTime(),s=r<n?-1:1,i-d<G.maxT&&(console.log(s),s===-1&&Math.abs(l-a)<G.maxX&&Math.abs(r-n)>G.minY&&(t(G.date.format("YYYY-MM-DD")),o(!1),_(!1)))})}else X.el.off(F),X.el.off(E)}function s(e){console.log("listen main cal",e),e?p.el.on("click",".ogx_flex_calendar_day",function(){$(this).hasClass("ogx_flex_calendar_selected_day")||$(this).hasClass("ogx_flex_calendar_offset")?i(!0):(t($(this).data("date"),!0),setTimeout(function(){o(!0)},C-200))}):p.el.off("click",".ogx_flex_calendar_day")}function f(e){e?(h.on(OGX.InfiniteSwiper.SWIPE_LEFT,function(){switch(G.view){case OGX.FlexCalendar.VIEW_MONTH:G.date.add(1,"month");break;case OGX.FlexCalendar.VIEW_WEEK:G.date.add(7,"days");break;case OGX.FlexCalendar.VIEW_DAY:G.date.add(1,"days")}a()}),h.on(OGX.InfiniteSwiper.SWIPE_RIGHT,function(){switch(G.view){case OGX.FlexCalendar.VIEW_MONTH:G.date.subtract(1,"month");break;case OGX.FlexCalendar.VIEW_WEEK:G.date.subtract(7,"days");break;case OGX.FlexCalendar.VIEW_DAY:G.date.subtract(1,"days")}a()})):(h.off(OGX.InfiniteSwiper.SWIPE_LEFT),h.off(OGX.InfiniteSwiper.SWIPE_RIGHT))}function c(){p=new OGX.InfiniteSwiper({container:v}),f(!0)}function x(){var e=[];if(!G.render)return e;OGX.hasOwnProperty("FlexCalendarRenderer")||e.push("FlexCalendarRenderer");for(var a in G.render)G.render[a]&&(OGX.hasOwnProperty(G.render[a])?M[a]=new OGX[G.render[a]]:e.push(G.render[a]));return e}function g(e){return e.hasOwnProperty("originalEvent")?e.originalEvent.changedTouches[0]:e}function u(){switch(G.mode){case OGX.FlexCalendar.MODE_MOBILE:F="touchstart",E="touchend";break;case OGX.FlexCalendar.MODE_DESKTOP:F="mousedown",E="mouseup"}}function m(){for(var e in I)G.hasOwnProperty(e)||(G[e]=I[e]);for(var a='<div class="ogx_flex_calendar"><div class="ogx_flex_calendar_head"><div class="ogx_flex_calendar_date">'+G.date.format("YYYY-MM")+'</div><div class="ogx_flex_calendar_days">',n=0;n<G.labels.length;n++)a+='<span class="ogx_flex_calendar_days_day">'+G.labels[n]+"</span>";a+='</div></div><div class="ogx_flex_calendar_swiper"></div></div>',$(G.container).html(a),X.el=h=$(G.container),v=h.find(".ogx_flex_calendar_swiper:first"),w=Math.floor(v.height()/6)-30}function y(){if("undefined"==typeof OGX.InfiniteSwiper)return void console.log("%c CRITICAL ERROR - OGX.InfiniteSwiper not found! ","background:#222; color: #FF0000");if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");moment.isMoment(G.date)||(G.date=moment(G.date)),m();var e=x();if(e.length)for(var n=0;n<e.length;n++)console.log("%c CRITICAL ERROR - OGX."+e[n]+" not found! ","background:#222; color: #FF0000");else c(),u(),a(),s(!0),C=1e3*Number($(".ogx_flex_calendar_day").css("transition-duration").split("s")[0])}var h,v,p,O,w,C,E,F,X=this,G=e,I={date:moment(),view:OGX.FlexCalendar.VIEW_MONTH,mode:OGX.FlexCalendar.MODE_MOBILE,render:{month:"FlexCalendarTotalRenderer",day:"FlexCalendarDayRenderer"},labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM",maxX:40,minY:40,maxT:700},M={};this.val=function(e){return"undefined"!=typeof e?G.date.format("YYYY-MM-DD"):(moment.isMoment(e)||(G.date=moment(e)),void a())},this.setData=function(e){G.data=e,a()},this.destroy=function(){O&&O.destroy(),s(!1),f(!1),p.destroy()},y()},OGX.FlexCalendar=function(e){"use strict";return new OGX.prototype.FlexCalendar(e)},OGX.FlexCalendar.VIEW_MONTH="FlexCalendarViewMonth",OGX.FlexCalendar.VIEW_WEEK="FlexCalendarViewWeek",OGX.FlexCalendar.VIEW_DAY="FlexCalendarViewDay",OGX.FlexCalendar.MODE_MOBILE="FlexCalendarModeMobile",OGX.FlexCalendar.MODE_DESKTOP="FlexCalendarModeDesktop";