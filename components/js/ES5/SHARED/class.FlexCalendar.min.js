if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FlexCalendar=function(e){"use strict";function a(){switch(u.find(".ogx_flex_calendar_date:first").html(w.date.format(w.format)),w.mode){case OGX.FlexCalendar.MODE_MONTH:n();break;case OGX.FlexCalendar.MODE_WEEK:l();break;case OGX.FlexCalendar.MODE_DAY:r()}}function n(){var e=w.date.clone();e.subtract(1,"month");for(var a,n,l,r,_,o,t=h.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first"),i=0;i<3;i++){a=t.children(".ogx_infinite_swiper_item:eq("+i+")"),n=e.daysInMonth(),l="",o=e.format("YYYY-MM"),r=moment(o+"-01"),_=r.weekday();for(var s=0;s<_;s++)l+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';for(s=0;s<n;s++)l+='<div class="ogx_flex_calendar_day" data-date="'+o+"-"+d(String(s+1),2,"0")+'"><span class="ogx_flex_calendar_day_label">'+(s+1)+'</span><span class="ogx_flex_calendar_day_content" style="height:'+p+'px;"></span></div>';for(s=0;s<42-_-n;s++)l+='<div class="ogx_flex_calendar_day ogx_flex_calendar_offset"></div>';a.html(l),w.render&&w.render.month&&w.data&&a.children(".ogx_flex_calendar_day[data-date]").each(function(e,a){F.month.render($(a).children(".ogx_flex_calendar_day_content:first"),w.data,o+"-"+d(String(e+1),2,"0"))}),e.add(1,"month")}}function d(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function l(){var e=w.date.clone();e.subtract(14,"days");for(var a,n,d,l=h.el.find(".ogx_infinite_swiper_container:first"),r=0;r<3;r++){a=l.children(".ogx_infinite_swiper_item:eq("+r+")"),n=7,d="";for(var _=0;_<n;_++)d+='<div class="ogx_flex_calendar_day ogx_flex_calendar_week"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("DD")+'</span><span class="ogx_flex_calendar_day_content"></span></div>';a.html(d)}}function r(){var e=w.date.clone();e.subtract(2,"day");var a,n,d=O.el.find(".ogx_infinite_swiper_container:first");u.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day").removeClass("ogx_flex_calendar_current_weekday");for(var l=0;l<3;l++)a=d.children(".ogx_infinite_swiper_item:eq("+l+")"),n='<div class="ogx_flex_calendar_day ogx_flex_calendar_full_day"><span class="ogx_flex_calendar_day_label">'+e.add(1,"days").format("D")+'</span><div class="ogx_flex_calendar_day_content"></div></div>',a.html(n),1===l&&u.find(".ogx_flex_calendar_days:first").children(".ogx_flex_calendar_days_day:eq("+e.weekday()+")").addClass("ogx_flex_calendar_current_weekday"),w.render&&w.render.day&&w.data&&F.day.render(a.children(".ogx_flex_calendar_day:last").children(".ogx_flex_calendar_day_content:first")[0],w.data,e)}function _(e){var a;console.log("show",e),e?(i(!1),w.mode=OGX.FlexCalendar.MODE_DAY,h.disable(),h.el.prepend('<div class="ogx_flex_calendar_swiper_day"></div>'),a=h.el.find(".ogx_flex_calendar_swiper_day:first"),O=new OGX.InfiniteSwiper({container:a[0]}),a.css("opacity",1),r(),s(!0)):(w.mode=OGX.FlexCalendar.MODE_MONTH,s(!1),n(),o(w.date.format("YYYY-MM-DD"),!1),a=h.el.find(".ogx_flex_calendar_swiper_day:first"),a.css("opacity",0),setTimeout(function(){O.destroy(),h.el.find(".ogx_flex_calendar_swiper_day:first").remove(),t(!0),h.enable(),i(!0)},0))}function o(e,a){console.log("select",e),w.date=moment(e);var n,d=h.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)"),l=d.find('.ogx_flex_calendar_day[data-date="'+e+'"]:first')[0];d.find(".ogx_flex_calendar_day").each(function(e,d){n=$(d),a?n.removeClass("ogx_flex_calendar_anim_off"):n.addClass("ogx_flex_calendar_anim_off"),n.removeClass("ogx_flex_calendar_selected_day"),n.removeClass("ogx_flex_calendar_shrunk_day"),n.removeClass("ogx_flex_calendar_full_day"),l===d?(n.addClass("ogx_flex_calendar_selected_day"),n.addClass("ogx_flex_calendar_full_day")):n.addClass("ogx_flex_calendar_shrunk_day")})}function t(e){console.log("unselect");var a,n=h.el.children(".ogx_infinite_swiper:first").children(".ogx_infinite_swiper_container:first").children(".ogx_infinite_swiper_item:eq(1)");n.find(".ogx_flex_calendar_day").each(function(n,d){a=$(d),e?a.removeClass("ogx_flex_calendar_anim_off"):a.addClass("ogx_flex_calendar_anim_off"),a.removeClass("ogx_flex_calendar_selected_day"),a.removeClass("ogx_flex_calendar_shrunk_day"),a.removeClass("ogx_flex_calendar_full_day")})}function i(e){console.log("listen main cal",e),e?h.el.on("click",".ogx_flex_calendar_day",function(){$(this).hasClass("ogx_flex_calendar_selected_day")||$(this).hasClass("ogx_flex_calendar_offset")?t(!0):(o($(this).data("date"),!0),setTimeout(function(){_(!0)},v-200))}):h.el.off("click",".ogx_flex_calendar_day")}function s(e){console.log("listen day cal",e),e?O.el.on("click",".ogx_flex_calendar_day",function(){o(w.date.format("YYYY-MM-DD")),_(!1)}):O.el.off("click",".ogx_flex_calendar_day")}function f(e){e?(u.on(OGX.InfiniteSwiper.SWIPE_LEFT,function(){switch(w.mode){case OGX.FlexCalendar.MODE_MONTH:w.date.add(1,"month");break;case OGX.FlexCalendar.MODE_WEEK:w.date.add(7,"days");break;case OGX.FlexCalendar.MODE_DAY:w.date.add(1,"days")}a()}),u.on(OGX.InfiniteSwiper.SWIPE_RIGHT,function(){switch(w.mode){case OGX.FlexCalendar.MODE_MONTH:w.date.subtract(1,"month");break;case OGX.FlexCalendar.MODE_WEEK:w.date.subtract(7,"days");break;case OGX.FlexCalendar.MODE_DAY:w.date.subtract(1,"days")}a()})):(u.off(OGX.InfiniteSwiper.SWIPE_LEFT),u.off(OGX.InfiniteSwiper.SWIPE_RIGHT))}function c(){h=new OGX.InfiniteSwiper({container:m}),f(!0)}function x(){var e=[];if(!w.render)return e;OGX.hasOwnProperty("FlexCalendarRenderer")||e.push("FlexCalendarRenderer");for(var a in w.render)w.render[a]&&(OGX.hasOwnProperty(w.render[a])?F[a]=new OGX[w.render[a]]:e.push(w.render[a]));return e}function g(){for(var e in M)w.hasOwnProperty(e)||(w[e]=M[e]);for(var a='<div class="ogx_flex_calendar"><div class="ogx_flex_calendar_head"><div class="ogx_flex_calendar_date">'+w.date.format("YYYY-MM")+'</div><div class="ogx_flex_calendar_days">',n=0;n<w.labels.length;n++)a+='<span class="ogx_flex_calendar_days_day">'+w.labels[n]+"</span>";a+='</div></div><div class="ogx_flex_calendar_swiper"></div></div>',$(w.container).html(a),C.el=u=$(w.container),m=u.find(".ogx_flex_calendar_swiper:first"),p=Math.floor(m.height()/6)-30}function y(){if("undefined"==typeof OGX.InfiniteSwiper)return void console.log("%c CRITICAL ERROR - OGX.InfiniteSwiper not found! ","background:#222; color: #FF0000");if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");moment.isMoment(w.date)||(w.date=moment(w.date)),g();var e=x();if(e.length)for(var n=0;n<e.length;n++)console.log("%c CRITICAL ERROR - OGX."+e[n]+" not found! ","background:#222; color: #FF0000");else c(),a(),i(!0),v=1e3*Number($(".ogx_flex_calendar_day").css("transition-duration").split("s")[0])}var u,m,h,O,p,v,C=this,w=e,M={date:moment(),mode:OGX.FlexCalendar.MODE_MONTH,render:{month:"FlexCalendarTotalRenderer",day:"FlexCalendarDayRenderer"},labels:["Sun","Mon","Tus","Wed","Thu","Fri","Sat"],format:"YYYY-MM"},F={};this.val=function(e){return"undefined"!=typeof e?w.date.format("YYYY-MM-DD"):(moment.isMoment(e)||(w.date=moment(e)),void a())},this.setData=function(e){w.data=e,a()},this.destroy=function(){O&&(s(!1),O.destroy()),i(!1),f(!1),h.destroy()},y()},OGX.FlexCalendar=function(e){"use strict";return new OGX.prototype.FlexCalendar(e)},OGX.FlexCalendar.MODE_MONTH="FlexCalendarModeMonth",OGX.FlexCalendar.MODE_WEEK="FlexCalendarModeWeek",OGX.FlexCalendar.MODE_DAY="FlexCalendarModeDay";