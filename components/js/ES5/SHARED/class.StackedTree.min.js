if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.StackedTree=function(e){"use strict";function t(e){e?(_.on(u,".ogx_stacked_tree_item",function(){var e=$(this).data("path").split("_"),t=a(e);h=t.label;var s=n(e);s?_.trigger(OGX.StackedTree.CHANGE,t):_.trigger(OGX.StackedTree.SELECT,t)}),_.on(u,".ogx_stacked_tree_back",function(){var e=$(this).data("path").split("_"),t=a(e);r(parseInt($(this).data("lv"))),_.trigger(OGX.StackedTree.CHANGE,t)})):(_.off(u,".ogx_stacked_tree_item"),_.off(u,".ogx_stacked_tree_back"))}function a(e){var t=m.data,a=e.slice();for(a.shift();a.length>0;)t.hasOwnProperty("items")&&(t=t.items[a[0]]),a.shift();return t}function s(e){return 1===e.length?0:e.length-1}function n(e){var t,n;t=1===e.length?m.data:a(e),k=e;var c=s(e);if(t&&t.hasOwnProperty("items")){0===f.find(".ogx_stacked_tree_level"+c+":first").length&&f.append('<div class="ogx_stacked_tree_level ogx_stacked_tree_level'+c+'" data-lv="'+c+'"></div>'),n=f.find(".ogx_stacked_tree_level"+c+":first"),n.empty(),n.css("left",c*p+"px");var o,d,l="<ul>",_=e.slice();_=_.join("_"),c>0&&(l+='<li data-path="'+_+'" data-lv="'+(c-1)+'" class="ogx_stacked_tree_back"><span class="ogx_stacked_tree_item_label">'+h+"</span></li>");for(var u=0;u<t.items.length;u++)i(t.items[u])&&(o="",(!t.items[u].hasOwnProperty("items")||t.items[u].hasOwnProperty("items")&&0===t.items[u].length)&&(o=" ogx_stacked_tree_end"),d=_+"_"+u,l+='<li data-path="'+d+'" class="ogx_stacked_tree_item'+o+'"><span class="ogx_stacked_tree_item_label">'+t.items[u].label+"</span></li>");return l+="</ul>",n.html(l),r(c),!0}return!1}function r(e){f.off("transitionend"),f.css("transition","all ."+m.speed/100+"s"),f.css("transform","translateX("+e*p*-1+"px)")}function i(e){if(e.hasOwnProperty("scopes"))for(var t=0;t<e.scopes.length;t++)if(m.scopes.indexOf(e.scopes[t])!==-1)return!0;return!1}function c(){switch(m.mode){case OGX.StackedTree.MODE_MOBILE:u="touchstart";break;case OGX.StackedTree.MODE_DESKTOP:u="mousedown"}}function o(){_=$(m.container),_.addClass("ogx_stacked_tree"),_.html('<div class="ogx_stacked_tree_container"></div>'),f=_.find(".ogx_stacked_tree_container:first"),O.el=_,p=_.innerWidth()}function d(){for(var e in g)m.hasOwnProperty(e)||(m[e]=g[e]);var t=m.data.slice();m.data={items:t}}function l(){d(),c(),o(),n([0]),m.enabled&&t(!0)}var _,f,h,k,p,u,O=this,g={scopes:["public"],speed:200,enabled:!0,mode:OGX.StackedTree.MODE_MOBILE},m=e;this.el=null,this.refresh=function(){p=_.innerWidth(),n(k)},this.setScopes=function(e){m.scopes=e,n([0])},this.setPath=function(e){k=e,n(k)},this.enable=function(){m.enabled||(m.enabled=!0,t(!0))},this.disable=function(){m.enabled&&(m.enabled=!1,t(!1))},this.destroy=function(){t(!1)},l()},OGX.StackedTree=function(e){"use strict";return new OGX.prototype.StackedTree(e)},OGX.StackedTree.CHANGE="stackedTreeChange",OGX.StackedTree.SELECT="stackedTreeSelect",OGX.StackedTree.MODE_MOBILE="stackedTreeModeMobile",OGX.StackedTree.MODE_DESKTOP="stackedTreeModeDesktop";