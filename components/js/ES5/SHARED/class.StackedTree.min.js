if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.StackedTree=function(e){function t(e){e?(d.on("click",".ogx_stacked_tree_item",function(e){var t=$(this).data("path").split("_"),a=s(t);f=a.label;var i=n(t);i?d.trigger(OGX.StackedTree.CHANGE,a):d.trigger(OGX.StackedTree.SELECT,a)}),d.on("click",".ogx_stacked_tree_back",function(e){var t=$(this).data("path").split("_"),a=s(t);i(parseInt($(this).data("lv"))),d.trigger(OGX.StackedTree.CHANGE,a)})):(d.off("click",".ogx_stacked_tree_item"),d.off("click",".ogx_stacked_tree_back"))}function s(e){var t=u.data,s=e.slice();for(s.shift();s.length>0;)t.hasOwnProperty("items")&&(t=t.items[s[0]]),s.shift();return t}function a(e){return 1===e.length?0:e.length-1}function n(e){var t,n;t=1===e.length?u.data:s(e),p=e;var c=a(e);if(t&&t.hasOwnProperty("items")){0===_.find(".ogx_stacked_tree_level"+c+":first").length&&_.append('<div class="ogx_stacked_tree_level ogx_stacked_tree_level'+c+'" data-lv="'+c+'"></div>'),n=_.find(".ogx_stacked_tree_level"+c+":first"),n.empty(),n.css("left",c*h+"px");var o,l,d="<ul>",g=e.slice();g=g.join("_"),c>0&&(d+='<li data-path="'+g+'" data-lv="'+(c-1)+'" class="ogx_stacked_tree_back"><span class="ogx_stacked_tree_item_label">'+f+"</span></li>");for(var k=0;k<t.items.length;k++)r(t.items[k])&&(o="",(!t.items[k].hasOwnProperty("items")||t.items[k].hasOwnProperty("items")&&0===t.items[k].length)&&(o=" ogx_stacked_tree_end"),l=g+"_"+k,d+='<li data-path="'+l+'" class="ogx_stacked_tree_item'+o+'"><span class="ogx_stacked_tree_item_label">'+t.items[k].label+"</span></li>");return d+="</ul>",n.html(d),i(c),!0}return!1}function i(e){_.off("transitionend"),_.css("transition","all ."+u.speed/100+"s"),_.css("transform","translateX("+e*h*-1+"px)")}function r(e){if(e.hasOwnProperty("scopes"))for(var t=0;t<e.scopes.length;t++)if(u.scopes.indexOf(e.scopes[t])!==-1)return!0;return!1}function c(){d=$(u.container),d.addClass("ogx_stacked_tree"),d.html('<div class="ogx_stacked_tree_container"></div>'),_=d.find(".ogx_stacked_tree_container:first"),g.el=d,h=d.innerWidth()}function o(){for(var e in k)u.hasOwnProperty(e)||(u[e]=k[e]);var t=u.data.slice();u.data={items:t}}function l(){o(),c(),n([0]),t(!0)}var d,_,f,p,h,g=this,k={scopes:["public"],speed:200},u=e;this.el=null,this.refresh=function(){h=d.innerWidth(),n(p)},this.setScopes=function(e){u.scopes=e,n([0])},this.setPath=function(e){p=e,n(p)},this.destroy=function(){t(!1)},l()},OGX.StackedTree=function(e){return new OGX.prototype.StackedTree(e)},OGX.StackedTree.CHANGE="change",OGX.StackedTree.SELECT="select";