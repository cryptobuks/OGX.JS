if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FormTools=function(){"use strict";function n(n){return $(n).serializeArray().map(function(n){return this[n.name]=n.value,this}.bind({}))[0]}function t(n){var t=$(n).val(),i=r[n];if(i.val!==t&&(i.val=t,i.changing=(new Date).getTime()),i.changing&&(new Date).getTime()>i.wait+i.changing&&(clearInterval(i.intv),i.intv=!1,i.change_cb)){var e={};e.el=n,e[i.prop]=i.val,i.change_cb(e)}}function i(n,t){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i]);return t}var e={multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:1500,intv:null,prop:null},r={};this.bindForm=function(t,i){"undefined"==typeof i&&(i=!1),r.hasOwnProperty(t)||(r[t]=i,$(t).on("submit",function(e){e.preventDefault(),e.stopImmediatePropagation();var r=n(t);i?i(r):$(t).trigger("change",r)}))},this.unbindForm=function(n){r.hasOwnProperty(n)&&($(document).off("submit",n),delete r[n])},this.bindField=function(n,a){if(!r.hasOwnProperty(n)){var o=i(e,a);o.prop=$(n).attr("name"),r[n]=o,$(n).on("input",function(){if(o.input_cb){var i={};i.el=n,i[r[n].prop]=$(this).val(),o.input_cb(i)}r[n].intv||(r[n].intv=setInterval(function(){t(n)},300))}),o.multiline||$(n).on("keypress",function(t){if(13===t.which)if(t.preventDefault(),t.stopImmediatePropagation(),r[n].intv&&(clearInterval(r[n].intv),r[n].intv=null),o.change_cb){var i={};i.el=n,i[r[n].prop]=$(this).val(),o.change_cb(i)}else $(n).trigger("change",$(this).val())})}},this.unbindField=function(n){r.hasOwnProperty(n)&&($(n).off("input"),r[n].multiline||$(n).off("keypress"),r[n].intv&&clearInterval(r[n].intv),delete r[n])}},OGX.FormTools=new OGX.prototype.FormTools;