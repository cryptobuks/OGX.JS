if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FormTools=function(){"use strict";function n(n){return $(n).serializeArray().map(function(n){return this[n.name]=n.value,this}.bind({}))[0]}function t(n){var t=$(n).val(),e=l[n];if(e.val!==t&&(e.val=t,e.changing=(new Date).getTime()),e.changing&&(new Date).getTime()>e.wait+e.changing&&(clearInterval(e.intv),e.intv=!1,e.change_cb)){var i={value:null,obj:{},el:null};i.el=$(n)[0],i.value=$(this).val(),i.obj[e.prop]=e.val,e.change_cb(i)}}function e(n,t){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e]);return t}var i={multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:1500,intv:null,prop:null},l={};this.bindForm=function(t,e){"undefined"==typeof e&&(e=!1),l.hasOwnProperty(t)||(l[t]=e,$(t).on("submit",function(i){i.preventDefault(),i.stopImmediatePropagation();var l={obj:n(t),el:$(t)[0]};e?e(l):$(t).trigger("change",l)}))},this.unbindForm=function(n){l.hasOwnProperty(n)&&($(document).off("submit",n),delete l[n])},this.bindField=function(n,a){if(!l.hasOwnProperty(n)){var o=e(i,a);o.prop=$(n).attr("name"),l[n]=o,$(n).on("input",function(){if(o.input_cb){var e={value:null,obj:{},el:null};e.el=$(n)[0],e.value=$(this).val(),e.obj[l[n].prop]=$(this).val(),o.input_cb(e)}l[n].intv||(l[n].intv=setInterval(function(){t(n)},300))}),o.multiline||$(n).on("keypress",function(t){if(13===t.which)if(t.preventDefault(),t.stopImmediatePropagation(),l[n].intv&&(clearInterval(l[n].intv),l[n].intv=null),o.change_cb){var e={value:null,obj:{},el:null};e.el=$(n)[0],e.value=$(this).val(),e.obj[l[n].prop]=$(this).val(),o.change_cb(e)}else $(n).trigger("change",$(this).val())})}},this.unbindField=function(n){l.hasOwnProperty(n)&&($(n).off("input"),l[n].multiline||$(n).off("keypress"),l[n].intv&&clearInterval(l[n].intv),delete l[n])}},OGX.FormTools=new OGX.prototype.FormTools;