if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.Grid=function(t){"use strict";function n(t){var n,i=1;for(var r in x.columns)n=t[r],$(".ogx_grid_selected_row:first").find("td:nth-child("+i+")").text(n),i++}function i(){$(x.container).append('<div class="ogx_grid_head"><table width="100%" border="1px"><tr></tr></table></div>'),$(x.container).append('<div class="ogx_grid_body"><table width="100%" border="1px"><tr></tr></table></div>');for(var t in x.data[0])$(x.container).find(".ogx_grid_head:first table").find("tr:first").append('<td width="'+x.columns[t]+'%" class="ogx_grid_column_head" data-way="1"><span class="ogx_grid_property">'+t+'</span><span class="ogx_grid_head_arrow"></span></td>');r(x.data)}function r(){$(x.container).find(".ogx_grid_body:first").html('<table width="100%" border="1px"><tr></tr></table>');var t=0;t=x.limit>x.data.length||0===x.limit?x.data.length:x.limit;var n=m*x.limit;n=n<x.data.length?n:x.data.length-1;for(var i=n;i<n+t;i++){$(x.container).find(".ogx_grid_body:first table").append('<tr class="ogx_grid_row"></tr>');var r;for(var a in x.data[i])r=!1,y&&l(y,x.data[i])&&(r=!0),$(x.container).find(".ogx_grid_body:first table").find("tr:last").append('<td width="'+x.columns[a]+'%"><span class="ogx_grid_value">'+x.data[i][a]+"</span></td>"),r&&$(x.container).find(".ogx_grid_body:first table").find("tr:last").addClass("ogx_grid_selected_row")}}function a(){$(x.container).find(".ogx_grid_head").remove(),$(x.container).find(".ogx_grid_body").remove()}function e(t){$(".ogx_grid_head_arrow").text(""),h.sort($(t).text(),Number($(t).data("way")));var n="˄",i=Number($(t).data("way"))*-1;n=i===-1?"˄":"˅",$(t).find(".ogx_grid_head_arrow:first").text(n),$(t).data("way",i)}function d(t,n){return function(i,r){return i[t]<r[t]?n*-1:i[t]>r[t]?n:0}}function o(t,n){var i=x.data;return i.sort(d(t,n)),i}function c(t){var n,i,r={};$(t).find("td").each(function(t,a){n=$(x.container).find(".ogx_grid_head:first table").find("tr").find("td:nth-child("+(t+1)+")").find("span:first").text(),i=$(a).text(),x.force_type&&(isNaN(Number(i))||""===i?"true"===i?i=!0:"false"===i&&(i=!1):i=Number(i)),r[n]=i});for(var a=0;a<x.data.length;a++)if(l(x.data[a],r))return x.data[a];return console.log("didnt find"),!1}function l(t,n){return x.hasOwnProperty("key")?t[x.key]===n[x.key]:JSON.stringify(n)===JSON.stringify(t)}function s(t,n){var i,r,a;if(t){w=n;var e=c(n);e&&(v=e,$(n).find("td").each(function(t,n){i=$(n).text(),a=$(n).width(),$(n).html('<input type="text" value="'+i+'" style="width:'+(a-4)+'px">')}))}else w&&v&&($(w).find("td").each(function(t,n){i=$(n).find("input:first").val(),$(x.container).find(".ogx_grid_head:first").find("td").each(function(a,e){a===t&&(r=$(e).find("span:first").text(),v[r]=i,$(n).html('<span class="ogx_grid_value">'+i+"</span>"))})}),w=null,v=null)}function f(t){t?($(x.container).on("click",".ogx_grid_column_head",function(){e(this)}),$(x.container).on("click",".ogx_grid_row",function(){if(x.editable&&w&&$(w)[0]!==$(this)[0])return void s(!1);if($(".ogx_grid_selected_row").removeClass("ogx_grid_selected_row"),b===this)return $(x.container).trigger(OGX.Grid.UNSELECT,y),y=null,void(b=null);var t=c(this);$(x.container).trigger(OGX.Grid.SELECT,t),b=this,y=t,$(this).addClass("ogx_grid_selected_row")}),x.editable&&$(x.container).on("dblclick",".ogx_grid_row",function(){this!==w&&(w&&s(!1,w),s(!0,$(this)))})):($(x.container).off("click",".ogx_grid_column_head"),$(x.container).off("click",".ogx_grid_row"),x.editable&&$(x.container).off("dblclick",".ogx_grid_row"))}function g(){if(!x.hasOwnProperty("columns")&&x.hasOwnProperty("data")){x.columns={};var t=0;for(var n in x.data[0])t++;var i=Math.round(100/t);for(n in x.data[0])x.columns[n]=i}}function u(){x||(x={});for(var t in p)x[t]||(x[t]=p[t]);h.el=$(x.container)}function _(){u(),x.hasOwnProperty("data")&&(g(),i()),f(!0)}var h=this,p={limit:10,force_type:!0,editable:!1,bind:{}},x=t,b=null,y=null,v=null,w=null,m=0;this.el=null,this.getSelectedRow=function(){return y},this.setData=function(t){t&&(x.data=t,g(),a(),i())},this.getData=function(){return x.hasOwnProperty("data")?x.data:[]},this.setPage=function(t){m=t,r(x.data)},this.getTotalPages=function(){return Math.ceil(x.data.length/x.limit)},this.sort=function(t,n){var i=o(t,n);r(i)},this.updateSelectedObject=function(t,i){y&&(y[t]=i,n(y))},this.bind=function(t){var n;if(n=typeof t,"object"===n&&t.hasOwnProperty("type")&&t.type)switch(t.type){case"OgxDynamicPager":x.bind.pager=t,$(t.el).on(OGX.DynamicPager.SELECT_PAGE,function(t,n){h.setPage(n.page)}),x.bind.pager.setPages(Math.ceil(x.data.length/x.limit))}},this.unbind=function(){x.bind.pager&&($(x.bind.pager.el).off(OGX.DynamicPager.SELECT_PAGE),x.bind.pager=null)},this.destroy=function(){f(!1),h.unbind()},_()},OGX.Grid=function(t){"use strict";return new OGX.prototype.Grid(t)},OGX.Grid.SELECT="select",OGX.Grid.UNSELECT="unselect";