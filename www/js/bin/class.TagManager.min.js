if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.TagManager=function(a){"use strict";function n(a){var n=!1;switch(h.mode){case OGX.TagManager.MODE_STRING:case OGX.TagManager.MODE_ASCII:h.current_tags.indexOf(a)===-1&&(h.current_tags.push(a),n=!0);break;case OGX.TagManager.MODE_OBJECT:var t=h.current_tags.find("label",a,1);0===t.length&&(t=h.tags.find("label",a,1),t?h.current_tags.push(t[0]):h.current_tags.push({label:a}),n=!0)}if(n){var e="";h.editable===!0?e='<span class="ogx_tag_manager_remove"></span>':null;var r='<span class="ogx_tag_manager_tag"><span>'+a+"</span>"+e+"</span>";$(h.container).find(".ogx_tag_manager_tags:first").append(r),$(h.container).trigger(OGX.TagManager.TAG_ADDED,a)}$(h.container).find(".ogx_tag_manager_input:first").focus()}function t(a){var n=!1,t=!1;switch(h.mode){case OGX.TagManager.MODE_STRING:case OGX.TagManager.MODE_ASCII:var e=h.current_tags.indexOf(a);e>-1&&(h.current_tags.splice(e,1),n=!0);break;case OGX.TagManager.MODE_OBJECT:n=h.current_tags.findDelete("label",a)}return n&&$(h.container).find(".ogx_tag_manager_tags:first").find(".ogx_tag_manager_tag").each(function(n,e){if($(e).find("span:first").text()===a)return $(e).remove(),void(t=!0)}),t}function e(a,n){if(a){$(h.container).find(".ogx_tag_manager_tags_container:first").length>0&&(e(!1),c(!1));for(var t='<div class="ogx_tag_manager_tags_container">',r=0;r<n.length;r++)switch(h.mode){case OGX.TagManager.MODE_STRING:case OGX.TagManager.MODE_ASCII:t+='<span class="ogx_tag_manager_tag ogx_tag_manager_tags_container_tag">'+n[r]+"</span>";break;case OGX.TagManager.MODE_OBJECT:t+='<span class="ogx_tag_manager_tag ogx_tag_manager_tags_container_tag">'+n[r].label+"</span>"}t+="</div>",$(h.container).append(t),c(!0)}else $(h.container).find(".ogx_tag_manager_tags_container").remove(),c(!1)}function r(a){for(var n="",t="",e=0;e<a.length;e++)switch(t=h.editable===!0?'<span class="ogx_tag_manager_remove"></span>':"",h.mode){case OGX.TagManager.MODE_STRING:case OGX.TagManager.MODE_ASCII:n+='<span class="ogx_tag_manager_tag"><span>'+a[e]+"</span>"+t+"</span>";break;case OGX.TagManager.MODE_OBJECT:n+='<span class="ogx_tag_manager_tag"><span>'+a[e].label+"</span>"+t+"</span>"}return h.current_tags=a,$(h.container).find(".ogx_tag_manager_tags:first").html(n),!0}function g(a){var n=[];a=a.substr(0,3);for(var t=0;t<h.tags.length;t++)0===h.tags[t].toLowerCase().indexOf(a.toLowerCase())&&h.current_tags.indexOf(h.tags[t])===-1&&n.push(h.tags[t]);return n}function s(a){for(var n=new RegExp(a,"gi"),t=h.tags.find("label",n),e=0;e<h.current_tags.length;e++)t.findDelete("label",h.current_tags[e].label);return t}function i(a){var n=a.substr(0,3),t=o(n),e=[];if(h.tags_ascii[t])for(var r=0;r<h.tags_ascii[t].length;r++)h.tags_ascii[t][r].toLowerCase().indexOf(a.toLowerCase())!==-1&&h.current_tags.indexOf(h.tags[r])===-1&&e.push(h.tags_ascii[t][r]);return e}function o(a){for(var n="",t=0;t<a.length;t++)n+=a.toLowerCase().charCodeAt(t).toString();return n}function _(a){a?$(h.container).find(".ogx_tag_manager_input:first").on("keyup",function(a){var t=$(this).val();if(t.length>=3)if(a.which===h.keycode&&h.add_new)n(t),$(h.container).find(".ogx_tag_manager_input:first").val(""),e(!1);else{var r;switch(h.mode){case OGX.TagManager.MODE_STRING:r=g(t);break;case OGX.TagManager.MODE_OBJECT:r=s(t);break;case OGX.TagManager.MODE_ASCII:r=i(t)}r.length>0?e(!0,r):e(!1)}else e(!1)}):$(h.container).find(".ogx_tag_manager_input:first").off("keyup")}function c(a){a?$(h.container).find(".ogx_tag_manager_tags_container:first").on("click",".ogx_tag_manager_tags_container_tag",function(){var a=$(this).text();n(a),$(h.container).find(".ogx_tag_manager_input:first").val(""),e(!1)}):$(h.container).find(".ogx_tag_manager_tags_container:first").off("click",".ogx_tag_manager_tags_container_tag")}function f(a){a?$(h.container).on("click",".ogx_tag_manager_remove",function(){var a=$(this).parent("span:first").find("span:first").text();t(a),$(h.container).trigger(OGX.TagManager.TAG_REMOVED,a),$(h.container).find(".ogx_tag_manager_input:first").focus()}):$(h.container).off("click",".ogx_tag_manager_remove")}function u(){$(h.container).addClass("ogx_tag_manager"),$(h.container).html('<span class="ogx_tag_manager_tags"></span><input type="text" class="ogx_tag_manager_input" placeholder="'+h.placeholder+'">')}function d(){h||(h={});for(var a in m)h.hasOwnProperty(a)||(h[a]=m[a]);h.tags.hasOwnProperty("insert")||(h.tags=new OGX.List(h.tags)),h.current_tags.hasOwnProperty("insert")||(h.current_tags=new OGX.List(h.current_tags)),O.el=p=$(h.container)}function l(){return"undefined"==typeof OGX.List?void console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000"):(d(),u(),h.enabled&&h.editable?(h.enabled=!1,O.enable()):(h.enabled=!0,O.disable()),void(h.current_tags.length>0&&r(h.current_tags)))}var p,O=this,h=a,m={editable:!1,add_new:!0,tags:[],current_tags:[],tags_ascii:[],mode:OGX.TagManager.MODE_STRING,keycode:13,placeholder:"keywords",enabled:!0};this.el=null,this.enable=function(){h.enabled||(h.enabled=!0,_(!0),c(!0),f(!0),$(h.container).find(".ogx_tag_manager_input:first").prop("placeholder",h.placeholder),$(h.container).find(".ogx_tag_manager_input:first").prop("disabled",!1))},this.disable=function(){h.enabled&&(h.enabled=!1,_(!1),c(!1),f(!1),$(h.container).find(".ogx_tag_manager_input:first").prop("placeholder",""),$(h.container).find(".ogx_tag_manager_input:first").prop("disabled",!0))},this.setTags=function(a){return a.hasOwnProperty("insert")||(a=new OGX.List(a)),h.tags=a,!0},this.getTags=function(){return h.tags},this.getCurrentTags=function(){return h.current_tags},this.setCurrentTags=function(a){return a.hasOwnProperty("insert")||(a=new OGX.List(a)),h.current_tags=a,r(h.current_tags)},this.showTags=function(a){return r(a)},this.addTag=function(a){return n(a)},this.removeTag=function(a){return t(a)},this.destroy=function(){_(!1),c(!1),f(!1)},l()},OGX.TagManager=function(a){"use strict";return new OGX.prototype.TagManager(a)},OGX.TagManager.tagDataset=function(a,n,t){"use strict";"undefined"==typeof t&&(t=!1);for(var e,r=[],g=0;g<a.length;g++)for(var s=0;s<n.length;s++)if(a[g].hasOwnProperty(n[s])){e=a[g][n[s]].split(" ");for(var i=0;i<e.length;i++)t&&t.indexOf(e[i])!==-1||r.indexOf(e[i])===-1&&r.push(e[i])}return r},OGX.TagManager.tagDatatree=function(a,n){"use strict";function t(a,n){function t(a){if(a.hasOwnProperty("items"))for(var r=0;r<a.items.length;r++){for(var g in a.items[r])n.indexOf(g)>-1&&e.indexOf(a.items[r][g])===-1&&e.push(a.items[r][g]);return t(a.items[r]),!0}}var e=[],r=t(a);if(r)return e}t(a,n)},OGX.TagManager.TAG_ADDED="tagAdded",OGX.TagManager.TAG_REMOVED="tagRemoved",OGX.TagManager.MODE_STRING="modeString",OGX.TagManager.MODE_OBJECT="modeObject",OGX.TagManager.MODE_ASCII="modeAscii";