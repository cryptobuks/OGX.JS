if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.Window=function(n){"use strict";function i(){var n=c();$(N.container).append(n),A.el=g=$(N.container).find(".ogx_window:last");var i=g.find(".ogx_view:first"),o=g.height()-i.position().top;i.height(o)}function o(n,i){var o;return i.indexOf("%")!==-1?(o=i.split("%"),o=parseInt(o[0]),o=Math.round(o*$(window)[n]()/100)):(o=i.split("px"),o=parseInt(o[0])),o}function t(n){return n.hasOwnProperty("originalEvent")?n.originalEvent.changedTouches[0]:n}function e(n){n?g.on(f,function(n){n=t(n),W=n.pageX,I=n.pageY,X=0,M=0,g.css("transition","none"),G||(G=g.position().left,x=g.position().top),s(!0),$("body").on(O,function(n){n.preventDefault(),n.stopImmediatePropagation(),n=t(n),X=n.pageX-W,M=n.pageY-I}),$("body").on(h,function(n){if(s(!1),$("body").off(O),$("body").off(h),n=t(n),T=Math.abs(G-X),E=Math.abs(x-M),A.anim===OGX.Window.ANIM_RIGHT||A.anim===OGX.Window.ANIM_LEFT){if(E<T)if(A.anim===OGX.Window.ANIM_RIGHT){if(Math.abs(X)>N.drag_min_x)return void N.core.hideWindow(N)}else if(A.anim===OGX.Window.ANIM_LEFT&&G>X)return void N.core.hideWindow(N);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),T&&g.css("transition","all "+Math.round(X*N.win_anim_in_time/g.width())+"ms"),g.css({transform:"translate3D("+G+"px, 0px, 0px)"})}else if(A.anim===OGX.Window.ANIM_BOTTOM||A.anim===OGX.Window.ANIM_TOP){if(E>T)if(A.anim===OGX.Window.ANIM_BOTTOM){if(M>N.drag_min_y&&I<n.pageY)return void N.core.hideWindow(N)}else if(A.anim===OGX.Window.ANIM_TOP&&x>M&&Math.abs(M)>N.drag_min_y)return void N.core.hideWindow(N);g.on("transitionend",function(){g.off("transitionend"),g.css("transition","none")}),E&&g.css("transition","all "+Math.round(M*N.win_anim_in_time/g.height())+"ms"),g.css({transform:"translate3D(0px, "+x+"px, 0px)"})}G=!1})}):g.off(f)}function s(n){n?p||(p=setInterval(a,10)):p&&clearInterval(p)}function a(){A.anim===OGX.Window.ANIM_RIGHT||A.anim===OGX.Window.ANIM_LEFT?Math.abs(x-M)<Math.abs(G-X)&&Math.abs(x-M)<N.drag_max_y&&A.anim&&(A.anim===OGX.Window.ANIM_RIGHT?G+X+A.el.outerWidth()>$(window).width()&&g.css({transform:"translate3D("+(G+X)+"px, 0px, 0px)"}):A.anim===OGX.Window.ANIM_LEFT&&G>X&&g.css({transform:"translate3D("+X+"px, 0px, 0px)"})):A.anim!==OGX.Window.ANIM_BOTTOM&&A.anim!==OGX.Window.ANIM_TOP||Math.abs(x-M)>Math.abs(G-X)&&A.anim&&(A.anim===OGX.Window.ANIM_BOTTOM?M>0&&g.css({transform:"translate3D(0px, "+(x+M)+"px, 0px)"}):A.anim===OGX.Window.ANIM_TOP&&M<0&&g.css({transform:"translate3D(0px, "+M+"px, 0px)"}))}function d(n){n?g.on("click",".ogx_window_main_icon",function(){N.core.hideWindow(N)}):g.off("click",".ogx_window_main_icon")}function r(n){n?g.on("click",".ogx_window_icon",function(){g.trigger(OGX.Window.HIT_ICON,{index:$(this).index()})}):g.off("click",".ogx_window_icon")}function w(n){n?window.addEventListener("resize",A.update):window.removeEventListener("resize",A.update)}function c(){var n={};n.w=o("width",N.width)+"px",n.h=o("height",N.height)+"px",n.style=N.style,n.title=N.title,n.css=N.css,n.icons=N.icons,n.html="",N.zindex&&(n.zindex="z-index:"+N.zindex+";"),N.html&&(n.html=N.html),N.template&&(n.html=OGX.Templater.getTemplate(N.template));var i=OGX.Templater.templatize(n,N.win_html);return i}function l(){for(var n in y)N.hasOwnProperty(n)||(N[n]=y[n]);switch(N.mode){case OGX.Window.MODE_MOBILE:f="touchstart",h="touchend",O="touchmove";break;case OGX.Window.MODE_DESKTOP:f="mousedown",h="mouseup",O="mousemove"}}function _(){if(l(),i(),u=A.el.find(".ogx_view:first"),N.scroll){if("undefined"==typeof OGX.Scroller)return void console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000");if("undefined"==typeof OGX.Templater)return void console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000");v=A.el.find(".ogx_view:first"),m=new OGX.Scroller({container:v[0],init_delay:100,nartual_scroll:N.nartual_scroll}),v.on(OGX.Scroller.READY,function(){v.off(OGX.Scroller.READY);var n=m.getOuter(),i=$(window).height();N.style!==OGX.Window.STYLE_NONE&&(i-=A.el.find(".ogx_window_head:first").height()),$(n).css("height",i+"px"),u=$(m.getInner())})}N.icons.length>0&&r(!0),N.drag&&e(!0),d(!0),w(!0)}var f,h,O,m,u,p,g,G,x,X,M,W,I,T,E,v,A=this,N=n,y={style:OGX.Window.STYLE_BACK,mode:OGX.Window.MODE_MOBILE,icons:[],css:"",scroll:!1,nartual_scroll:!0,drag:!0,drag_min_x:100,drag_max_y:30,drag_min_y:100,width:"100%",height:"100%",title:"",win_html:'<div class="ogx_window ogx_hw $css" style="width:$w; height:$h; $zindex"><div class="ogx_window_head ogx_window_head_$style"><span class="ogx_window_main_$style ogx_window_main_icon"></span><span class="ogx_window_title">$title</span><span class="ogx_window_icons">{{loop $icons <span class="ogx_window_icon" style="background-image:url(\'$icons.$\')"></span>}}</span></div><div class="ogx_view">$html</div></div>',html:!1,template:!1,win_anim_in_time:350,win_anim_out_time:350,zindex:!1};this.snooze=!1,this.views={},this.anim=null,this.el=null,this.status=OGX.Window.CLOSED,this.zindex=N.zindex,this.update=function(){var n=o("width",N.width),i=o("height",N.height);g.css("width",n).css("height",i);var t=g.find(".ogx_view:first");i=g.height()-t.position().top,t.height(i),N.scroll&&m.update()},this.updateScroll=function(){return!!N.scroll&&(m.update(),!0)},this.getTiming=function(){return{in:N.win_anim_in_time,out:N.win_anim_out_time}},this.getContainer=function(){return u},this.setContent=function(n){if(N.scroll)if(m.getState()===OGX.Scroller.READY){var i=m.getInner();$(i).html(n),m.update()}else m.el.on(OGX.Scroller.READY,function(){m.el.off(OGX.Scroller.READY),A.setContent(n)})},this.swapIcon=function(n,i){N.icons[n]=i,A.el.find(".ogx_window_icons").find(".ogx_window_icon:eq("+String(n)+")").css("background-image",i)},this.destroy=function(){v&&v.off(OGX.Scroller.READY),N.scroll&&m.destroy(),N.icons.length&&r(!1),w(!1),N.drag&&e(!1),d(!1),s(!1)},_()},OGX.Window=function(n){"use strict";return new OGX.prototype.Window(n)},OGX.Window.ANIM_LEFT="windowAnimLeft",OGX.Window.ANIM_RIGHT="windowAnimRight",OGX.Window.ANIM_TOP="windowAnimTop",OGX.Window.ANIM_BOTTOM="windowAnimBottom",OGX.Window.STYLE_BACK="icon_back",OGX.Window.STYLE_CLOSE="icon_close",OGX.Window.STYLE_NONE="none",OGX.Window.CLOSE="windowClose",OGX.Window.CLOSED="windowClosed",OGX.Window.OPEN="windowOpen",OGX.Window.OPENED="windowOpened",OGX.Window.HIT_ICON="windowHitIcon",OGX.Window.MODE_DESKTOP="modeDesktop",OGX.Window.MODE_MOBILE="modeMobile";