if("undefined"==typeof OGX)var OGX=function(){};OGX.List=function(){function dynamicSort(t,e){return function(r,i){return r[t]<i[t]?e*-1:r[t]>i[t]?e:0}}function extract(t,e,r,i){if(t.hasOwnProperty(e)){var a=t[e];switch(r){case"substr":return a=a.substr(i[0],i[1]);case"numrange":return a=Number(a),Array.isArray(i)?(a=Math.floor(a/i[0]),a="pre"===i[2]?i[1]+a*i[0]+" - "+i[1]+(a+1)*i[0]:a*i[0]+i[1]+" - "+(a+1)*i[0]+i[1]):(a=Math.floor(a/i),a=a*i+" - "+(a+1)*i),a;case"date":if(!Array.isArray(i)){if("year"===i)return a=a.substr(0,4);if("month"===i)return a=a.substr(0,7);if("week"===i)return a=a.substr(0,4)+" week "+moment(a).week()}return a=moment(a).unix(),a=Math.floor(a/(60*i[0]*60*24)),a*=60*i[0]*60*24,a=moment(1e3*a).format(i[1])+" - "+moment(1e3*a+1e3*i[0]*60*60*24).format(i[1]);default:return a}return a}return!1}if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);array=Array.apply(array,arguments)||array;for(var method in OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);return array.insert=function(t,e){return array.splice(e,0,t),!0},array.delete=function(t){var e=array.splice(t,1);return!!e.length},array.findDelete=function(t,e,r){var i=0;"undefined"==typeof r&&(r=0);for(var a=[],s=0;s<this.length;s++)if(this[s][t]===e){if(a.push(this.splice(s,1)[0]),i++,r>0&&r===i)return a;s--}return a},array.findReplace=function(t,e,r,i){var a=0;"undefined"==typeof i&&(i=0);for(var s=[],n=0;n<this.length;n++)if(this[n][t]===e&&(s.push(this[n]),a++,this[n]=r,i>0&&i===a))return s;return s},array.findUpdate=function(t,e,r,i,a){var s=0;"undefined"==typeof i&&(i=!1),"undefined"==typeof a&&(a=0);for(var n,o=[],f=0;f<this.length;f++)if(this[f][t]===e){n=!1;for(var h in r)i?this[f].hasOwnProperty(h)&&(this[f][h]=r[h],n=!0,s++):(this[f][h]=r[h],n=!0,s++);if(n&&(o.push(this[f]),a>0&&a===s))return o}return o},array.findIndex=function(t,e){var r=!1;e instanceof RegExp&&(r=!0);for(var i=0;i<this.length;i++)if(r){if(this[i][t].match(e))return{index:i}}else if(this[i][t]===e)return{index:i};return!1},array.find=function(t,e,r){var i=0,a=[],s=!1;e instanceof RegExp&&(s=!0);for(var n=0;n<this.length;n++)if(s?this[n][t].match(e)&&(a.push(this[n]),i++):this[n][t]===e&&(a.push(this[n]),i++),r>0&&i===r)return new OGX.List(a);return new OGX.List(a)},array.order=function(t,e){array.sort(dynamicSort(t,e))},array.group=function(t,e,r){for(var i,a={},s=0;s<this.length;s++)i=extract(this[s],t,e,r),i&&(a.hasOwnProperty(i)||(a[i]=[]),a[i].push({item:this[s],pos:s}));return a},array.filters={},array.addFilter=function(t,e,r){return!this.filters.hasOwnProperty(t)&&(this.filters[t]={value:r,mode:e},!0)},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={}},array.setFilters=function(t){this.filters=t},array.filter=function(){for(var ar=[],isDate,isString,isArray,fnc,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}/g,isMatch=!1,str,o,i=0;i<this.length;i++){isMatch=!0;for(var a in this.filters)if(str="this["+i+"]."+a,o=eval(str),"undefined"!=typeof o){if(hasFilters=!0,isDate=!1,isString=!1,isArray=Array.isArray(o),isArray?"string"==typeof o[0]&&(isString=!0,o[0].match(reg)&&(isDate=!0)):"string"==typeof o&&(isString=!0,o.match(reg)&&(isDate=!0)),String(this.filters[a].value).length)if("function"==typeof this.filters[a].mode)isMatch=this.filters[a].mode(o);else switch(this.filters[a].mode){case"eq":isString?o.toLowerCase()!==this.filters[a].value.toLowerCase()&&(isMatch=!1):o!==this.filters[a].value&&(isMatch=!1);break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a].value)&&(isMatch=!1);break;case"neq":isString?o.toLowerCase()===this.filters[a].value.toLowerCase()&&(isMatch=!1):o===this.filters[a].value&&(isMatch=!1);break;case"in":if(Array.isArray(this.filters[a].value)){for(var j=0;j<this.filters[a].value.length;j++)if(o.indexOf(this.filters[a].value[j])===-1){isMatch=!1;break}}else isString?isArray?o.indexOf(this.filters[a].value)===-1&&(isMatch=!1):o.toLowerCase().indexOf(this.filters[a].value.toLowerCase())===-1&&(isMatch=!1):o.indexOf(this.filters[a].value)===-1&&(isMatch=!1);break;case"nin":if(Array.isArray(this.filters[a].value)){for(var j=0;j<this.filters[a].value.length;j++)if(o.indexOf(this.filters[a].value[j])!==-1){isMatch=!1;break}}else isString?o.toLowerCase().indexOf(this.filters[a].value.toLowerCase())!==-1&&(isMatch=!1):o.indexOf(this.filters[a].value)!==-1&&(isMatch=!1);break;case"gt":isDate?moment(o).unix()<=moment(this.filters[a].value).unix()&&(isMatch=!1):o<=this.filters[a].value&&(isMatch=!1);break;case"gte":isDate?moment(o).unix()<moment(this.filters[a].value).unix()&&(isMatch=!1):o<this.filters[a].value&&(isMatch=!1);break;case"lt":isDate?moment(o).unix()>=moment(this.filters[a].value).unix()&&(isMatch=!1):o>=this.filters[a].value&&(isMatch=!1);break;case"lte":isDate?moment(o).unix()>moment(this.filters[a].value).unix()&&(isMatch=!1):o>this.filters[a].value&&(isMatch=!0);break;case"btw":isDate?(moment(this.filters[a].value[0]).unix()>moment(o).unix()||moment(this.filters[a].value[1]).unix()<moment(o).unix())&&(isMatch=!1):(this.filters[a].value[0]>o||this.filters[a].value[1]<o)&&(isMatch=!1);break;case"substr":o.toLowerCase().substr(this.filters[a].value[0],this.filters[a].value[1]).toLowerCase()!==this.filters[a].value[2].toLowerCase()&&(isMatch=!1);break;case"regex":o.match(this.filters[a].value)||(isMatch=!1)}else;if(!isMatch)break}else isMatch=!1;isMatch&&ar.push(this[i])}return hasFilters?OGX.List.apply(null,ar):array},array};