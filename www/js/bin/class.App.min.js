if("undefined"==typeof OGX){var OGX=function(){};OGX.View=function(){}}OGX.prototype.App=function(){"use strict";function e(e,o){$("body").append('<div class="ogx_stage ogx_hw"></div>'),o.container=$("body").find(".ogx_stage:last")[0];var n=function(){};n.prototype.BaseStage=OGX.prototype.BaseStage,n.prototype[e]=OGX.prototype[e];var t=new n;return t.BaseStage(o),t[e](),t}function o(e){i(!1,e);for(var o in R[W].windows[e].views)l(R[W].windows[e].views[o]);R[W].windows[e].views={},R[W].windows[e].el.remove(),R[W].windows[e].destroy(),delete R[W].windows[e]}function n(e){var o={opac:1,tX:0,tY:0},n=R[W].stage.el.width(),i=R[W].stage.el.height(),a=R[W].windows[e.name],s=a.el.outerWidth(),r=a.el.outerHeight(),p=a.el.find(".ogx_window_main_icon:first"),l=a.getTiming();switch(e.way&&(a.zindex||(a.el.css("z-index",N),N++),e.hasOwnProperty("fade")&&e.fade&&a.el.css("opacity",0)),e.way?(t(e.name,e.anim,!0),l=l.in,p.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")):(l=l.out,e.hasOwnProperty("fade")&&e.fade&&(o.opac=0)),e.anim){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:e.way?(o.tY=0,p.addClass("ogx_window_main_icon_top")):o.tY=-r;break;case OGX.Window.ANIM_BOTTOM:e.way?(o.tY=i-r,p.addClass("ogx_window_main_icon_bottom")):o.tY=i;break;case OGX.Window.ANIM_RIGHT:e.way?(o.tX=n-s,p.addClass("ogx_window_main_icon_right")):o.tX=n;break;case OGX.Window.ANIM_LEFT:e.way?(o.tX=0,p.addClass("ogx_window_main_icon_left")):o.tX=-s}"undefined"!=typeof e.anim_params&&(e.anim_params.hasOwnProperty("left")&&(o.tX=n-g("width",e.anim_params.left)),e.anim_params.hasOwnProperty("top")&&(o.tY=g("height",e.anim_params.top)),e.anim_params.hasOwnProperty("right")&&(o.tX=g("width",e.anim_params.right)));var w=100;e.way||(w=0),setTimeout(function(){a.el.on("transitionend",function(){a.el.off("transitionend"),e.way?a.el.removeClass("ogx_window_anim_in"):a.el.removeClass("ogx_window_anim_out"),e.hasOwnProperty("cb")&&e.cb&&(e.hasOwnProperty("params")&&e.params?e.cb.apply(A,[e.params]):e.cb()),e.way?(a.status=OGX.Window.OPENED,R[W].stage.el.trigger(OGX.Window.OPENED,e.name),A.focusWindow(e.name)):(a.status=OGX.Window.CLOSED,R[W].stage.el.trigger(OGX.Window.CLOSED,e.name))}),e.way?(a.status=OGX.Window.OPEN,R[W].stage.el.trigger(OGX.Window.OPEN,e.name)):(A.blurWindow(e.name),a.status=OGX.Window.CLOSE,R[W].stage.el.trigger(OGX.Window.CLOSE,e.name)),a.el.css({transform:"translate3D("+o.tX+"px, "+o.tY+"px, 0px)",opacity:o.opac,transition:"all "+l+"ms",visibility:"visible"})},w)}function t(e,o,n){var t=R[W].stage.el.width(),i=R[W].stage.el.height(),a=R[W].windows[e],s=a.el.outerHeight(),r=a.el.outerWidth();switch(a.el.css("transition","none"),o){case OGX.Window.ANIM_NONE:n&&a.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.Window.ANIM_TOP:n&&a.el.css({transform:"translate3D(0px, -"+s+"px, 0px)"});break;case OGX.Window.ANIM_BOTTOM:n&&a.el.css({transform:"translate3D(0px, "+i+"px, 0px)"});break;case OGX.Window.ANIM_RIGHT:n&&a.el.css({transform:"translate3D("+t+"px, 0px, 0px)"});break;case OGX.Window.ANIM_LEFT:n&&(t=a.el.outerWidth(),a.el.css({transform:"translate3D("+-r+"px, 0px, 0px)"}))}n||a.el.css("visibility","hidden")}function i(e,o){e?R[W].windows[o].el.on("click",".ogx_window_back",function(){A.hideWindow({name:o})}):R[W].windows[o].el.off("click",".ogx_window_back")}function a(e,o){R[W].popups.hasOwnProperty(o)&&R[W].popups[o].el&&(e?R[W].popups[o].el.on("transitionend",function(){a(!1),s(o)}):R[W].popups[o].el.off("transitionend"))}function s(e){R[W].popups.hasOwnProperty(e)&&(R[W].popups[e].view&&R[W].popups[e].view.destroy(),R[W].popups[e].popup.destroy(),R[W].popups[e].el.remove(),delete R[W].popups[e])}function r(e){e?R[W].overlay.el.on("touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation(),R[W].stage.el.trigger(OGX.App.OVERLAY_REMOVE),A.removeOverlay(),R[W].popup&&A.removePopup()}):R[W].overlay.el.off("touchstart")}function p(e,o){var n=function(){};n.prototype.BaseView=OGX.prototype.BaseView,n.prototype[e]=OGX.View.prototype[e];var t=new n;return t.BaseView(o),t[e](),setTimeout(function(){t.constructor(o)},50),t}function l(e){e.destroyInternal(),e.hasOwnProperty("destroy")&&e.destroy()}function w(e,o,n,t){var i={};if("undefined"==typeof n&&(n=!1),"undefined"==typeof t&&(t=!1),i.data=e.data,e.route.views[o].hasOwnProperty("controller")){var a=e.route.views[o].controller;R[W].controllers[a]=new OGX.Controllers.prototype[a]}if(n||t){if(n&&(i.html=n),t)for(var s in t)i[s]=t[s]}else e.route.views[o].hasOwnProperty("html")&&(i.html=e.route.views[o].html),e.route.views[o].hasOwnProperty("template")&&(i.html=OGX.Templater.getTemplate(e.route.views[o].template)),e.route.views[o].hasOwnProperty("data")&&(i.data=e.route.views[o].data),e.route.views[o].hasOwnProperty("scroll")&&e.route.views[o].scroll&&(i.scroll=!0);A.addToStage(o,e.route.views[o].view,i)}function d(e){var o;for(var n in P.routing)if(o=e.match("^"+n+"$"),o&&o.length){o.shift();for(var t={},i=0;i<o.length;i++)t[P.routing[n].properties[i]]=o[i];return{route:P.routing[n],data:t}}return!1}function u(e){var o={url:e};history.pushState(o,"title"+1e3*Math.random(),"index.html#"+e)}function c(e){e?window.addEventListener("resize",f):window.removeEventListener("resize",f)}function f(){var e,o,n,t,i,a;for(var s in R)e=R[s].stage.el.width(),o=R[s].stage.el.height(),R[s].popup&&R[s].popup.hasOwnProperty("el")&&R[s].popup.el&&(i=R[s].popup.width,a=R[s].popup.height,"string"==typeof i&&i.indexOf("%")!==-1&&(i=Number(i.split("%")[0]),i=Math.round(i*e/100),R[s].popup.el.width(i)),"string"==typeof a&&a.indexOf("%")!==-1&&(a=Number(a.split("%")[0]),a=Math.round(a*o/100)),n=Math.round(e/2-i/2),t=Math.round(o/2-a/2),R[s].popup.el.css("top",t+"px"),R[s].popup.el.css("left",n+"px"))}function g(e,o){var n;return o.indexOf("%")!==-1?(n=o.split("%"),n=parseInt(n[0]),n=Math.round(n*R[W].stage.el[e]()/100)):(n=o.split("px"),n=parseInt(n[0])),n}function v(e){for(var o=0;o<e.length;o++)if(P.scopes.indexOf(e[o])!==-1)return!0;return!1}function y(){$(document).on("backbutton",function(e){e.preventDefault(),e.stopImmediatePropagation();var o=!1;for(var n in R[W].windows)A.hideWindow({name:n},function(){A.removeWindow(n)}),o=!0;o||($(document).trigger(OGX.App.NAV_BACK),navigator.app.backHistory(),console.log("go back"))}),$(window).on("popstate",function(e){console.log("pop"),null!==e.originalEvent.state?A.goto(e.originalEvent.state.url,!1):P.autoExit?navigator.app.exitApp():$(P.container).trigger(OGX.App.APP_EXIT)})}function m(){var e;for(var o in P.stages)P.stages.hasOwnProperty(o)&&(e=!1,P.stages[o].hasOwnProperty("html")&&(e=P.stages[o].html),P.stages[o].hasOwnProperty("template")&&(e=OGX.Templater.getTemplate(P.stages[o].template)),A.addStage(o,P.stages[o].stage,{html:e,observe:P.stages[o].observe},P.stages[o].use))}function O(){var e,o=[];e=debug?"/html/templates/":"html/templates/";for(var n in P.templates)o.push({name:n,file:e+P.templates[n]});OGX.Templater.loadTemplates(o,h)}function h(){m()}function _(){for(var e in E)P.hasOwnProperty(e)||(P[e]=E[e]);A.el=$(document)}function X(){$.getJSON("app.json",function(e){P=e,x()})}function G(){return"undefined"==typeof OGX.Templater?(console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Scroller?(console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.BaseView?(console.log("%c CRITICAL ERROR - OGX.BaseView not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Stage?(console.log("%c CRITICAL ERROR - OGX.BaseStage not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Window?(console.log("%c CRITICAL ERROR - OGX.Window not found! ","background:#222; color: #FF0000"),!1):"undefined"!=typeof OGX.Popup||(console.log("%c CRITICAL ERROR - OGX.Popup not found! ","background:#222; color: #FF0000"),!1)}function x(){_(),O(),y(),c(!0)}var P,b,A=this,E={scopes:["public"],overlay_delay:350,observe:!1},W=!1,C=!1,R={},I=!1,T=new OGX.ResponsiveGraphics({bind:!1}),N=1e3,M={};this.el=null,this.trigger=function(e,o){A.el.trigger(e,o)},this.bindGfx=function(e,o){T.bind(e,o)},this.unbindGfx=function(e){T.unbind(e)},this.refreshGfx=function(e){T.resize(e)},this.showStageNav=function(){I||(I=new OGX.MobileStageNavigator({}))},this.addStage=function(o,n,t,i){if(R.hasOwnProperty(o))return!1;var a=e(n,t);R[o]={stage:a,windows:{},popups:{},views:{},controllers:{},overlay:null,snooze:!1},W=o,a.constructor(),a.ux(!0),"undefined"==typeof i&&(i=!0),i&&A.showStage(o)},this.removeStage=function(e){},this.useStage=function(e){W=e},this.snoozeStage=function(e){if(!R[e].snooze){R[e].snooze=!0;for(var o in R[e].stage.views)R[e].stage.views[o].blur();R[e].stage.el=R[e].stage.el.detach()}},this.wakeStage=function(e){if(R[e].snooze){R[e].snooze=!0;for(var o in R[e].stage.views)R[e].stage.views[o].focus();R[C].stage.el.appendTo("body"),R[e].stage.el=$("body").find(".ogx_stage:last")}},this.showStage=function(e,o){if("undefined"==typeof o&&(o=!1),o){var n=$(window).height();switch(o){case OGX.MobileStage.ANIM_SWAP:R[C].stage.el.on("transitionend",function(){R[C].stage.el.off("transitionend"),R[C].stage.el.css("top",-n+"px"),R[e].stage.el.css("top","0px"),R[e].stage.el.on("transitionend",function(){R[e].stage.el.off("transitionend"),R[e].stage.el.css("transform","scale(1)"),R[C].stage.el.removeClass("ogx_stage_anim"),R[C].stage.el.css("display","none"),C=e,A.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:C,new:e})})}),R[e].stage.el.addClass("ogx_stage_anim"),R[C].stage.el.addClass("ogx_stage_anim"),R[C].stage.el.css("transform","scale(0.9)"),R[e].stage.el.css("top",n+"px"),R[e].stage.el.css("display","block"),R[e].stage.el.css("transform","scale(0.9)"),R[e].stage.el.addClass("ogx_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:R[e].stage.el.appendTo("body"),R[e].stage.el.addClass("ogx_stage_anim_swap"),R[C].stage.el.addClass("ogx_stage_anim"),R[C].stage.el.addClass("ogx_stage_anim_flip")}}else C&&R[C].stage.el.css("display","none"),R[e].stage.el.css("display","block"),C=e},this.addToStage=function(e,o,n,t){var i;if("undefined"==typeof n&&(n={}),"undefined"==typeof t&&(t=!0),!OGX.View.hasOwnProperty(o))return console.log("%c CRITICAL ERROR - OGX.View."+o+" not found! ","background:#222; color: #FF0000"),!1;OGX.View[o].hasOwnProperty("scopes")||(OGX.View[o].scopes=["public"]);var a=v(OGX.View[o].scopes);return a||console.log("bad scope for that view"),n.container=R[W].stage.el.find(e)[0],A.removeFromStage(e),i=p(o,n),R[W].views[e]={view:i,name:o},!0},this.removeFromStage=function(e){R[W].views.hasOwnProperty(e)&&(l(R[W].views[e].view),delete R[W].views[e])},this.windowExists=function(e){return R[W].windows.hasOwnProperty(e)},this.getWindow=function(e){return!!A.windowExists(e)&&R[W].windows[e]},this.addWindow=function(e){if(!e.hasOwnProperty("name"))return!1;if(A.windowExists(e.name))return!1;e.container=R[W].stage.el[0],e.core=this;var o=new OGX.Window(e);return o.snooze=!1,R[W].windows[e.name]=o,e.hasOwnProperty("anim")&&e.anim&&A.showWindow(e),o},this.showWindow=function(e){if(R[W].windows.hasOwnProperty(e.name)){var o=R[W].windows[e.name];o.anim=e.anim,e.way=!0,setTimeout(function(){n(e)},0),i(!0,e.name)}},this.hideWindow=function(e){return!!A.windowExists(e.name)&&(e.hasOwnProperty("anim")&&e.anim?e.anim=OGX.Window.ANIM_NONE:R[W].windows[e.name].anim&&(e.anim=R[W].windows[e.name].anim),i(!1,e.name),e.way=0,setTimeout(function(){n(e)},0),R[W].stage.el.trigger(OGX.Window.CLOSE,e.name),void R[W].stage.el.trigger(OGX.Window.CLOSE+"_"+e.name,e.name))},this.snoozeWindow=function(e){R[W].windows[e].snooze||(R[W].windows[e].snooze=!0,A.blurWindow(e),R[W].windows[e].el=R[W].windows[e].el.detach())},this.wakeWindow=function(e){R[W].windows[e].snooze&&(R[W].windows[e].snooze=!1,A.focusWindow(e),R[W].windows[e].el=R[W].windows[e].el.detach(),R[W].windows[e].el.appendTo(R[W].stage.el),R[W].windows[e].el=R[W].stage.el.find(".ogx_window:last"))},this.blurWindow=function(e){for(var o in R[W].windows[e].views)R[W].windows[e].views[o].blur()},this.focusWindow=function(e){for(var o in R[W].windows[e].views)R[W].windows[e].views[o].focus()},this.removeWindow=function(e){return!!A.windowExists(e)&&(o(e),!0)},this.addToWindow=function(e){if(!e.hasOwnProperty("name"))return!1;e.hasOwnProperty("container")||(e.container=".ogx_view:first"),R[W].windows[e.name].snooze&&A.wakeWindow(e.name),R[W].windows[e.name].views.hasOwnProperty(e.container)&&A.removeFromWindow(e.name,e.container),e.hasOwnProperty("data")||(e.data={}),e.data.container=R[W].windows[e.name].el.find(e.container);var o=p(e.view,e.data);R[W].windows[e.name].views[e.container]=o},this.removeFromWindow=function(e,o){return!!R[W].windows[e].views.hasOwnProperty(o)&&(l(R[W].windows[e].views[o]),delete R[W].windows[e].views[o],!0)},this.getWindowView=function(e,o){return"undefined"==typeof o&&(o=".ogx_view:first"),!!R[W].windows[e].views.hasOwnProperty(o)&&R[W].windows[e].views[o]},this.addPopup=function(e){if(e.container=R[W].stage.el,!e.hasOwnProperty("name")&&R[W].popups.hasOwnProperty(e.name))return!1;var o=new OGX.Popup(e);switch(R[W].popups[e.name]={el:e.container.find(".ogx_popup:first"),popup:o,view:!1,name:e.name,anim:e.anim,width:e.width,height:e.height},e.view&&(e.config.container=e.container.find(".ogx_popup:first").find(".ogx_popup_body:first")[0],R[W].popups[e.name].view=p(e.view,e.config)),e.anim){case OGX.App.POPUP_FADE:setTimeout(function(){R[W].popups[e.name].el.removeClass("ogx_popup_fade_out"),R[W].popups[e.name].el.addClass("ogx_popup_fade_in")},100);break;case OGX.App.POPUP_NOANIM:R[W].popup.el.css("opacity",1)}return this.addOverlay(e.listen_overlay,OGX.App.OVERLAY_FADE),!0},this.removePopup=function(e,o){if(R[W].popups.hasOwnProperty(e)){R[W].popups[e].popup.blur();var n;switch(n="undefined"!=typeof o?o:R[W].popups[e].anim){case OGX.Popup.ANIM_FADE:a(!0,e),R[W].popups[e].el.removeClass("ogx_popup_fade_in"),R[W].popups[e].el.addClass("ogx_popup_fade_out");break;case OGX.Popup.NOANIM:s(e)}return!0}return!1},this.addOverlay=function(e,o,n){if("undefined"==typeof n&&(n=P.overlay_delay),R[W].overlay)R[W].stage.el.off("transitionend");else{var t='<div class="ogx_overlay"></div>';R[W].stage.el.prepend(t),R[W].overlay={el:R[W].stage.el.find(".ogx_overlay:first")},e&&r(!0)}switch(o){case OGX.App.OVERLAY_FADE:setTimeout(function(){R[W].overlay&&R[W].overlay.el&&(R[W].overlay.el.removeClass("ogx_overlay_fade_out"),R[W].overlay.el.addClass("ogx_overlay_fade_in"))},n);break;default:R[W].overlay&&R[W].overlay.el&&R[W].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){if(R[W].overlay)if(r(!1),"undefined"!=typeof e)switch(e){case OGX.App.OVERLAY_FADE:R[W].overlay.el.removeClass("ogx_overlay_fade_in"),R[W].overlay.el.addClass("ogx_overlay_fade_out"),R[W].overlay.el.css("opacity")>0?R[W].overlay.el.on("transitionend",function(){R[W].overlay&&R[W].overlay.el&&(R[W].overlay.el.off("transitionend"),R[W].overlay.el.remove(),R[W].overlay=null)}):R[W].overlay&&R[W].overlay.el&&(R[W].overlay.el.removeClass("ogx_overlay_fade_in"),R[W].overlay.el.removeClass("ogx_overlay_fade_out"),R[W].overlay.el.off("transitionend"),R[W].overlay.el.remove(),R[W].overlay=null)}else R[W].overlay&&R[W].overlay.el&&(R[W].overlay.el.remove(),R[W].overlay=null)},this.getOverlay=function(){return!!R[W].overlay&&R[W].overlay.el},this.getView=function(e,o){return!!(R.hasOwnProperty(e)&&R[e].hasOwnProperty("views")&&R[e].views.hasOwnProperty(o)&&R[e].views[o])&&R[e].views[o].view},this.hasView=function(e,o){if(R.hasOwnProperty(e)&&R[e].hasOwnProperty("views"))for(var n in R[e].views)if(R[e].views[n].view.hasOwnProperty("name")&&R[e].views[n].view.name===o)return!0;return!1},this.getViewClass=function(e,o){var n=A.getView(e,o);if(n)for(var t in n.__proto__.constructor.prototype)if("constructor"!==t&&"BaseView"!==t)return t;return!1},this.goto=function(e,o){"undefined"==typeof o&&(o=!0);var n=d(e);if(n){b=n;b.hasOwnProperty("stage");for(var t in n.route.views)n.route.views[t].hasOwnProperty("waypoint")?(console.log("waypoint"),M.hasOwnProperty(n.route.views[t].waypoint)||(M[n.route.views[t].waypoint]=new OGX.Waypoint.prototype[n.route.waypoint](n.data,html),M[n.route.views[t].waypoint].__name=n.route.views[t].waypoint,M[n.route.views[t].waypoint].__view=t,M[n.route.views[t].waypoint].__url=e)):(w(n,t,null),o&&u(e))}},this.routed=function(e,o,n){if(M.hasOwnProperty(e.__name)){var t=d(e.__url);t&&(w(t,e.__view,o,n),delete M[e.__name])}},this.getRoute=function(){return b},this.readFile=function(e,o){},this.writeFile=function(e,o,n){},G()&&X()},OGX.App=function(e){"use strict";return new OGX.prototype.App(e)},OGX.App.READY="coreReady",OGX.App.OVERLAY_FADE="coreOverlayFade",OGX.App.OVERLAY_REMOVE="coreOverlayRemove",OGX.App.NAV_BACK="coreNavBack",OGX.App.APP_EXIT="coreAppExit",OGX.App.RESIZE="coreResize",OGX.App.MODE_MOBILE="coreModeMobile",OGX.App.MODE_DESKTOP="coreModeDesktop";