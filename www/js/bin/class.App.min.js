if("undefined"==typeof OGX){var OGX=function(){};OGX.View=function(){}}OGX.prototype.App=function(){"use strict";function e(e,o){$("body").append('<div class="ogx_stage ogx_hw"></div>'),o.container=$("body").find(".ogx_stage:last")[0];var n=function(){};n.prototype.BaseStage=OGX.prototype.BaseStage,n.prototype[e]=OGX.prototype[e];var t=new n;return t.BaseStage(o),t[e](),t}function o(e){a(!1,e);for(var o in W[R].windows[e].views)w(W[R].windows[e].views[o]);W[R].windows[e].views={},W[R].windows[e].el.remove(),W[R].windows[e].destroy(),delete W[R].windows[e]}function n(e){var o={opac:1,tX:0,tY:0},n=W[R].stage.el.width(),a=W[R].stage.el.height(),i=W[R].windows[e.name],s=i.el.outerWidth(),r=i.el.outerHeight(),p=i.el.find(".ogx_window_main_icon:first"),w=i.getTiming();switch(e.way&&(i.zindex||(i.el.css("z-index",N),N++),e.hasOwnProperty("fade")&&e.fade&&i.el.css("opacity",0)),e.way?(t(e.name,e.anim,!0),w=w.in,p.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")):(w=w.out,e.hasOwnProperty("fade")&&e.fade&&(o.opac=0)),e.anim){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:e.way?(o.tY=0,p.addClass("ogx_window_main_icon_top")):o.tY=-r;break;case OGX.Window.ANIM_BOTTOM:e.way?(o.tY=a-r,p.addClass("ogx_window_main_icon_bottom")):o.tY=a;break;case OGX.Window.ANIM_RIGHT:e.way?(o.tX=n-s,p.addClass("ogx_window_main_icon_right")):o.tX=n;break;case OGX.Window.ANIM_LEFT:e.way?(o.tX=0,p.addClass("ogx_window_main_icon_left")):o.tX=-s}"undefined"!=typeof e.anim_params&&(e.anim_params.hasOwnProperty("left")&&(o.tX=n-v("width",e.anim_params.left)),e.anim_params.hasOwnProperty("top")&&(o.tY=v("height",e.anim_params.top)),e.anim_params.hasOwnProperty("right")&&(o.tX=v("width",e.anim_params.right)));var l=100;e.way||(l=0),setTimeout(function(){i.el.on("transitionend",function(){i.el.off("transitionend"),e.way?i.el.removeClass("ogx_window_anim_in"):i.el.removeClass("ogx_window_anim_out"),e.hasOwnProperty("cb")&&e.cb&&(e.hasOwnProperty("params")&&e.params?e.cb.apply(A,[e.params]):e.cb()),e.way?(i.status=OGX.Window.OPENED,W[R].stage.el.trigger(OGX.Window.OPENED,e.name),A.focusWindow(e.name)):(i.status=OGX.Window.CLOSED,W[R].stage.el.trigger(OGX.Window.CLOSED,e.name))}),e.way?(i.status=OGX.Window.OPEN,W[R].stage.el.trigger(OGX.Window.OPEN,e.name)):(A.blurWindow(e.name),i.status=OGX.Window.CLOSE,W[R].stage.el.trigger(OGX.Window.CLOSE,e.name)),i.el.css({transform:"translate3D("+o.tX+"px, "+o.tY+"px, 0px)",opacity:o.opac,transition:"all "+w+"ms",visibility:"visible"})},l)}function t(e,o,n){var t=W[R].stage.el.width(),a=W[R].stage.el.height(),i=W[R].windows[e],s=i.el.outerHeight(),r=i.el.outerWidth();switch(i.el.css("transition","none"),o){case OGX.Window.ANIM_NONE:n&&i.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.Window.ANIM_TOP:n&&i.el.css({transform:"translate3D(0px, -"+s+"px, 0px)"});break;case OGX.Window.ANIM_BOTTOM:n&&i.el.css({transform:"translate3D(0px, "+a+"px, 0px)"});break;case OGX.Window.ANIM_RIGHT:n&&i.el.css({transform:"translate3D("+t+"px, 0px, 0px)"});break;case OGX.Window.ANIM_LEFT:n&&(t=i.el.outerWidth(),i.el.css({transform:"translate3D("+-r+"px, 0px, 0px)"}))}n||i.el.css("visibility","hidden")}function a(e,o){e?W[R].windows[o].el.on("click",".ogx_window_back",function(){A.hideWindow({name:o})}):W[R].windows[o].el.off("click",".ogx_window_back")}function i(e,o){W[R].popups.hasOwnProperty(o)&&W[R].popups[o].el&&(e?W[R].popups[o].el.on("transitionend",function(){i(!1),s(o)}):W[R].popups[o].el.off("transitionend"))}function s(e){W[R].popups.hasOwnProperty(e)&&(W[R].popups[e].view&&W[R].popups[e].view.destroy(),W[R].popups[e].popup.destroy(),W[R].popups[e].el.remove(),delete W[R].popups[e])}function r(e){e?W[R].overlay.el.on("touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation(),W[R].stage.el.trigger(OGX.App.OVERLAY_REMOVE),A.removeOverlay(),W[R].popup&&A.removePopup()}):W[R].overlay.el.off("touchstart")}function p(e,o){var n=function(){};n.prototype.BaseView=OGX.prototype.BaseView,n.prototype[e]=OGX.View.prototype[e];var t=new n;return o.hasOwnProperty("template")&&(o.html=OGX.Templater.getTemplate(o.template),o.hasOwnProperty("data")&&"{}"!==JSON.stringify(o.data)&&(o.html=OGX.Templater.templatize(o.data,o.html))),t.BaseView(o),t[e](),setTimeout(function(){t.constructor(o.data)},50),t}function w(e){e.destroyInternal(),e.hasOwnProperty("destroy")&&e.destroy()}function l(e,o,n,t){var a={};if("undefined"==typeof n&&(n=!1),"undefined"==typeof t&&(t=!1),t)for(var i in e.data)t[i]=e.data[i];else a.data=e.data;if(e.route.views[o].hasOwnProperty("controller")){var s=e.route.views[o].controller;W[R].controllers[s]=new OGX.Controllers.prototype[s]}if(n||t){if(n&&(a.html=n),t)for(var i in t)a[i]=t[i]}else e.route.views[o].hasOwnProperty("html")&&(a.html=e.route.views[o].html),e.route.views[o].hasOwnProperty("template")&&(a.template=e.route.views[o].template),e.route.views[o].hasOwnProperty("data")&&(a.data=e.route.views[o].data),e.route.views[o].hasOwnProperty("scroll")&&e.route.views[o].scroll&&(a.scroll=!0);a.container=o,a.view=e.route.views[o].view,A.addToStage(a)}function d(e){var o;for(var n in P.routing)if(o=e.match("^"+n+"$"),o&&o.length){o.shift();for(var t={},a=0;a<o.length;a++)t[P.routing[n].properties[a]]=o[a];return{route:P.routing[n],data:t}}return!1}function u(e){var o={url:e};history.pushState(o,"title"+1e3*Math.random(),"index.html#"+e)}function c(e){e?window.addEventListener("resize",f):window.removeEventListener("resize",f)}function f(){var e,o,n,t,a,i;for(var s in W)e=W[s].stage.el.width(),o=W[s].stage.el.height(),W[s].popup&&W[s].popup.hasOwnProperty("el")&&W[s].popup.el&&(a=W[s].popup.width,i=W[s].popup.height,"string"==typeof a&&a.indexOf("%")!==-1&&(a=Number(a.split("%")[0]),a=Math.round(a*e/100),W[s].popup.el.width(a)),"string"==typeof i&&i.indexOf("%")!==-1&&(i=Number(i.split("%")[0]),i=Math.round(i*o/100)),n=Math.round(e/2-a/2),t=Math.round(o/2-i/2),W[s].popup.el.css("top",t+"px"),W[s].popup.el.css("left",n+"px"))}function v(e,o){var n;return o.indexOf("%")!==-1?(n=o.split("%"),n=parseInt(n[0]),n=Math.round(n*W[R].stage.el[e]()/100)):(n=o.split("px"),n=parseInt(n[0])),n}function g(e){for(var o=0;o<e.length;o++)if(P.scopes.indexOf(e[o])!==-1)return!0;return!1}function m(){$(document).on("backbutton",function(e){e.preventDefault(),e.stopImmediatePropagation();var o=!1;for(var n in W[R].windows)A.hideWindow({name:n},function(){A.removeWindow(n)}),o=!0;o||($(document).trigger(OGX.App.NAV_BACK),navigator.app.backHistory())}),$(window).on("popstate",function(e){null!==e.originalEvent.state?A.goto(e.originalEvent.state.url,!1):P.autoExit?navigator.app.exitApp():$(P.container).trigger(OGX.App.APP_EXIT)})}function y(){var e;for(var o in P.stages)P.stages.hasOwnProperty(o)&&(e=!1,P.stages[o].hasOwnProperty("html")&&(e=P.stages[o].html),P.stages[o].hasOwnProperty("template")&&(e=OGX.Templater.getTemplate(P.stages[o].template)),A.addStage(o,P.stages[o].stage,{html:e,observe:P.stages[o].observe},P.stages[o].use))}function O(){var e,o=[];e=debug?"/html/templates/":"html/templates/";for(var n in P.templates)o.push({name:n,file:e+P.templates[n]});OGX.Templater.loadTemplates(o,h)}function h(){y()}function _(){for(var e in E)P.hasOwnProperty(e)||(P[e]=E[e]);A.el=$(document)}function X(){$.getJSON("app.json",function(e){P=e,x()})}function G(){return"undefined"==typeof OGX.Templater?(console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Scroller?(console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.BaseView?(console.log("%c CRITICAL ERROR - OGX.BaseView not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Stage?(console.log("%c CRITICAL ERROR - OGX.BaseStage not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Window?(console.log("%c CRITICAL ERROR - OGX.Window not found! ","background:#222; color: #FF0000"),!1):"undefined"!=typeof OGX.Popup||(console.log("%c CRITICAL ERROR - OGX.Popup not found! ","background:#222; color: #FF0000"),!1)}function x(){_(),O(),m(),c(!0)}var P,b,A=this,E={scopes:["public"],overlay_delay:350,observe:!1},R=!1,C=!1,W={},I=!1,T=new OGX.ResponsiveGraphics({bind:!1}),N=1e3,M={};this.el=null,this.trigger=function(e,o){A.el.trigger(e,o)},this.bindGfx=function(e,o){T.bind(e,o)},this.unbindGfx=function(e){T.unbind(e)},this.refreshGfx=function(e){T.resize(e)},this.showStageNav=function(){I||(I=new OGX.MobileStageNavigator({}))},this.addStage=function(o,n,t,a){if(W.hasOwnProperty(o))return!1;var i=e(n,t);W[o]={stage:i,windows:{},popups:{},views:{},controllers:{},overlay:null,snooze:!1},R=o,i.constructor(),i.ux(!0),"undefined"==typeof a&&(a=!0),a&&A.showStage(o)},this.removeStage=function(e){},this.useStage=function(e){R=e},this.snoozeStage=function(e){if(!W[e].snooze){W[e].snooze=!0;for(var o in W[e].stage.views)W[e].stage.views[o].blur();W[e].stage.el=W[e].stage.el.detach()}},this.wakeStage=function(e){if(W[e].snooze){W[e].snooze=!0;for(var o in W[e].stage.views)W[e].stage.views[o].focus();W[C].stage.el.appendTo("body"),W[e].stage.el=$("body").find(".ogx_stage:last")}},this.showStage=function(e,o){if("undefined"==typeof o&&(o=!1),o){var n=$(window).height();switch(o){case OGX.MobileStage.ANIM_SWAP:W[C].stage.el.on("transitionend",function(){W[C].stage.el.off("transitionend"),W[C].stage.el.css("top",-n+"px"),W[e].stage.el.css("top","0px"),W[e].stage.el.on("transitionend",function(){W[e].stage.el.off("transitionend"),W[e].stage.el.css("transform","scale(1)"),W[C].stage.el.removeClass("ogx_stage_anim"),W[C].stage.el.css("display","none"),C=e,A.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:C,new:e})})}),W[e].stage.el.addClass("ogx_stage_anim"),W[C].stage.el.addClass("ogx_stage_anim"),W[C].stage.el.css("transform","scale(0.9)"),W[e].stage.el.css("top",n+"px"),W[e].stage.el.css("display","block"),W[e].stage.el.css("transform","scale(0.9)"),W[e].stage.el.addClass("ogx_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:W[e].stage.el.appendTo("body"),W[e].stage.el.addClass("ogx_stage_anim_swap"),W[C].stage.el.addClass("ogx_stage_anim"),W[C].stage.el.addClass("ogx_stage_anim_flip")}}else C&&W[C].stage.el.css("display","none"),W[e].stage.el.css("display","block"),C=e},this.addToStage=function(e){var o;if("undefined"==typeof e)return!1;if(!e.hasOwnProperty("view"))return!1;if(!e.hasOwnProperty("container"))return!1;if("string"!=typeof e.container)return console.log("%c CRITICAL ERROR - container must be a selector for view "+e.view+"! ","background:#222; color: #FF0000"),!1;if(!OGX.View.hasOwnProperty(e.view))return console.log("%c CRITICAL ERROR - OGX.View."+e.view+" not found! ","background:#222; color: #FF0000"),!1;e.hasOwnProperty("add_to_nav")||(e.add_to_nav=!0),OGX.View[e.view].hasOwnProperty("scopes")||(OGX.View[e.view].scopes=["public"]);var n=g(OGX.View[e.view].scopes);return n?(console.log("check ",e.container),W[R].views.hasOwnProperty(e.container)&&A.removeFromStage(e.container),o=p(e.view,e),W[R].views[e.container]={view:o,name:e.view},!0):(console.log("%c ERROR  - Bad scope for view "+e.view),!1)},this.removeFromStage=function(e){W[R].views.hasOwnProperty(e)&&(w(W[R].views[e].view),delete W[R].views[e])},this.windowExists=function(e){return W[R].windows.hasOwnProperty(e)},this.getWindow=function(e){return!!A.windowExists(e)&&W[R].windows[e]},this.addWindow=function(e){if(!e.hasOwnProperty("name"))return!1;if(A.windowExists(e.name))return!1;e.container=W[R].stage.el[0],e.core=this;var o=new OGX.Window(e);return o.snooze=!1,W[R].windows[e.name]=o,e.hasOwnProperty("anim")&&e.anim&&A.showWindow(e),o},this.showWindow=function(e){if(W[R].windows.hasOwnProperty(e.name)){var o=W[R].windows[e.name];o.anim=e.anim,e.way=!0,setTimeout(function(){n(e)},0),a(!0,e.name)}},this.hideWindow=function(e){return!!A.windowExists(e.name)&&(e.hasOwnProperty("anim")&&e.anim?e.anim=OGX.Window.ANIM_NONE:W[R].windows[e.name].anim&&(e.anim=W[R].windows[e.name].anim),a(!1,e.name),e.way=0,setTimeout(function(){n(e)},0),W[R].stage.el.trigger(OGX.Window.CLOSE,e.name),void W[R].stage.el.trigger(OGX.Window.CLOSE+"_"+e.name,e.name))},this.snoozeWindow=function(e){W[R].windows[e].snooze||(W[R].windows[e].snooze=!0,A.blurWindow(e),W[R].windows[e].el=W[R].windows[e].el.detach())},this.wakeWindow=function(e){W[R].windows[e].snooze&&(W[R].windows[e].snooze=!1,A.focusWindow(e),W[R].windows[e].el=W[R].windows[e].el.detach(),W[R].windows[e].el.appendTo(W[R].stage.el),W[R].windows[e].el=W[R].stage.el.find(".ogx_window:last"))},this.blurWindow=function(e){for(var o in W[R].windows[e].views)W[R].windows[e].views[o].blur()},this.focusWindow=function(e){for(var o in W[R].windows[e].views)W[R].windows[e].views[o].focus()},this.removeWindow=function(e){return!!A.windowExists(e)&&(o(e),!0)},this.addToWindow=function(e){if(!e.hasOwnProperty("name"))return!1;e.hasOwnProperty("container")||(e.container='.ogx_window[data-ogx="'+W[R].windows[e.name].id+'"] .ogx_view'),W[R].windows[e.name].snooze&&A.wakeWindow(e.name),W[R].windows[e.name].views.hasOwnProperty(e.container)&&A.removeFromWindow(e.name,e.container),e.hasOwnProperty("data")||(e.data={});var o=p(e.view,e);W[R].windows[e.name].views[e.container]=o},this.removeFromWindow=function(e,o){return!!W[R].windows[e].views.hasOwnProperty(o)&&(w(W[R].windows[e].views[o]),delete W[R].windows[e].views[o],!0)},this.getWindowView=function(e,o){return"undefined"==typeof o&&(o=".ogx_view:first"),!!W[R].windows[e].views.hasOwnProperty(o)&&W[R].windows[e].views[o]},this.addPopup=function(e){if(e.container=W[R].stage.el,!e.hasOwnProperty("name")&&W[R].popups.hasOwnProperty(e.name))return!1;var o=new OGX.Popup(e);switch(e.hasOwnProperty("anim")||(e.anim=!1),W[R].popups[e.name]={el:e.container.find(".ogx_popup:first"),popup:o,view:!1,name:e.name,anim:e.anim,width:e.width,height:e.height},e.view&&(e.config.container=e.container.find(".ogx_popup:first").find(".ogx_popup_body:first")[0],W[R].popups[e.name].view=p(e.view,e.config)),e.anim){case OGX.Popup.ANIM_FADE:setTimeout(function(){W[R].popups[e.name].el.removeClass("ogx_popup_fade_out"),W[R].popups[e.name].el.addClass("ogx_popup_fade_in")},100);break;case OGX.Popup.NOANIM:W[R].popup.el.css("opacity",1)}return this.addOverlay(e.listen_overlay,OGX.App.OVERLAY_FADE),!0},this.removePopup=function(e,o){if(W[R].popups.hasOwnProperty(e)){W[R].popups[e].popup.blur();var n;switch(n="undefined"!=typeof o?o:W[R].popups[e].anim){case OGX.Popup.ANIM_FADE:i(!0,e),W[R].popups[e].el.removeClass("ogx_popup_fade_in"),W[R].popups[e].el.addClass("ogx_popup_fade_out");break;case OGX.Popup.NOANIM:s(e)}return!0}return!1},this.addOverlay=function(e,o,n){if("undefined"==typeof n&&(n=P.overlay_delay),W[R].overlay)W[R].stage.el.off("transitionend");else{var t='<div class="ogx_overlay"></div>';W[R].stage.el.prepend(t),W[R].overlay={el:W[R].stage.el.find(".ogx_overlay:first")},e&&r(!0)}switch(o){case OGX.App.OVERLAY_FADE:setTimeout(function(){W[R].overlay&&W[R].overlay.el&&(W[R].overlay.el.removeClass("ogx_overlay_fade_out"),W[R].overlay.el.addClass("ogx_overlay_fade_in"))},n);break;default:W[R].overlay&&W[R].overlay.el&&W[R].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){if(W[R].overlay)if(r(!1),"undefined"!=typeof e)switch(e){case OGX.App.OVERLAY_FADE:W[R].overlay.el.removeClass("ogx_overlay_fade_in"),W[R].overlay.el.addClass("ogx_overlay_fade_out"),W[R].overlay.el.css("opacity")>0?W[R].overlay.el.on("transitionend",function(){W[R].overlay&&W[R].overlay.el&&(W[R].overlay.el.off("transitionend"),W[R].overlay.el.remove(),W[R].overlay=null)}):W[R].overlay&&W[R].overlay.el&&(W[R].overlay.el.removeClass("ogx_overlay_fade_in"),W[R].overlay.el.removeClass("ogx_overlay_fade_out"),W[R].overlay.el.off("transitionend"),W[R].overlay.el.remove(),W[R].overlay=null)}else W[R].overlay&&W[R].overlay.el&&(W[R].overlay.el.remove(),W[R].overlay=null)},this.getOverlay=function(){return!!W[R].overlay&&W[R].overlay.el},this.getView=function(e,o){return!!(W.hasOwnProperty(e)&&W[e].hasOwnProperty("views")&&W[e].views.hasOwnProperty(o)&&W[e].views[o])&&W[e].views[o].view},this.hasView=function(e,o){if(W.hasOwnProperty(e)&&W[e].hasOwnProperty("views"))for(var n in W[e].views)if(W[e].views[n].view.hasOwnProperty("name")&&W[e].views[n].view.name===o)return!0;return!1},this.getViewClass=function(e,o){var n=A.getView(e,o);if(n)for(var t in n.__proto__.constructor.prototype)if("constructor"!==t&&"BaseView"!==t)return t;return!1},this.goto=function(e,o){"undefined"==typeof o&&(o=!0);var n=d(e);if(n){b=n;b.hasOwnProperty("stage");for(var t in n.route.views)n.route.views[t].hasOwnProperty("waypoint")?(console.log("waypoint"),M.hasOwnProperty(n.route.views[t].waypoint)||(M[n.route.views[t].waypoint]=new OGX.Waypoint.prototype[n.route.waypoint](n.data,html),M[n.route.views[t].waypoint].__name=n.route.views[t].waypoint,M[n.route.views[t].waypoint].__view=t,M[n.route.views[t].waypoint].__url=e)):(l(n,t,null),o&&u(e))}},this.routed=function(e,o,n){if(M.hasOwnProperty(e.__name)){var t=d(e.__url);t&&(l(t,e.__view,o,n),delete M[e.__name])}},this.getRoute=function(){return b},this.readFile=function(e,o){},this.writeFile=function(e,o,n){},G()&&X()},OGX.App=function(e){"use strict";return new OGX.prototype.App(e)},OGX.App.READY="coreReady",OGX.App.OVERLAY_FADE="coreOverlayFade",OGX.App.OVERLAY_REMOVE="coreOverlayRemove",OGX.App.NAV_BACK="coreNavBack",OGX.App.APP_EXIT="coreAppExit",OGX.App.RESIZE="coreResize",OGX.App.MODE_MOBILE="coreModeMobile",OGX.App.MODE_DESKTOP="coreModeDesktop";